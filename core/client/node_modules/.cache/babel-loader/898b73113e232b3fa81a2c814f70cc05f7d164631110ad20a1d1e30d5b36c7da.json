{"ast":null,"code":"import React,{useEffect,useState,useRef}from'react';import cameraSwitchIcon from'../assets/icons/camera-switch.png';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function CameraControl(){const videoRef=useRef(null);const floatingContainerRef=useRef(null);const[stream,setStream]=useState(null);const[devices,setDevices]=useState([]);const[selectedDeviceId,setSelectedDeviceId]=useState(null);const[isCameraOn,setIsCameraOn]=useState(false);const currentStreamRef=useRef(null);const currentCameraDeviceIdRef=useRef(null);const clickTimeoutRef=useRef(null);const storageKey='cameraControlFloatingPosition';function hasMediaDevices(){return typeof navigator!=='undefined'&&navigator.mediaDevices&&typeof navigator.mediaDevices.enumerateDevices==='function'&&typeof navigator.mediaDevices.getUserMedia==='function';}async function getCameraDevices(){if(!hasMediaDevices()){console.error('浏览器不支持 mediaDevices.enumerateDevices API 或未在安全上下文中，无法获取摄像头设备列表');return[];}try{const allDevices=await navigator.mediaDevices.enumerateDevices();return allDevices.filter(d=>d.kind==='videoinput');}catch(error){console.error('无法获取摄像头设备列表:',error);return[];}}async function initializeCamera(deviceId){stopCamera();if(!hasMediaDevices()){alert('摄像头功能无法使用，请确保浏览器支持并且页面通过HTTPS访问');throw new Error('浏览器不支持 mediaDevices.getUserMedia 或未在安全上下文中');}try{const stream=await navigator.mediaDevices.getUserMedia({video:deviceId?{deviceId:{exact:deviceId}}:true,audio:false});currentStreamRef.current=stream;currentCameraDeviceIdRef.current=deviceId;setStream(stream);setSelectedDeviceId(deviceId);setIsCameraOn(true);return stream;}catch(error){console.error('摄像头初始化失败:',error);alert('摄像头初始化失败: '+error.message);throw error;}}function stopCamera(){if(currentStreamRef.current){currentStreamRef.current.getTracks().forEach(track=>track.stop());currentStreamRef.current=null;currentCameraDeviceIdRef.current=null;}setStream(null);setIsCameraOn(false);}async function switchCamera(){if(!isCameraOn){console.log('摄像头未打开，无法切换');return;}const videoDevices=await getCameraDevices();if(videoDevices.length<2){console.log('仅有一个摄像头，无法切换');return;}let nextDeviceId;for(const device of videoDevices){if(device.deviceId!==currentCameraDeviceIdRef.current){nextDeviceId=device.deviceId;break;}}if(!nextDeviceId)nextDeviceId=videoDevices[0].deviceId;try{await initializeCamera(nextDeviceId);console.log('摄像头已切换:',nextDeviceId);}catch(e){console.error('切换失败:',e);}}async function toggleCameraOnOff(){if(isCameraOn){stopCamera();}else{let deviceIdToUse=selectedDeviceId;if(!deviceIdToUse){const videoDevices=await getCameraDevices();setDevices(videoDevices);if(videoDevices.length===0){alert('无摄像头设备');return;}deviceIdToUse=videoDevices[0].deviceId;}try{await initializeCamera(deviceIdToUse);}catch(_unused){}}}function handleButtonClick(){if(clickTimeoutRef.current){clearTimeout(clickTimeoutRef.current);clickTimeoutRef.current=null;}clickTimeoutRef.current=setTimeout(()=>{switchCamera();clickTimeoutRef.current=null;},250);}function handleButtonDoubleClick(){if(clickTimeoutRef.current){clearTimeout(clickTimeoutRef.current);clickTimeoutRef.current=null;}toggleCameraOnOff();}useEffect(()=>{async function init(){if(!hasMediaDevices()){console.warn('浏览器不支持 mediaDevices API 或未在安全上下文中，摄像头功能不可用');return;}const videoDevices=await getCameraDevices();setDevices(videoDevices);}init();return()=>{stopCamera();if(clickTimeoutRef.current)clearTimeout(clickTimeoutRef.current);if(floatingContainerRef.current){floatingContainerRef.current.removeEventListener('mousedown',onMouseDown);floatingContainerRef.current.removeEventListener('touchstart',onTouchStart);}document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);document.removeEventListener('touchmove',onTouchMove);document.removeEventListener('touchend',onTouchEnd);};},[]);useEffect(()=>{const video=videoRef.current;if(video&&stream){video.srcObject=stream;const playPromise=video.play();if(playPromise!==undefined){playPromise.catch(e=>{console.warn('video.play()失败:',e);});}}else if(video){video.srcObject=null;}},[stream]);const isDraggingRef=useRef(false);const offsetXRef=useRef(0);const offsetYRef=useRef(0);const onMouseDown=e=>{if(!floatingContainerRef.current)return;isDraggingRef.current=true;offsetXRef.current=e.clientX-floatingContainerRef.current.offsetLeft;offsetYRef.current=e.clientY-floatingContainerRef.current.offsetTop;floatingContainerRef.current.style.cursor='grabbing';e.preventDefault();};const onMouseMove=e=>{if(isDraggingRef.current&&floatingContainerRef.current){let newLeft=e.clientX-offsetXRef.current;let newTop=e.clientY-offsetYRef.current;const container=floatingContainerRef.current;const maxLeft=window.innerWidth-container.offsetWidth;const maxTop=window.innerHeight-container.offsetHeight;newLeft=Math.min(Math.max(0,newLeft),maxLeft);newTop=Math.min(Math.max(0,newTop),maxTop);container.style.left=newLeft+'px';container.style.top=newTop+'px';}};const onMouseUp=()=>{if(floatingContainerRef.current){isDraggingRef.current=false;floatingContainerRef.current.style.cursor='grab';const container=floatingContainerRef.current;localStorage.setItem(storageKey,JSON.stringify({left:container.offsetLeft,top:container.offsetTop}));}};const onTouchStart=e=>{if(!floatingContainerRef.current||e.touches.length===0)return;isDraggingRef.current=true;const touch=e.touches[0];offsetXRef.current=touch.clientX-floatingContainerRef.current.offsetLeft;offsetYRef.current=touch.clientY-floatingContainerRef.current.offsetTop;floatingContainerRef.current.style.cursor='grabbing';};const onTouchMove=e=>{if(isDraggingRef.current&&floatingContainerRef.current&&e.touches.length>0){const touch=e.touches[0];let newLeft=touch.clientX-offsetXRef.current;let newTop=touch.clientY-offsetYRef.current;const container=floatingContainerRef.current;const maxLeft=window.innerWidth-container.offsetWidth;const maxTop=window.innerHeight-container.offsetHeight;newLeft=Math.min(Math.max(0,newLeft),maxLeft);newTop=Math.min(Math.max(0,newTop),maxTop);container.style.left=newLeft+'px';container.style.top=newTop+'px';e.preventDefault();}};const onTouchEnd=()=>{if(floatingContainerRef.current){isDraggingRef.current=false;floatingContainerRef.current.style.cursor='grab';const container=floatingContainerRef.current;localStorage.setItem(storageKey,JSON.stringify({left:container.offsetLeft,top:container.offsetTop}));}};useEffect(()=>{if(!floatingContainerRef.current)return;const container=floatingContainerRef.current;const savedPosStr=localStorage.getItem(storageKey);let left=10;let top=10;if(savedPosStr){try{const pos=JSON.parse(savedPosStr);if(typeof pos.left==='number'&&typeof pos.top==='number'&&pos.left>=0&&pos.top>=0){left=pos.left;top=pos.top;}}catch(_unused2){// ignore\n}}container.style.position='fixed';container.style.left=left+'px';container.style.top=top+'px';container.style.cursor='grab';container.style.zIndex='10000';container.style.width='160px';container.addEventListener('mousedown',onMouseDown);document.addEventListener('mousemove',onMouseMove);document.addEventListener('mouseup',onMouseUp);container.addEventListener('touchstart',onTouchStart);document.addEventListener('touchmove',onTouchMove);document.addEventListener('touchend',onTouchEnd);return()=>{container.removeEventListener('mousedown',onMouseDown);document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);container.removeEventListener('touchstart',onTouchStart);document.removeEventListener('touchmove',onTouchMove);document.removeEventListener('touchend',onTouchEnd);};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        :root {\\n          --camera-size: 120px;        /* \\u6444\\u50CF\\u5934\\u89C6\\u9891\\u548C\\u5BB9\\u5668\\u5927\\u5C0F */\\n          --blur-ring-offset: 5px;    /* \\u78E8\\u7802\\u73AF\\u76F8\\u5BF9\\u5BB9\\u5668\\u7684\\u504F\\u79FB */\\n          --blur-ring-size: 130px;     /* \\u78E8\\u7802\\u73AF\\u5927\\u5C0F\\uFF0C\\u7B49\\u4E8E camera-size + 2 * blur-ring-offset */\\n        }\\n        body {\\n          background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);\\n          height: 100vh;\\n          margin: 0;\\n        }\\n        #video-wrapper {\\n          width: var(--camera-size);\\n          height: var(--camera-size);\\n          border-radius: 50%;\\n          position: relative;\\n          background-color: transparent;\\n          box-shadow: 0 0 15px rgba(0, 0, 0, 0.25);\\n          overflow: visible;\\n          user-select: none;\\n          cursor: default;\\n        }\\n        #video-wrapper::before {\\n          content: \\\"\\\";\\n          position: absolute;\\n          top: calc(var(--blur-ring-offset) * -1);\\n          left: calc(var(--blur-ring-offset) * -1);\\n          width: var(--blur-ring-size);\\n          height: var(--blur-ring-size);\\n          border-radius: 50%;\\n          background: rgba(255 255 255 / 0.15);\\n          backdrop-filter: blur(15px);\\n          -webkit-backdrop-filter: blur(15px);\\n          pointer-events: none;\\n          z-index: 1;\\n        }\\n        #video {\\n          width: var(--camera-size);\\n          height: var(--camera-size);\\n          border-radius: 50%;\\n          object-fit: cover;\\n          position: relative;\\n          z-index: 2;\\n          background: transparent;\\n          user-select: none;\\n          pointer-events: none;\\n          display: block;\\n        }\\n        #floating-container {\\n          user-select: none;\\n          background: transparent;\\n          display: flex;\\n          flex-direction: column;\\n          align-items: center;\\n          gap: 8px;\\n          padding: 4px;\\n          box-sizing: border-box;\\n        }\\n        #toggle-switch-camera {\\n          cursor: pointer;\\n          width: 46px;\\n          height: 46px;\\n          border-radius: 50%;\\n          border: 1px solid #ffffff;\\n          background-color: transparent;\\n          display: flex;\\n          justify-content: center;\\n          align-items: center;\\n          transition: background-color 0.3s, border-color 0.3s;\\n        }\\n        #toggle-switch-camera:hover {\\n          background-color: rgba(0, 229, 255, 0.15);\\n          border-color: #00e5ff;\\n        }\\n        #toggle-switch-camera img {\\n          width: 45px;\\n          height: 45px;\\n          pointer-events: none;\\n          user-select: none;\\n        }\\n      \"}),/*#__PURE__*/_jsxs(\"div\",{id:\"floating-container\",ref:floatingContainerRef,children:[isCameraOn&&/*#__PURE__*/_jsx(\"div\",{id:\"video-wrapper\",children:/*#__PURE__*/_jsx(\"video\",{id:\"video\",ref:videoRef,autoPlay:true,playsInline:true,muted:true,onDragStart:e=>e.preventDefault()})}),/*#__PURE__*/_jsx(\"button\",{id:\"toggle-switch-camera\",type:\"button\",\"aria-label\":isCameraOn?'切换摄像头':'打开摄像头',onClick:handleButtonClick,onDoubleClick:handleButtonDoubleClick,title:isCameraOn?'单击切换摄像头，双击关闭摄像头':'双击打开摄像头',children:/*#__PURE__*/_jsx(\"img\",{src:cameraSwitchIcon,alt:\"\\u5207\\u6362\\u6444\\u50CF\\u5934\",draggable:false})})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","cameraSwitchIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CameraControl","videoRef","floatingContainerRef","stream","setStream","devices","setDevices","selectedDeviceId","setSelectedDeviceId","isCameraOn","setIsCameraOn","currentStreamRef","currentCameraDeviceIdRef","clickTimeoutRef","storageKey","hasMediaDevices","navigator","mediaDevices","enumerateDevices","getUserMedia","getCameraDevices","console","error","allDevices","filter","d","kind","initializeCamera","deviceId","stopCamera","alert","Error","video","exact","audio","current","message","getTracks","forEach","track","stop","switchCamera","log","videoDevices","length","nextDeviceId","device","e","toggleCameraOnOff","deviceIdToUse","_unused","handleButtonClick","clearTimeout","setTimeout","handleButtonDoubleClick","init","warn","removeEventListener","onMouseDown","onTouchStart","document","onMouseMove","onMouseUp","onTouchMove","onTouchEnd","srcObject","playPromise","play","undefined","catch","isDraggingRef","offsetXRef","offsetYRef","clientX","offsetLeft","clientY","offsetTop","style","cursor","preventDefault","newLeft","newTop","container","maxLeft","window","innerWidth","offsetWidth","maxTop","innerHeight","offsetHeight","Math","min","max","left","top","localStorage","setItem","JSON","stringify","touches","touch","savedPosStr","getItem","pos","parse","_unused2","position","zIndex","width","addEventListener","children","id","ref","autoPlay","playsInline","muted","onDragStart","type","onClick","onDoubleClick","title","src","alt","draggable"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/CameraControl.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport cameraSwitchIcon from '../assets/icons/camera-switch.png';\r\n\r\nexport default function CameraControl() {\r\n  const videoRef = useRef(null);\r\n  const floatingContainerRef = useRef(null);\r\n\r\n  const [stream, setStream] = useState(null);\r\n  const [devices, setDevices] = useState([]);\r\n  const [selectedDeviceId, setSelectedDeviceId] = useState(null);\r\n  const [isCameraOn, setIsCameraOn] = useState(false);\r\n\r\n  const currentStreamRef = useRef(null);\r\n  const currentCameraDeviceIdRef = useRef(null);\r\n\r\n  const clickTimeoutRef = useRef(null);\r\n\r\n  const storageKey = 'cameraControlFloatingPosition';\r\n\r\n  function hasMediaDevices() {\r\n    return (\r\n      typeof navigator !== 'undefined' &&\r\n      navigator.mediaDevices &&\r\n      typeof navigator.mediaDevices.enumerateDevices === 'function' &&\r\n      typeof navigator.mediaDevices.getUserMedia === 'function'\r\n    );\r\n  }\r\n\r\n  async function getCameraDevices() {\r\n    if (!hasMediaDevices()) {\r\n      console.error(\r\n        '浏览器不支持 mediaDevices.enumerateDevices API 或未在安全上下文中，无法获取摄像头设备列表'\r\n      );\r\n      return [];\r\n    }\r\n    try {\r\n      const allDevices = await navigator.mediaDevices.enumerateDevices();\r\n      return allDevices.filter((d) => d.kind === 'videoinput');\r\n    } catch (error) {\r\n      console.error('无法获取摄像头设备列表:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async function initializeCamera(deviceId) {\r\n    stopCamera();\r\n\r\n    if (!hasMediaDevices()) {\r\n      alert('摄像头功能无法使用，请确保浏览器支持并且页面通过HTTPS访问');\r\n      throw new Error('浏览器不支持 mediaDevices.getUserMedia 或未在安全上下文中');\r\n    }\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: deviceId ? { deviceId: { exact: deviceId } } : true,\r\n        audio: false,\r\n      });\r\n      currentStreamRef.current = stream;\r\n      currentCameraDeviceIdRef.current = deviceId;\r\n      setStream(stream);\r\n      setSelectedDeviceId(deviceId);\r\n      setIsCameraOn(true);\r\n      return stream;\r\n    } catch (error) {\r\n      console.error('摄像头初始化失败:', error);\r\n      alert('摄像头初始化失败: ' + error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  function stopCamera() {\r\n    if (currentStreamRef.current) {\r\n      currentStreamRef.current.getTracks().forEach((track) => track.stop());\r\n      currentStreamRef.current = null;\r\n      currentCameraDeviceIdRef.current = null;\r\n    }\r\n    setStream(null);\r\n    setIsCameraOn(false);\r\n  }\r\n\r\n  async function switchCamera() {\r\n    if (!isCameraOn) {\r\n      console.log('摄像头未打开，无法切换');\r\n      return;\r\n    }\r\n    const videoDevices = await getCameraDevices();\r\n    if (videoDevices.length < 2) {\r\n      console.log('仅有一个摄像头，无法切换');\r\n      return;\r\n    }\r\n\r\n    let nextDeviceId;\r\n    for (const device of videoDevices) {\r\n      if (device.deviceId !== currentCameraDeviceIdRef.current) {\r\n        nextDeviceId = device.deviceId;\r\n        break;\r\n      }\r\n    }\r\n    if (!nextDeviceId) nextDeviceId = videoDevices[0].deviceId;\r\n\r\n    try {\r\n      await initializeCamera(nextDeviceId);\r\n      console.log('摄像头已切换:', nextDeviceId);\r\n    } catch (e) {\r\n      console.error('切换失败:', e);\r\n    }\r\n  }\r\n\r\n  async function toggleCameraOnOff() {\r\n    if (isCameraOn) {\r\n      stopCamera();\r\n    } else {\r\n      let deviceIdToUse = selectedDeviceId;\r\n      if (!deviceIdToUse) {\r\n        const videoDevices = await getCameraDevices();\r\n        setDevices(videoDevices);\r\n        if (videoDevices.length === 0) {\r\n          alert('无摄像头设备');\r\n          return;\r\n        }\r\n        deviceIdToUse = videoDevices[0].deviceId;\r\n      }\r\n      try {\r\n        await initializeCamera(deviceIdToUse);\r\n      } catch {}\r\n    }\r\n  }\r\n\r\n  function handleButtonClick() {\r\n    if (clickTimeoutRef.current) {\r\n      clearTimeout(clickTimeoutRef.current);\r\n      clickTimeoutRef.current = null;\r\n    }\r\n    clickTimeoutRef.current = setTimeout(() => {\r\n      switchCamera();\r\n      clickTimeoutRef.current = null;\r\n    }, 250);\r\n  }\r\n\r\n  function handleButtonDoubleClick() {\r\n    if (clickTimeoutRef.current) {\r\n      clearTimeout(clickTimeoutRef.current);\r\n      clickTimeoutRef.current = null;\r\n    }\r\n    toggleCameraOnOff();\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function init() {\r\n      if (!hasMediaDevices()) {\r\n        console.warn(\r\n          '浏览器不支持 mediaDevices API 或未在安全上下文中，摄像头功能不可用'\r\n        );\r\n        return;\r\n      }\r\n      const videoDevices = await getCameraDevices();\r\n      setDevices(videoDevices);\r\n    }\r\n    init();\r\n\r\n    return () => {\r\n      stopCamera();\r\n      if (clickTimeoutRef.current) clearTimeout(clickTimeoutRef.current);\r\n      if (floatingContainerRef.current) {\r\n        floatingContainerRef.current.removeEventListener('mousedown', onMouseDown);\r\n        floatingContainerRef.current.removeEventListener('touchstart', onTouchStart);\r\n      }\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (video && stream) {\r\n      video.srcObject = stream;\r\n      const playPromise = video.play();\r\n      if (playPromise !== undefined) {\r\n        playPromise.catch((e) => {\r\n          console.warn('video.play()失败:', e);\r\n        });\r\n      }\r\n    } else if (video) {\r\n      video.srcObject = null;\r\n    }\r\n  }, [stream]);\r\n\r\n  const isDraggingRef = useRef(false);\r\n  const offsetXRef = useRef(0);\r\n  const offsetYRef = useRef(0);\r\n\r\n  const onMouseDown = (e) => {\r\n    if (!floatingContainerRef.current) return;\r\n    isDraggingRef.current = true;\r\n    offsetXRef.current = e.clientX - floatingContainerRef.current.offsetLeft;\r\n    offsetYRef.current = e.clientY - floatingContainerRef.current.offsetTop;\r\n    floatingContainerRef.current.style.cursor = 'grabbing';\r\n    e.preventDefault();\r\n  };\r\n  const onMouseMove = (e) => {\r\n    if (isDraggingRef.current && floatingContainerRef.current) {\r\n      let newLeft = e.clientX - offsetXRef.current;\r\n      let newTop = e.clientY - offsetYRef.current;\r\n\r\n      const container = floatingContainerRef.current;\r\n      const maxLeft = window.innerWidth - container.offsetWidth;\r\n      const maxTop = window.innerHeight - container.offsetHeight;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      container.style.left = newLeft + 'px';\r\n      container.style.top = newTop + 'px';\r\n    }\r\n  };\r\n  const onMouseUp = () => {\r\n    if (floatingContainerRef.current) {\r\n      isDraggingRef.current = false;\r\n      floatingContainerRef.current.style.cursor = 'grab';\r\n\r\n      const container = floatingContainerRef.current;\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: container.offsetLeft, top: container.offsetTop })\r\n      );\r\n    }\r\n  };\r\n  const onTouchStart = (e) => {\r\n    if (!floatingContainerRef.current || e.touches.length === 0) return;\r\n    isDraggingRef.current = true;\r\n    const touch = e.touches[0];\r\n    offsetXRef.current = touch.clientX - floatingContainerRef.current.offsetLeft;\r\n    offsetYRef.current = touch.clientY - floatingContainerRef.current.offsetTop;\r\n    floatingContainerRef.current.style.cursor = 'grabbing';\r\n  };\r\n  const onTouchMove = (e) => {\r\n    if (isDraggingRef.current && floatingContainerRef.current && e.touches.length > 0) {\r\n      const touch = e.touches[0];\r\n      let newLeft = touch.clientX - offsetXRef.current;\r\n      let newTop = touch.clientY - offsetYRef.current;\r\n\r\n      const container = floatingContainerRef.current;\r\n      const maxLeft = window.innerWidth - container.offsetWidth;\r\n      const maxTop = window.innerHeight - container.offsetHeight;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      container.style.left = newLeft + 'px';\r\n      container.style.top = newTop + 'px';\r\n\r\n      e.preventDefault();\r\n    }\r\n  };\r\n  const onTouchEnd = () => {\r\n    if (floatingContainerRef.current) {\r\n      isDraggingRef.current = false;\r\n      floatingContainerRef.current.style.cursor = 'grab';\r\n\r\n      const container = floatingContainerRef.current;\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: container.offsetLeft, top: container.offsetTop })\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!floatingContainerRef.current) return;\r\n    const container = floatingContainerRef.current;\r\n\r\n    const savedPosStr = localStorage.getItem(storageKey);\r\n    let left = 10;\r\n    let top = 10;\r\n    if (savedPosStr) {\r\n      try {\r\n        const pos = JSON.parse(savedPosStr);\r\n        if (\r\n          typeof pos.left === 'number' &&\r\n          typeof pos.top === 'number' &&\r\n          pos.left >= 0 &&\r\n          pos.top >= 0\r\n        ) {\r\n          left = pos.left;\r\n          top = pos.top;\r\n        }\r\n      } catch {\r\n        // ignore\r\n      }\r\n    }\r\n\r\n    container.style.position = 'fixed';\r\n    container.style.left = left + 'px';\r\n    container.style.top = top + 'px';\r\n    container.style.cursor = 'grab';\r\n    container.style.zIndex = '10000';\r\n    container.style.width = '160px';\r\n\r\n    container.addEventListener('mousedown', onMouseDown);\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n\r\n    container.addEventListener('touchstart', onTouchStart);\r\n    document.addEventListener('touchmove', onTouchMove);\r\n    document.addEventListener('touchend', onTouchEnd);\r\n\r\n    return () => {\r\n      container.removeEventListener('mousedown', onMouseDown);\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n\r\n      container.removeEventListener('touchstart', onTouchStart);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        :root {\r\n          --camera-size: 120px;        /* 摄像头视频和容器大小 */\r\n          --blur-ring-offset: 5px;    /* 磨砂环相对容器的偏移 */\r\n          --blur-ring-size: 130px;     /* 磨砂环大小，等于 camera-size + 2 * blur-ring-offset */\r\n        }\r\n        body {\r\n          background: linear-gradient(135deg, #4e54c8 0%, #8f94fb 100%);\r\n          height: 100vh;\r\n          margin: 0;\r\n        }\r\n        #video-wrapper {\r\n          width: var(--camera-size);\r\n          height: var(--camera-size);\r\n          border-radius: 50%;\r\n          position: relative;\r\n          background-color: transparent;\r\n          box-shadow: 0 0 15px rgba(0, 0, 0, 0.25);\r\n          overflow: visible;\r\n          user-select: none;\r\n          cursor: default;\r\n        }\r\n        #video-wrapper::before {\r\n          content: \"\";\r\n          position: absolute;\r\n          top: calc(var(--blur-ring-offset) * -1);\r\n          left: calc(var(--blur-ring-offset) * -1);\r\n          width: var(--blur-ring-size);\r\n          height: var(--blur-ring-size);\r\n          border-radius: 50%;\r\n          background: rgba(255 255 255 / 0.15);\r\n          backdrop-filter: blur(15px);\r\n          -webkit-backdrop-filter: blur(15px);\r\n          pointer-events: none;\r\n          z-index: 1;\r\n        }\r\n        #video {\r\n          width: var(--camera-size);\r\n          height: var(--camera-size);\r\n          border-radius: 50%;\r\n          object-fit: cover;\r\n          position: relative;\r\n          z-index: 2;\r\n          background: transparent;\r\n          user-select: none;\r\n          pointer-events: none;\r\n          display: block;\r\n        }\r\n        #floating-container {\r\n          user-select: none;\r\n          background: transparent;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 4px;\r\n          box-sizing: border-box;\r\n        }\r\n        #toggle-switch-camera {\r\n          cursor: pointer;\r\n          width: 46px;\r\n          height: 46px;\r\n          border-radius: 50%;\r\n          border: 1px solid #ffffff;\r\n          background-color: transparent;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          transition: background-color 0.3s, border-color 0.3s;\r\n        }\r\n        #toggle-switch-camera:hover {\r\n          background-color: rgba(0, 229, 255, 0.15);\r\n          border-color: #00e5ff;\r\n        }\r\n        #toggle-switch-camera img {\r\n          width: 45px;\r\n          height: 45px;\r\n          pointer-events: none;\r\n          user-select: none;\r\n        }\r\n      `}</style>\r\n\r\n\r\n\r\n      <div id=\"floating-container\" ref={floatingContainerRef}>\r\n        {isCameraOn && (\r\n          <div id=\"video-wrapper\">\r\n            <video\r\n              id=\"video\"\r\n              ref={videoRef}\r\n              autoPlay\r\n              playsInline\r\n              muted\r\n              onDragStart={(e) => e.preventDefault()}\r\n            />\r\n          </div>\r\n        )}\r\n        <button\r\n          id=\"toggle-switch-camera\"\r\n          type=\"button\"\r\n          aria-label={isCameraOn ? '切换摄像头' : '打开摄像头'}\r\n          onClick={handleButtonClick}\r\n          onDoubleClick={handleButtonDoubleClick}\r\n          title={isCameraOn ? '单击切换摄像头，双击关闭摄像头' : '双击打开摄像头'}\r\n        >\r\n          <img src={cameraSwitchIcon} alt=\"切换摄像头\" draggable={false} />\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}