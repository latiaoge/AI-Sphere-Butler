{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useRef } from 'react';\n\n// 简单拖拽 Hook，绑定 ref 的 DOM 元素可拖动\nexport function useDraggable() {\n  _s();\n  const dragRef = useRef(null);\n  useEffect(() => {\n    const el = dragRef.current;\n    if (!el) return;\n    let pos = {\n      left: 0,\n      top: 0,\n      x: 0,\n      y: 0\n    };\n\n    // 鼠标按下，开始拖拽\n    function mouseDown(e) {\n      e.preventDefault(); // 阻止文本选中等默认行为\n      pos = {\n        left: el.offsetLeft,\n        top: el.offsetTop,\n        x: e.clientX,\n        y: e.clientY\n      };\n      document.addEventListener('mousemove', mouseMove);\n      document.addEventListener('mouseup', mouseUp);\n    }\n\n    // 鼠标移动，更新元素位置\n    function mouseMove(e) {\n      const dx = e.clientX - pos.x;\n      const dy = e.clientY - pos.y;\n      el.style.left = `${pos.left + dx}px`;\n      el.style.top = `${pos.top + dy}px`;\n    }\n\n    // 鼠标松开，停止拖拽\n    function mouseUp() {\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    }\n\n    // 初始化样式：绝对定位和移动光标\n    el.style.position = el.style.position || 'absolute'; // 仅当没设置时赋值，避免覆盖\n    el.style.cursor = 'move';\n\n    // 绑定 mousedown 事件\n    el.addEventListener('mousedown', mouseDown);\n\n    // 清理函数，组件卸载或依赖变更时移除事件监听\n    return () => {\n      el.removeEventListener('mousedown', mouseDown);\n      // 同时保证 document 上监听也被移除，防止异常\n      document.removeEventListener('mousemove', mouseMove);\n      document.removeEventListener('mouseup', mouseUp);\n    };\n  }, []);\n  return dragRef;\n}\n_s(useDraggable, \"1NdP25P9hTNgDBwe6aq6Hulw/wY=\");","map":{"version":3,"names":["useEffect","useRef","useDraggable","_s","dragRef","el","current","pos","left","top","x","y","mouseDown","e","preventDefault","offsetLeft","offsetTop","clientX","clientY","document","addEventListener","mouseMove","mouseUp","dx","dy","style","removeEventListener","position","cursor"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/hooks/useDraggable.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\n\r\n// 简单拖拽 Hook，绑定 ref 的 DOM 元素可拖动\r\nexport function useDraggable() {\r\n  const dragRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const el = dragRef.current;\r\n    if (!el) return;\r\n\r\n    let pos = { left: 0, top: 0, x: 0, y: 0 };\r\n\r\n    // 鼠标按下，开始拖拽\r\n    function mouseDown(e) {\r\n      e.preventDefault(); // 阻止文本选中等默认行为\r\n      pos = {\r\n        left: el.offsetLeft,\r\n        top: el.offsetTop,\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      };\r\n      document.addEventListener('mousemove', mouseMove);\r\n      document.addEventListener('mouseup', mouseUp);\r\n    }\r\n\r\n    // 鼠标移动，更新元素位置\r\n    function mouseMove(e) {\r\n      const dx = e.clientX - pos.x;\r\n      const dy = e.clientY - pos.y;\r\n      el.style.left = `${pos.left + dx}px`;\r\n      el.style.top = `${pos.top + dy}px`;\r\n    }\r\n\r\n    // 鼠标松开，停止拖拽\r\n    function mouseUp() {\r\n      document.removeEventListener('mousemove', mouseMove);\r\n      document.removeEventListener('mouseup', mouseUp);\r\n    }\r\n\r\n    // 初始化样式：绝对定位和移动光标\r\n    el.style.position = el.style.position || 'absolute'; // 仅当没设置时赋值，避免覆盖\r\n    el.style.cursor = 'move';\r\n\r\n    // 绑定 mousedown 事件\r\n    el.addEventListener('mousedown', mouseDown);\r\n\r\n    // 清理函数，组件卸载或依赖变更时移除事件监听\r\n    return () => {\r\n      el.removeEventListener('mousedown', mouseDown);\r\n      // 同时保证 document 上监听也被移除，防止异常\r\n      document.removeEventListener('mousemove', mouseMove);\r\n      document.removeEventListener('mouseup', mouseUp);\r\n    };\r\n  }, []);\r\n\r\n  return dragRef;\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,MAAM,QAAQ,OAAO;;AAEzC;AACA,OAAO,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EAC7B,MAAMC,OAAO,GAAGH,MAAM,CAAC,IAAI,CAAC;EAE5BD,SAAS,CAAC,MAAM;IACd,MAAMK,EAAE,GAAGD,OAAO,CAACE,OAAO;IAC1B,IAAI,CAACD,EAAE,EAAE;IAET,IAAIE,GAAG,GAAG;MAAEC,IAAI,EAAE,CAAC;MAAEC,GAAG,EAAE,CAAC;MAAEC,CAAC,EAAE,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;;IAEzC;IACA,SAASC,SAASA,CAACC,CAAC,EAAE;MACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAC,CAAC;MACpBP,GAAG,GAAG;QACJC,IAAI,EAAEH,EAAE,CAACU,UAAU;QACnBN,GAAG,EAAEJ,EAAE,CAACW,SAAS;QACjBN,CAAC,EAAEG,CAAC,CAACI,OAAO;QACZN,CAAC,EAAEE,CAAC,CAACK;MACP,CAAC;MACDC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEC,SAAS,CAAC;MACjDF,QAAQ,CAACC,gBAAgB,CAAC,SAAS,EAAEE,OAAO,CAAC;IAC/C;;IAEA;IACA,SAASD,SAASA,CAACR,CAAC,EAAE;MACpB,MAAMU,EAAE,GAAGV,CAAC,CAACI,OAAO,GAAGV,GAAG,CAACG,CAAC;MAC5B,MAAMc,EAAE,GAAGX,CAAC,CAACK,OAAO,GAAGX,GAAG,CAACI,CAAC;MAC5BN,EAAE,CAACoB,KAAK,CAACjB,IAAI,GAAG,GAAGD,GAAG,CAACC,IAAI,GAAGe,EAAE,IAAI;MACpClB,EAAE,CAACoB,KAAK,CAAChB,GAAG,GAAG,GAAGF,GAAG,CAACE,GAAG,GAAGe,EAAE,IAAI;IACpC;;IAEA;IACA,SAASF,OAAOA,CAAA,EAAG;MACjBH,QAAQ,CAACO,mBAAmB,CAAC,WAAW,EAAEL,SAAS,CAAC;MACpDF,QAAQ,CAACO,mBAAmB,CAAC,SAAS,EAAEJ,OAAO,CAAC;IAClD;;IAEA;IACAjB,EAAE,CAACoB,KAAK,CAACE,QAAQ,GAAGtB,EAAE,CAACoB,KAAK,CAACE,QAAQ,IAAI,UAAU,CAAC,CAAC;IACrDtB,EAAE,CAACoB,KAAK,CAACG,MAAM,GAAG,MAAM;;IAExB;IACAvB,EAAE,CAACe,gBAAgB,CAAC,WAAW,EAAER,SAAS,CAAC;;IAE3C;IACA,OAAO,MAAM;MACXP,EAAE,CAACqB,mBAAmB,CAAC,WAAW,EAAEd,SAAS,CAAC;MAC9C;MACAO,QAAQ,CAACO,mBAAmB,CAAC,WAAW,EAAEL,SAAS,CAAC;MACpDF,QAAQ,CAACO,mBAAmB,CAAC,SAAS,EAAEJ,OAAO,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOlB,OAAO;AAChB;AAACD,EAAA,CArDeD,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}