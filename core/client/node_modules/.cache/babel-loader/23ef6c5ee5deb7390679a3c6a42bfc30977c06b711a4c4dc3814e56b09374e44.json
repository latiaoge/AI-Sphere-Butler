{"ast":null,"code":"import React,{useState,useRef,useEffect}from'react';import{useRecorder}from'../hooks/useRecorder';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function AudioTranscriber(){// 录音状态\nconst[isRecording,setIsRecording]=useState(false);// 转写文本内容\nconst[transcription,setTranscription]=useState('');// 语言参数，默认 auto\nconst[lang,setLang]=useState('auto');// 是否开启声纹识别\nconst[speakerVerification,setSpeakerVerification]=useState(false);// 自定义录音 Hook，管理录音功能\nconst recorder=useRecorder();// WebSocket 实例引用\nconst wsRef=useRef(null);// 定时发送音频的定时器引用\nconst intervalRef=useRef(null);// 拖拽相关引用，仅用于麦克风按钮\nconst micButtonRef=useRef(null);const isDraggingRef=useRef(false);const offsetXRef=useRef(0);const offsetYRef=useRef(0);// localStorage 保存位置的 key\nconst storageKey='audioTranscriberMicButtonPosition';/**\r\n   * 发送文本消息到 LLM 服务\r\n   * @param {string} text - 要发送的文本\r\n   */const sendTextMessage=async text=>{if(!text.trim())return;try{const response=await fetch('https://192.168.1.70:6010/qwener',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({text})});if(!response.ok){throw new Error('网络响应失败，状态码: '+response.status);}const data=await response.json();console.log('文本发送成功，服务器返回：',data);}catch(error){console.error('文本发送失败：',error);}};// 组件卸载时清理资源\nuseEffect(()=>{return()=>{stopRecording();};},[]);/**\r\n   * 启动录音并建立 WebSocket 连接\r\n   */function startRecording(){if(isRecording)return;// 先请求麦克风权限\nnavigator.mediaDevices.getUserMedia({audio:true}).then(()=>{// 根据语言和声纹识别参数拼接 WebSocket URL 查询参数\nlet params=[];if(lang)params.push(\"lang=\".concat(encodeURIComponent(lang)));if(speakerVerification)params.push('sv=1');// 声纹识别参数，勾选时添加\nconst queryStr=params.length>0?\"?\".concat(params.join('&')):'';// 请根据实际服务器地址修改此处 ws 地址和端口\nconst wsUrl=\"ws://192.168.168.77:6007/ws/transcribe\".concat(queryStr);const ws=new WebSocket(wsUrl);ws.binaryType='arraybuffer';ws.onopen=()=>{console.log('WebSocket 已连接');// 启动录音\nrecorder.start().catch(e=>{alert('启动录音失败: '+e.message);ws.close();});// 定时发送音频数据（每 500ms 发送一次）\nintervalRef.current=setInterval(()=>{if(ws.readyState===1){const audioBlob=recorder.getAudioBlob();if(audioBlob.size>0){console.log('发送音频数据，大小：',audioBlob.size);ws.send(audioBlob);recorder.clearBuffer();}}},500);};ws.onmessage=evt=>{try{const resJson=JSON.parse(evt.data);if(resJson.code===0){// 收到转写正确结果\nconst recognizedText=resJson.data||'无识别结果';// 更新转写文本展示\nsetTranscription(prev=>prev?prev+'\\n'+recognizedText:recognizedText);// 识别到有效文本时，发送给后端 LLM 服务\nif(recognizedText&&recognizedText.trim()&&recognizedText!=='无识别结果'){sendTextMessage(recognizedText);}}else{// 其他情况输出原始数据\nsetTranscription(prev=>prev?prev+'\\n'+evt.data:evt.data);}}catch(e){console.error('解析转写消息失败',e);setTranscription(prev=>prev?prev+'\\n'+evt.data:evt.data);}};ws.onclose=()=>{console.log('WebSocket 已关闭');stopRecording();};ws.onerror=e=>{console.error('WebSocket 错误',e);};wsRef.current=ws;setIsRecording(true);}).catch(error=>{alert('请求麦克风权限失败: '+error.message);});}/**\r\n   * 停止录音并关闭 WebSocket 连接\r\n   */function stopRecording(){if(!isRecording)return;if(wsRef.current){wsRef.current.close();wsRef.current=null;}recorder.stop();if(intervalRef.current){clearInterval(intervalRef.current);intervalRef.current=null;}setIsRecording(false);}// 拖拽事件处理，仅麦克风按钮\nuseEffect(()=>{if(!micButtonRef.current)return;const button=micButtonRef.current;// 读取并恢复按钮位置\nconst savedPosStr=localStorage.getItem(storageKey);let left=26;let top=26;if(savedPosStr){try{const pos=JSON.parse(savedPosStr);if(typeof pos.left==='number'&&typeof pos.top==='number'&&pos.left>=0&&pos.top>=0){left=pos.left;top=pos.top;}}catch(_unused){// 解析失败忽略，使用默认\n}}button.style.position='fixed';button.style.left=\"\".concat(left,\"px\");button.style.top=\"\".concat(top,\"px\");button.style.zIndex='10000';button.style.cursor='grab';// 拖拽相关变量\nisDraggingRef.current=false;offsetXRef.current=0;offsetYRef.current=0;const onMouseDown=e=>{if(e.button!==0)return;// 仅左键拖拽\nisDraggingRef.current=true;offsetXRef.current=e.clientX-button.offsetLeft;offsetYRef.current=e.clientY-button.offsetTop;button.style.cursor='grabbing';e.preventDefault();};const onMouseMove=e=>{if(!isDraggingRef.current)return;let newLeft=e.clientX-offsetXRef.current;let newTop=e.clientY-offsetYRef.current;const maxLeft=window.innerWidth-button.offsetWidth;const maxTop=window.innerHeight-button.offsetHeight;newLeft=Math.min(Math.max(0,newLeft),maxLeft);newTop=Math.min(Math.max(0,newTop),maxTop);button.style.left=\"\".concat(newLeft,\"px\");button.style.top=\"\".concat(newTop,\"px\");};const onMouseUp=()=>{if(!isDraggingRef.current)return;isDraggingRef.current=false;button.style.cursor='grab';// 保存位置\nlocalStorage.setItem(storageKey,JSON.stringify({left:button.offsetLeft,top:button.offsetTop}));};const onTouchStart=e=>{if(e.touches.length===0)return;isDraggingRef.current=true;const touch=e.touches[0];offsetXRef.current=touch.clientX-button.offsetLeft;offsetYRef.current=touch.clientY-button.offsetTop;button.style.cursor='grabbing';};const onTouchMove=e=>{if(!isDraggingRef.current||e.touches.length===0)return;const touch=e.touches[0];let newLeft=touch.clientX-offsetXRef.current;let newTop=touch.clientY-offsetYRef.current;const maxLeft=window.innerWidth-button.offsetWidth;const maxTop=window.innerHeight-button.offsetHeight;newLeft=Math.min(Math.max(0,newLeft),maxLeft);newTop=Math.min(Math.max(0,newTop),maxTop);button.style.left=\"\".concat(newLeft,\"px\");button.style.top=\"\".concat(newTop,\"px\");e.preventDefault();};const onTouchEnd=()=>{if(!isDraggingRef.current)return;isDraggingRef.current=false;button.style.cursor='grab';// 保存位置\nlocalStorage.setItem(storageKey,JSON.stringify({left:button.offsetLeft,top:button.offsetTop}));};button.addEventListener('mousedown',onMouseDown);document.addEventListener('mousemove',onMouseMove);document.addEventListener('mouseup',onMouseUp);button.addEventListener('touchstart',onTouchStart,{passive:false});document.addEventListener('touchmove',onTouchMove,{passive:false});document.addEventListener('touchend',onTouchEnd);return()=>{button.removeEventListener('mousedown',onMouseDown);document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);button.removeEventListener('touchstart',onTouchStart);document.removeEventListener('touchmove',onTouchMove);document.removeEventListener('touchend',onTouchEnd);};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"style\",{children:\"\\n        /* \\u9EA6\\u514B\\u98CE\\u6309\\u94AE\\u6837\\u5F0F */\\n        #mic-button-wrapper {\\n          position: fixed;\\n          z-index: 10000;\\n          user-select: none;\\n          pointer-events: auto;\\n          display: flex;\\n          flex-direction: column;\\n          align-items: center;\\n          gap: 4px;\\n          /* \\u4F4D\\u7F6E\\u7531JS\\u76F4\\u63A5\\u8BBE\\u7F6Emic-button-wrapper\\u5B9A\\u4F4D */\\n        }\\n\\n        #listening-text {\\n          font-size: 12px;\\n          color: rgba(128, 128, 128, 0.7);\\n          user-select: none;\\n          pointer-events: none;\\n          font-weight: 500;\\n          opacity: 0;\\n          transition: opacity 0.3s ease;\\n          height: 16px;\\n          line-height: 16px;\\n        }\\n        #listening-text.visible {\\n          opacity: 1;\\n        }\\n\\n        #mic-button {\\n          background: none;\\n          border: none;\\n          padding: 0;\\n          outline: none;\\n          display: flex;\\n          align-items: center;\\n          justify-content: center;\\n          filter: none;\\n          transition: filter 0.3s ease;\\n\\n          width: 68px;\\n          height: 68px;\\n          cursor: grab;\\n          /* \\u4E0D\\u518D\\u8BBE\\u7F6Efixed\\u5B9A\\u4F4D\\uFF0C\\u7531wrapper\\u5B9A\\u4F4D */\\n        }\\n        #mic-button.recording {\\n          filter: drop-shadow(0 0 5px red);\\n        }\\n        #mic-button img {\\n          width: 48px;\\n          height: 48px;\\n          user-select: none;\\n          pointer-events: none;\\n          -webkit-user-drag: none;\\n        }\\n\\n        /* \\u8BED\\u8A00\\u548C\\u58F0\\u7EB9\\u8BC6\\u522B\\u533A\\u57DF\\u6837\\u5F0F */\\n        #controls-container {\\n          max-width: 700px;\\n          margin: 20px auto 12px auto;\\n          font-family: Arial, sans-serif;\\n          color: white;\\n          display: flex;\\n          align-items: center;\\n          gap: 20px;\\n          user-select: none;\\n        }\\n        #controls-container label {\\n          font-size: 14px;\\n          user-select: none;\\n        }\\n        #langInput {\\n          padding: 4px;\\n          font-size: 14px;\\n          width: 120px;\\n          background-color: #333;\\n          border: 1px solid #666;\\n          border-radius: 3px;\\n          color: white;\\n          user-select: text;\\n        }\\n        #speakerVerificationLabel {\\n          display: flex;\\n          align-items: center;\\n          font-size: 14px;\\n          user-select: none;\\n        }\\n        #speakerVerificationLabel input {\\n          margin-right: 6px;\\n        }\\n      \"}),/*#__PURE__*/_jsxs(\"div\",{id:\"mic-button-wrapper\",ref:micButtonRef,style:{left:26,top:26,position:'fixed'},children:[/*#__PURE__*/_jsx(\"div\",{id:\"listening-text\",className:isRecording?'visible':'',\"aria-live\":\"polite\",role:\"status\",children:\"\\u8046\\u542C\\u4E2D...\"}),/*#__PURE__*/_jsx(\"button\",{id:\"mic-button\",className:isRecording?'recording':'',onClick:()=>isRecording?stopRecording():startRecording(),\"aria-label\":isRecording?'停止录音':'开始录音',title:isRecording?'点击停止录音':'点击开始录音',type:\"button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/core/client/ai-butler/image/mic-icon.png\",alt:\"\\u9EA6\\u514B\\u98CE\",draggable:false})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"controls-container\",\"aria-label\":\"\\u8BED\\u97F3\\u8BC6\\u522B\\u8BBE\\u7F6E\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"langInput\",children:\"\\u8BED\\u8A00\\uFF1A\"}),/*#__PURE__*/_jsx(\"input\",{id:\"langInput\",type:\"text\",value:lang,onChange:e=>setLang(e.target.value),disabled:isRecording,placeholder:\"auto\",autoComplete:\"off\"}),/*#__PURE__*/_jsxs(\"label\",{id:\"speakerVerificationLabel\",htmlFor:\"speakerVerificationCheckbox\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"speakerVerificationCheckbox\",type:\"checkbox\",checked:speakerVerification,disabled:isRecording,onChange:e=>setSpeakerVerification(e.target.checked)}),\"\\u58F0\\u7EB9\\u8BC6\\u522B\"]})]}),/*#__PURE__*/_jsx(\"div\",{id:\"transcriptionResult\",style:{maxWidth:700,margin:'12px auto 20px auto',fontFamily:'Arial, sans-serif',whiteSpace:'pre-wrap',backgroundColor:'transparent',padding:10,border:'1px solid transparent',borderRadius:5,minHeight:150,fontFamily:'monospace',fontSize:14,overflowY:'auto',maxHeight:300,userSelect:'text',color:transcription?'white':'rgba(255, 255, 255, 0.5)'},children:transcription||'识别文字展示区...'})]});}","map":{"version":3,"names":["React","useState","useRef","useEffect","useRecorder","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AudioTranscriber","isRecording","setIsRecording","transcription","setTranscription","lang","setLang","speakerVerification","setSpeakerVerification","recorder","wsRef","intervalRef","micButtonRef","isDraggingRef","offsetXRef","offsetYRef","storageKey","sendTextMessage","text","trim","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","data","json","console","log","error","stopRecording","startRecording","navigator","mediaDevices","getUserMedia","audio","then","params","push","concat","encodeURIComponent","queryStr","length","join","wsUrl","ws","WebSocket","binaryType","onopen","start","catch","e","alert","message","close","current","setInterval","readyState","audioBlob","getAudioBlob","size","send","clearBuffer","onmessage","evt","resJson","parse","code","recognizedText","prev","onclose","onerror","stop","clearInterval","button","savedPosStr","localStorage","getItem","left","top","pos","_unused","style","position","zIndex","cursor","onMouseDown","clientX","offsetLeft","clientY","offsetTop","preventDefault","onMouseMove","newLeft","newTop","maxLeft","window","innerWidth","offsetWidth","maxTop","innerHeight","offsetHeight","Math","min","max","onMouseUp","setItem","onTouchStart","touches","touch","onTouchMove","onTouchEnd","addEventListener","document","passive","removeEventListener","children","id","ref","className","role","onClick","title","type","src","alt","draggable","htmlFor","value","onChange","target","disabled","placeholder","autoComplete","checked","maxWidth","margin","fontFamily","whiteSpace","backgroundColor","padding","border","borderRadius","minHeight","fontSize","overflowY","maxHeight","userSelect","color"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/AudioTranscriber.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useRecorder } from '../hooks/useRecorder';\r\n\r\nexport default function AudioTranscriber() {\r\n  // 录音状态\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  // 转写文本内容\r\n  const [transcription, setTranscription] = useState('');\r\n  // 语言参数，默认 auto\r\n  const [lang, setLang] = useState('auto');\r\n  // 是否开启声纹识别\r\n  const [speakerVerification, setSpeakerVerification] = useState(false);\r\n\r\n  // 自定义录音 Hook，管理录音功能\r\n  const recorder = useRecorder();\r\n\r\n  // WebSocket 实例引用\r\n  const wsRef = useRef(null);\r\n  // 定时发送音频的定时器引用\r\n  const intervalRef = useRef(null);\r\n\r\n  // 拖拽相关引用，仅用于麦克风按钮\r\n  const micButtonRef = useRef(null);\r\n  const isDraggingRef = useRef(false);\r\n  const offsetXRef = useRef(0);\r\n  const offsetYRef = useRef(0);\r\n\r\n  // localStorage 保存位置的 key\r\n  const storageKey = 'audioTranscriberMicButtonPosition';\r\n\r\n  /**\r\n   * 发送文本消息到 LLM 服务\r\n   * @param {string} text - 要发送的文本\r\n   */\r\n  const sendTextMessage = async (text) => {\r\n    if (!text.trim()) return;\r\n\r\n    try {\r\n      const response = await fetch('https://192.168.1.70:6010/qwener', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ text }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('网络响应失败，状态码: ' + response.status);\r\n      }\r\n\r\n      const data = await response.json();\r\n      console.log('文本发送成功，服务器返回：', data);\r\n    } catch (error) {\r\n      console.error('文本发送失败：', error);\r\n    }\r\n  };\r\n\r\n  // 组件卸载时清理资源\r\n  useEffect(() => {\r\n    return () => {\r\n      stopRecording();\r\n    };\r\n  }, []);\r\n\r\n  /**\r\n   * 启动录音并建立 WebSocket 连接\r\n   */\r\n  function startRecording() {\r\n    if (isRecording) return;\r\n\r\n    // 先请求麦克风权限\r\n    navigator.mediaDevices.getUserMedia({ audio: true })\r\n      .then(() => {\r\n        // 根据语言和声纹识别参数拼接 WebSocket URL 查询参数\r\n        let params = [];\r\n        if (lang) params.push(`lang=${encodeURIComponent(lang)}`);\r\n        if (speakerVerification) params.push('sv=1'); // 声纹识别参数，勾选时添加\r\n        const queryStr = params.length > 0 ? `?${params.join('&')}` : '';\r\n\r\n        // 请根据实际服务器地址修改此处 ws 地址和端口\r\n        const wsUrl = `ws://192.168.168.77:6007/ws/transcribe${queryStr}`;\r\n        const ws = new WebSocket(wsUrl);\r\n        ws.binaryType = 'arraybuffer';\r\n\r\n        ws.onopen = () => {\r\n          console.log('WebSocket 已连接');\r\n\r\n          // 启动录音\r\n          recorder.start().catch((e) => {\r\n            alert('启动录音失败: ' + e.message);\r\n            ws.close();\r\n          });\r\n\r\n          // 定时发送音频数据（每 500ms 发送一次）\r\n          intervalRef.current = setInterval(() => {\r\n            if (ws.readyState === 1) {\r\n              const audioBlob = recorder.getAudioBlob();\r\n              if (audioBlob.size > 0) {\r\n                console.log('发送音频数据，大小：', audioBlob.size);\r\n                ws.send(audioBlob);\r\n                recorder.clearBuffer();\r\n              }\r\n            }\r\n          }, 500);\r\n        };\r\n\r\n        ws.onmessage = (evt) => {\r\n          try {\r\n            const resJson = JSON.parse(evt.data);\r\n            if (resJson.code === 0) {\r\n              // 收到转写正确结果\r\n              const recognizedText = resJson.data || '无识别结果';\r\n\r\n              // 更新转写文本展示\r\n              setTranscription((prev) => (prev ? prev + '\\n' + recognizedText : recognizedText));\r\n\r\n              // 识别到有效文本时，发送给后端 LLM 服务\r\n              if (recognizedText && recognizedText.trim() && recognizedText !== '无识别结果') {\r\n                sendTextMessage(recognizedText);\r\n              }\r\n            } else {\r\n              // 其他情况输出原始数据\r\n              setTranscription((prev) => (prev ? prev + '\\n' + evt.data : evt.data));\r\n            }\r\n          } catch (e) {\r\n            console.error('解析转写消息失败', e);\r\n            setTranscription((prev) => (prev ? prev + '\\n' + evt.data : evt.data));\r\n          }\r\n        };\r\n\r\n        ws.onclose = () => {\r\n          console.log('WebSocket 已关闭');\r\n          stopRecording();\r\n        };\r\n\r\n        ws.onerror = (e) => {\r\n          console.error('WebSocket 错误', e);\r\n        };\r\n\r\n        wsRef.current = ws;\r\n        setIsRecording(true);\r\n      })\r\n      .catch((error) => {\r\n        alert('请求麦克风权限失败: ' + error.message);\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 停止录音并关闭 WebSocket 连接\r\n   */\r\n  function stopRecording() {\r\n    if (!isRecording) return;\r\n\r\n    if (wsRef.current) {\r\n      wsRef.current.close();\r\n      wsRef.current = null;\r\n    }\r\n    recorder.stop();\r\n\r\n    if (intervalRef.current) {\r\n      clearInterval(intervalRef.current);\r\n      intervalRef.current = null;\r\n    }\r\n\r\n    setIsRecording(false);\r\n  }\r\n\r\n  // 拖拽事件处理，仅麦克风按钮\r\n  useEffect(() => {\r\n    if (!micButtonRef.current) return;\r\n    const button = micButtonRef.current;\r\n\r\n    // 读取并恢复按钮位置\r\n    const savedPosStr = localStorage.getItem(storageKey);\r\n    let left = 26;\r\n    let top = 26;\r\n    if (savedPosStr) {\r\n      try {\r\n        const pos = JSON.parse(savedPosStr);\r\n        if (\r\n          typeof pos.left === 'number' &&\r\n          typeof pos.top === 'number' &&\r\n          pos.left >= 0 &&\r\n          pos.top >= 0\r\n        ) {\r\n          left = pos.left;\r\n          top = pos.top;\r\n        }\r\n      } catch {\r\n        // 解析失败忽略，使用默认\r\n      }\r\n    }\r\n\r\n    button.style.position = 'fixed';\r\n    button.style.left = `${left}px`;\r\n    button.style.top = `${top}px`;\r\n    button.style.zIndex = '10000';\r\n    button.style.cursor = 'grab';\r\n\r\n    // 拖拽相关变量\r\n    isDraggingRef.current = false;\r\n    offsetXRef.current = 0;\r\n    offsetYRef.current = 0;\r\n\r\n    const onMouseDown = (e) => {\r\n      if (e.button !== 0) return; // 仅左键拖拽\r\n      isDraggingRef.current = true;\r\n      offsetXRef.current = e.clientX - button.offsetLeft;\r\n      offsetYRef.current = e.clientY - button.offsetTop;\r\n      button.style.cursor = 'grabbing';\r\n      e.preventDefault();\r\n    };\r\n    const onMouseMove = (e) => {\r\n      if (!isDraggingRef.current) return;\r\n      let newLeft = e.clientX - offsetXRef.current;\r\n      let newTop = e.clientY - offsetYRef.current;\r\n\r\n      const maxLeft = window.innerWidth - button.offsetWidth;\r\n      const maxTop = window.innerHeight - button.offsetHeight;\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      button.style.left = `${newLeft}px`;\r\n      button.style.top = `${newTop}px`;\r\n    };\r\n    const onMouseUp = () => {\r\n      if (!isDraggingRef.current) return;\r\n      isDraggingRef.current = false;\r\n      button.style.cursor = 'grab';\r\n\r\n      // 保存位置\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: button.offsetLeft, top: button.offsetTop })\r\n      );\r\n    };\r\n\r\n    const onTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      isDraggingRef.current = true;\r\n      const touch = e.touches[0];\r\n      offsetXRef.current = touch.clientX - button.offsetLeft;\r\n      offsetYRef.current = touch.clientY - button.offsetTop;\r\n      button.style.cursor = 'grabbing';\r\n    };\r\n    const onTouchMove = (e) => {\r\n      if (!isDraggingRef.current || e.touches.length === 0) return;\r\n      const touch = e.touches[0];\r\n      let newLeft = touch.clientX - offsetXRef.current;\r\n      let newTop = touch.clientY - offsetYRef.current;\r\n\r\n      const maxLeft = window.innerWidth - button.offsetWidth;\r\n      const maxTop = window.innerHeight - button.offsetHeight;\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      button.style.left = `${newLeft}px`;\r\n      button.style.top = `${newTop}px`;\r\n\r\n      e.preventDefault();\r\n    };\r\n    const onTouchEnd = () => {\r\n      if (!isDraggingRef.current) return;\r\n      isDraggingRef.current = false;\r\n      button.style.cursor = 'grab';\r\n\r\n      // 保存位置\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: button.offsetLeft, top: button.offsetTop })\r\n      );\r\n    };\r\n\r\n    button.addEventListener('mousedown', onMouseDown);\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n\r\n    button.addEventListener('touchstart', onTouchStart, { passive: false });\r\n    document.addEventListener('touchmove', onTouchMove, { passive: false });\r\n    document.addEventListener('touchend', onTouchEnd);\r\n\r\n    return () => {\r\n      button.removeEventListener('mousedown', onMouseDown);\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n\r\n      button.removeEventListener('touchstart', onTouchStart);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        /* 麦克风按钮样式 */\r\n        #mic-button-wrapper {\r\n          position: fixed;\r\n          z-index: 10000;\r\n          user-select: none;\r\n          pointer-events: auto;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          gap: 4px;\r\n          /* 位置由JS直接设置mic-button-wrapper定位 */\r\n        }\r\n\r\n        #listening-text {\r\n          font-size: 12px;\r\n          color: rgba(128, 128, 128, 0.7);\r\n          user-select: none;\r\n          pointer-events: none;\r\n          font-weight: 500;\r\n          opacity: 0;\r\n          transition: opacity 0.3s ease;\r\n          height: 16px;\r\n          line-height: 16px;\r\n        }\r\n        #listening-text.visible {\r\n          opacity: 1;\r\n        }\r\n\r\n        #mic-button {\r\n          background: none;\r\n          border: none;\r\n          padding: 0;\r\n          outline: none;\r\n          display: flex;\r\n          align-items: center;\r\n          justify-content: center;\r\n          filter: none;\r\n          transition: filter 0.3s ease;\r\n\r\n          width: 68px;\r\n          height: 68px;\r\n          cursor: grab;\r\n          /* 不再设置fixed定位，由wrapper定位 */\r\n        }\r\n        #mic-button.recording {\r\n          filter: drop-shadow(0 0 5px red);\r\n        }\r\n        #mic-button img {\r\n          width: 48px;\r\n          height: 48px;\r\n          user-select: none;\r\n          pointer-events: none;\r\n          -webkit-user-drag: none;\r\n        }\r\n\r\n        /* 语言和声纹识别区域样式 */\r\n        #controls-container {\r\n          max-width: 700px;\r\n          margin: 20px auto 12px auto;\r\n          font-family: Arial, sans-serif;\r\n          color: white;\r\n          display: flex;\r\n          align-items: center;\r\n          gap: 20px;\r\n          user-select: none;\r\n        }\r\n        #controls-container label {\r\n          font-size: 14px;\r\n          user-select: none;\r\n        }\r\n        #langInput {\r\n          padding: 4px;\r\n          font-size: 14px;\r\n          width: 120px;\r\n          background-color: #333;\r\n          border: 1px solid #666;\r\n          border-radius: 3px;\r\n          color: white;\r\n          user-select: text;\r\n        }\r\n        #speakerVerificationLabel {\r\n          display: flex;\r\n          align-items: center;\r\n          font-size: 14px;\r\n          user-select: none;\r\n        }\r\n        #speakerVerificationLabel input {\r\n          margin-right: 6px;\r\n        }\r\n      `}</style>\r\n\r\n      {/* 麦克风及“聆听中”容器，控制整体定位、拖拽 */}\r\n      <div\r\n        id=\"mic-button-wrapper\"\r\n        ref={micButtonRef}\r\n        style={{ left: 26, top: 26, position: 'fixed' }}\r\n      >\r\n        {/* 聆听中提示 */}\r\n        <div id=\"listening-text\" className={isRecording ? 'visible' : ''} aria-live=\"polite\" role=\"status\">\r\n          聆听中...\r\n        </div>\r\n\r\n        {/* 麦克风按钮 */}\r\n        <button\r\n          id=\"mic-button\"\r\n          className={isRecording ? 'recording' : ''}\r\n          onClick={() => (isRecording ? stopRecording() : startRecording())}\r\n          aria-label={isRecording ? '停止录音' : '开始录音'}\r\n          title={isRecording ? '点击停止录音' : '点击开始录音'}\r\n          type=\"button\"\r\n        >\r\n          <img\r\n            src=\"/core/client/ai-butler/image/mic-icon.png\"\r\n            alt=\"麦克风\"\r\n            draggable={false}\r\n          />\r\n        </button>\r\n      </div>\r\n\r\n      {/* 语言和声纹识别控制 */}\r\n      <div id=\"controls-container\" aria-label=\"语音识别设置\">\r\n        <label htmlFor=\"langInput\">语言：</label>\r\n        <input\r\n          id=\"langInput\"\r\n          type=\"text\"\r\n          value={lang}\r\n          onChange={(e) => setLang(e.target.value)}\r\n          disabled={isRecording}\r\n          placeholder=\"auto\"\r\n          autoComplete=\"off\"\r\n        />\r\n\r\n        <label id=\"speakerVerificationLabel\" htmlFor=\"speakerVerificationCheckbox\">\r\n          <input\r\n            id=\"speakerVerificationCheckbox\"\r\n            type=\"checkbox\"\r\n            checked={speakerVerification}\r\n            disabled={isRecording}\r\n            onChange={(e) => setSpeakerVerification(e.target.checked)}\r\n          />\r\n          声纹识别\r\n        </label>\r\n      </div>\r\n\r\n      {/* 转写结果展示 */}\r\n      <div\r\n        id=\"transcriptionResult\"\r\n        style={{\r\n          maxWidth: 700,\r\n          margin: '12px auto 20px auto',\r\n          fontFamily: 'Arial, sans-serif',\r\n          whiteSpace: 'pre-wrap',\r\n          backgroundColor: 'transparent',\r\n          padding: 10,\r\n          border: '1px solid transparent',\r\n          borderRadius: 5,\r\n          minHeight: 150,\r\n          fontFamily: 'monospace',\r\n          fontSize: 14,\r\n          overflowY: 'auto',\r\n          maxHeight: 300,\r\n          userSelect: 'text',\r\n          color: transcription ? 'white' : 'rgba(255, 255, 255, 0.5)',\r\n        }}\r\n      >\r\n        {transcription || '识别文字展示区...'}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}