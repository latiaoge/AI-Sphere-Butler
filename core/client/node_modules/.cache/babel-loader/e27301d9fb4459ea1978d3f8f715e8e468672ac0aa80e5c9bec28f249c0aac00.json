{"ast":null,"code":"var _jsxFileName = \"D:\\\\XM\\\\AI-Sphere-Butler\\\\core\\\\client\\\\src\\\\components\\\\Settings.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// components/Settings.jsx\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst menuItems = [{\n  key: 'home',\n  label: '主页'\n}, {\n  key: 'butler',\n  label: '管家'\n}, {\n  key: 'car',\n  label: '车'\n}, {\n  key: 'homeassistant',\n  label: 'HA'\n}, {\n  key: 'ops',\n  label: '运维'\n}, {\n  key: 'settings',\n  label: '设置'\n}];\nconst wallpaperTypes = [{\n  value: 'image',\n  label: '静态图片'\n}, {\n  value: 'video',\n  label: '视频背景'\n}, {\n  value: 'camera',\n  label: '摄像头实时画面'\n}];\n\n// ... isValidUrl 和 CameraPreview 保持不变 ...\n\nexport default function Settings({\n  wallpaperSettings,\n  setWallpaperSettings,\n  panels = [],\n  resetAllPanels,\n  resetSinglePanel\n}) {\n  _s();\n  var _menuItems$find, _availableCameras$fin;\n  const [selectedMenu, setSelectedMenu] = useState('home');\n  const [selectedType, setSelectedType] = useState('image');\n  const [mediaSrc, setMediaSrc] = useState('');\n  const [availableCameras, setAvailableCameras] = useState([]);\n  const [selectedCameraId, setSelectedCameraId] = useState(null);\n  const [cameraError, setCameraError] = useState(null);\n  const [wallpaperFolded, setWallpaperFolded] = useState(false);\n  const [panelResetFolded, setPanelResetFolded] = useState(true);\n\n  // 菜单展开状态\n  const [menuOpen, setMenuOpen] = useState(false);\n  const menuRef = useRef(null);\n\n  // 摄像头设备菜单展开状态\n  const [cameraMenuOpen, setCameraMenuOpen] = useState(false);\n  const cameraMenuRef = useRef(null);\n  useEffect(() => {\n    const cfg = wallpaperSettings[selectedMenu] || {\n      type: 'image',\n      value: ''\n    };\n    setSelectedType(cfg.type);\n    if (cfg.type === 'camera') {\n      setSelectedCameraId(cfg.value || null);\n      setMediaSrc('');\n    } else {\n      setMediaSrc(cfg.value || '');\n      setSelectedCameraId(null);\n    }\n    setCameraError(null);\n  }, [selectedMenu, wallpaperSettings]);\n  useEffect(() => {\n    async function fetchCameras() {\n      try {\n        const devices = await navigator.mediaDevices.enumerateDevices();\n        const videoDevices = devices.filter(d => d.kind === 'videoinput');\n        setAvailableCameras(videoDevices);\n        if (selectedCameraId && !videoDevices.some(d => d.deviceId === selectedCameraId)) {\n          setSelectedCameraId(null);\n        }\n      } catch {\n        setAvailableCameras([]);\n        setCameraError('无法获取摄像头设备列表，可能未授予权限或浏览器不支持。');\n      }\n    }\n    fetchCameras();\n  }, [selectedCameraId]);\n\n  // 点击页面空白关闭所有菜单\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setMenuOpen(false);\n      }\n      if (cameraMenuRef.current && !cameraMenuRef.current.contains(event.target)) {\n        setCameraMenuOpen(false);\n      }\n    }\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // 选择菜单项\n  const handleMenuSelect = key => {\n    setSelectedMenu(key);\n    setMenuOpen(false);\n    setCameraError(null);\n  };\n\n  // 选择摄像头设备\n  const handleCameraSelect = deviceId => {\n    setSelectedCameraId(deviceId);\n    setCameraMenuOpen(false);\n    setCameraError(null);\n  };\n  const handleTypeChange = e => {\n    const newType = e.target.value;\n    setSelectedType(newType);\n    setCameraError(null);\n    if (newType === 'camera') {\n      setMediaSrc('');\n      if (availableCameras.length > 0) {\n        setSelectedCameraId(availableCameras[0].deviceId);\n      } else {\n        setSelectedCameraId(null);\n      }\n    } else {\n      setMediaSrc('');\n      setSelectedCameraId(null);\n    }\n  };\n  const handleMediaSrcChange = e => setMediaSrc(e.target.value);\n  const handleSave = () => {\n    let valueToSave = null;\n    if (selectedType === 'camera') {\n      valueToSave = selectedCameraId || null;\n    } else if (selectedType === 'image' || selectedType === 'video') {\n      valueToSave = mediaSrc.trim() || null;\n    }\n    if ((selectedType === 'image' || selectedType === 'video') && valueToSave) {\n      if (!isValidUrl(valueToSave) && !valueToSave.startsWith('/')) {\n        alert('请输入有效的 URL 地址或以 / 开头的本地路径');\n        return;\n      }\n    }\n    setWallpaperSettings(prev => ({\n      ...prev,\n      [selectedMenu]: {\n        type: selectedType,\n        value: valueToSave\n      }\n    }));\n    alert('保存成功');\n  };\n  const renderPreview = () => {\n    if (selectedType === 'image' && mediaSrc) {\n      return /*#__PURE__*/_jsxDEV(\"img\", {\n        src: mediaSrc,\n        alt: \"\\u80CC\\u666F\\u56FE\\u7247\\u9884\\u89C8\",\n        style: {\n          maxWidth: '100%',\n          maxHeight: 300,\n          borderRadius: 8,\n          objectFit: 'contain',\n          backgroundColor: '#111'\n        },\n        onError: e => {\n          e.currentTarget.src = '';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this);\n    }\n    if (selectedType === 'video' && mediaSrc) {\n      return /*#__PURE__*/_jsxDEV(\"video\", {\n        src: mediaSrc,\n        style: {\n          maxWidth: '100%',\n          maxHeight: 300,\n          borderRadius: 8,\n          backgroundColor: '#111'\n        },\n        controls: true,\n        muted: true,\n        loop: true,\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this);\n    }\n    if (selectedType === 'camera') {\n      if (availableCameras.length === 0) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: 'orange'\n          },\n          children: \"\\u65E0\\u53EF\\u7528\\u6444\\u50CF\\u5934\\u8BBE\\u5907\\u6216\\u672A\\u6388\\u6743\\u8BBF\\u95EE\\u6444\\u50CF\\u5934\\u3002\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 16\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(CameraPreview, {\n        cameraId: selectedCameraId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: '#666'\n      },\n      children: \"\\u8BF7\\u9009\\u62E9\\u58C1\\u7EB8\\u7C7B\\u578B\\u5E76\\u8F93\\u5165\\u6216\\u9009\\u62E9\\u8D44\\u6E90\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 12\n    }, this);\n  };\n\n  // 样式定义\n  const foldHeaderStyle = {\n    cursor: 'pointer',\n    userSelect: 'none',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: '10px 15px',\n    borderRadius: '6px',\n    backgroundColor: 'rgba(0, 229, 255, 0.1)',\n    // 磨砂浅蓝半透明\n    backdropFilter: 'blur(12px)',\n    WebkitBackdropFilter: 'blur(12px)',\n    color: 'white',\n    border: 'none' // 无边框\n  };\n  const panelContainerStyle = {\n    padding: 12,\n    borderRadius: 6,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    // 白色半透明磨砂背景\n    backdropFilter: 'blur(12px)',\n    WebkitBackdropFilter: 'blur(12px)',\n    color: '#222',\n    marginBottom: 20\n  };\n  const inputSelectStyle = {\n    width: '100%',\n    padding: 8,\n    borderRadius: 4,\n    border: 'none',\n    fontSize: 16,\n    backgroundColor: 'rgba(255, 255, 255, 0.08)',\n    color: '#222',\n    outline: 'none',\n    boxSizing: 'border-box'\n  };\n  const buttonStyle = {\n    padding: '10px 20px',\n    backgroundColor: 'rgba(255, 255, 255, 0.7)',\n    color: '#222',\n    fontWeight: 'bold',\n    border: 'none',\n    borderRadius: 6,\n    cursor: 'pointer',\n    userSelect: 'none'\n  };\n  const resetSingleBtnStyle = {\n    padding: '4px 10px',\n    borderRadius: 4,\n    border: 'none',\n    backgroundColor: 'rgba(0, 123, 255, 0.6)',\n    color: 'white',\n    cursor: 'pointer',\n    userSelect: 'none'\n  };\n\n  // 自定义选择菜单样式（菜单项、摄像头）\n  const dropdownWrapperStyle = {\n    position: 'relative',\n    userSelect: 'none'\n  };\n  const dropdownHeaderStyle = {\n    padding: '10px 14px',\n    borderRadius: 6,\n    backgroundColor: 'rgba(255, 255, 255, 0.25)',\n    backdropFilter: 'blur(10px)',\n    WebkitBackdropFilter: 'blur(10px)',\n    border: '1px solid rgba(255,255,255,0.4)',\n    color: '#222',\n    fontWeight: '600',\n    cursor: 'pointer',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  };\n  const dropdownListStyle = {\n    position: 'absolute',\n    top: 'calc(100% + 6px)',\n    left: 0,\n    right: 0,\n    maxHeight: 180,\n    overflowY: 'auto',\n    borderRadius: 8,\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\n    backdropFilter: 'blur(12px)',\n    WebkitBackdropFilter: 'blur(12px)',\n    boxShadow: '0 8px 24px rgba(0,0,0,0.12)',\n    zIndex: 1000\n  };\n  const dropdownItemStyle = isSelected => ({\n    padding: '10px 14px',\n    cursor: 'pointer',\n    backgroundColor: isSelected ? '#00e5ff' : 'transparent',\n    color: isSelected ? '#fff' : '#222',\n    fontWeight: isSelected ? '700' : '500',\n    transition: 'background-color 0.2s, color 0.2s'\n  });\n  const dropdownItemHoverStyle = {\n    backgroundColor: 'rgba(0, 229, 255, 0.15)',\n    color: '#00e5ff'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      color: 'white',\n      maxWidth: 700,\n      margin: 'auto',\n      fontFamily: 'sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setWallpaperFolded(!wallpaperFolded),\n      style: foldHeaderStyle,\n      \"aria-expanded\": !wallpaperFolded,\n      \"aria-controls\": \"wallpaperSettingsPanel\",\n      tabIndex: 0,\n      onKeyDown: e => {\n        if (e.key === 'Enter' || e.key === ' ') setWallpaperFolded(!wallpaperFolded);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u58C1\\u7EB8\\u8BBE\\u7F6E (\\u70B9\\u51FB\", wallpaperFolded ? '展开' : '收起', \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: 18\n        },\n        children: wallpaperFolded ? '+' : '−'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), !wallpaperFolded && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"wallpaperSettingsPanel\",\n      style: panelContainerStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"menuSelect\",\n          style: {\n            display: 'block',\n            marginBottom: 6,\n            color: 'white'\n          },\n          children: \"\\u9009\\u62E9\\u83DC\\u5355\\u9879\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: dropdownWrapperStyle,\n          ref: menuRef,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"menuSelect\",\n            role: \"button\",\n            tabIndex: 0,\n            onClick: () => setMenuOpen(!menuOpen),\n            onKeyDown: e => {\n              if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                setMenuOpen(!menuOpen);\n              }\n            },\n            style: {\n              ...dropdownHeaderStyle,\n              color: 'white',\n              borderColor: 'rgba(255,255,255,0.6)' // 让边框颜色更亮\n            },\n            \"aria-haspopup\": \"listbox\",\n            \"aria-expanded\": menuOpen,\n            \"aria-labelledby\": \"menuSelect\",\n            children: [((_menuItems$find = menuItems.find(item => item.key === selectedMenu)) === null || _menuItems$find === void 0 ? void 0 : _menuItems$find.label) || '请选择', /*#__PURE__*/_jsxDEV(\"svg\", {\n              style: {\n                width: 18,\n                height: 18,\n                transform: menuOpen ? 'rotate(180deg)' : undefined,\n                transition: 'transform 0.3s'\n              },\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"white\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n                points: \"6 9 12 15 18 9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this), menuOpen && /*#__PURE__*/_jsxDEV(\"ul\", {\n            role: \"listbox\",\n            tabIndex: -1,\n            \"aria-activedescendant\": selectedMenu,\n            style: dropdownListStyle,\n            children: menuItems.map(({\n              key,\n              label\n            }) => {\n              const isSelected = key === selectedMenu;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                id: key,\n                role: \"option\",\n                \"aria-selected\": isSelected,\n                onClick: () => handleMenuSelect(key),\n                onKeyDown: e => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    handleMenuSelect(key);\n                  }\n                },\n                style: {\n                  padding: '10px 14px',\n                  cursor: 'pointer',\n                  backgroundColor: isSelected ? '#00e5ff' : 'transparent',\n                  color: isSelected ? '#fff' : 'white',\n                  fontWeight: isSelected ? '700' : '500',\n                  transition: 'background-color 0.2s, color 0.2s'\n                },\n                onMouseEnter: e => {\n                  if (!isSelected) {\n                    e.currentTarget.style.backgroundColor = 'rgba(0, 229, 255, 0.15)';\n                    e.currentTarget.style.color = '#00e5ff';\n                  }\n                },\n                onMouseLeave: e => {\n                  if (!isSelected) {\n                    e.currentTarget.style.backgroundColor = 'transparent';\n                    e.currentTarget.style.color = 'white';\n                  }\n                },\n                tabIndex: 0,\n                children: label\n              }, key, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 23\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: 6,\n            color: 'white'\n          },\n          children: \"\\u58C1\\u7EB8\\u7C7B\\u578B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 13\n        }, this), wallpaperTypes.map(({\n          value,\n          label\n        }) => /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            marginRight: 20,\n            cursor: 'pointer',\n            color: 'white'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"wallpaperType\",\n            value: value,\n            checked: selectedType === value,\n            onChange: handleTypeChange,\n            style: {\n              marginRight: 6\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 17\n          }, this), label]\n        }, value, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }, this), (selectedType === 'image' || selectedType === 'video') && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"mediaSrc\",\n          style: {\n            display: 'block',\n            marginBottom: 6,\n            color: 'white'\n          },\n          children: selectedType === 'image' ? '图片地址(URL 或本地路径)' : '视频地址(URL 或本地路径)'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"mediaSrc\",\n          type: \"text\",\n          value: mediaSrc,\n          onChange: handleMediaSrcChange,\n          placeholder: selectedType === 'image' ? '例如 https://example.com/bg.jpg 或 /local/path/bg.jpg' : '例如 https://example.com/bg.mp4 或 /local/path/bg.mp4',\n          style: {\n            width: '100%',\n            padding: 8,\n            borderRadius: 4,\n            border: 'none',\n            fontSize: 16,\n            backgroundColor: 'rgba(255,255,255,0.1)',\n            color: 'white'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 414,\n        columnNumber: 13\n      }, this), selectedType === 'camera' && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 16\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cameraSelect\",\n          style: {\n            display: 'block',\n            marginBottom: 6,\n            color: 'white'\n          },\n          children: \"\\u9009\\u62E9\\u6444\\u50CF\\u5934\\u8BBE\\u5907\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: dropdownWrapperStyle,\n          ref: cameraMenuRef,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"cameraSelect\",\n            role: \"button\",\n            tabIndex: 0,\n            onClick: () => {\n              // 如果无设备，禁止展开菜单\n              if (availableCameras.length > 0) setCameraMenuOpen(!cameraMenuOpen);\n            },\n            onKeyDown: e => {\n              if ((e.key === 'Enter' || e.key === ' ') && availableCameras.length > 0) {\n                e.preventDefault();\n                setCameraMenuOpen(!cameraMenuOpen);\n              }\n            },\n            style: {\n              ...dropdownHeaderStyle,\n              color: availableCameras.length > 0 ? 'white' : 'rgba(255,255,255,0.4)',\n              // 设备可用时白色，不可用时透明白\n              backgroundColor: availableCameras.length > 0 ? dropdownHeaderStyle.backgroundColor : 'rgba(255,255,255,0.1)',\n              cursor: availableCameras.length > 0 ? 'pointer' : 'not-allowed',\n              borderColor: availableCameras.length > 0 ? 'rgba(255,255,255,0.6)' : 'rgba(255,255,255,0.2)'\n            },\n            \"aria-haspopup\": \"listbox\",\n            \"aria-expanded\": cameraMenuOpen,\n            \"aria-labelledby\": \"cameraSelect\",\n            children: [availableCameras.length === 0 ? '无可用摄像头设备' : ((_availableCameras$fin = availableCameras.find(d => d.deviceId === selectedCameraId)) === null || _availableCameras$fin === void 0 ? void 0 : _availableCameras$fin.label) || `摄像头 ${selectedCameraId || ''}` || '请选择', /*#__PURE__*/_jsxDEV(\"svg\", {\n              style: {\n                width: 18,\n                height: 18,\n                transform: cameraMenuOpen ? 'rotate(180deg)' : undefined,\n                transition: 'transform 0.3s'\n              },\n              viewBox: \"0 0 24 24\",\n              fill: \"none\",\n              stroke: \"white\",\n              strokeWidth: \"2\",\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              children: /*#__PURE__*/_jsxDEV(\"polyline\", {\n                points: \"6 9 12 15 18 9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 471,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 17\n          }, this), cameraMenuOpen && /*#__PURE__*/_jsxDEV(\"ul\", {\n            role: \"listbox\",\n            tabIndex: -1,\n            \"aria-activedescendant\": selectedCameraId,\n            style: dropdownListStyle,\n            children: availableCameras.map(device => {\n              const isSelected = device.deviceId === selectedCameraId;\n              return /*#__PURE__*/_jsxDEV(\"li\", {\n                id: device.deviceId,\n                role: \"option\",\n                \"aria-selected\": isSelected,\n                onClick: () => handleCameraSelect(device.deviceId),\n                onKeyDown: e => {\n                  if (e.key === 'Enter' || e.key === ' ') {\n                    e.preventDefault();\n                    handleCameraSelect(device.deviceId);\n                  }\n                },\n                style: {\n                  padding: '10px 14px',\n                  cursor: 'pointer',\n                  backgroundColor: isSelected ? '#00e5ff' : 'transparent',\n                  color: isSelected ? '#fff' : 'white',\n                  fontWeight: isSelected ? '700' : '500',\n                  transition: 'background-color 0.2s, color 0.2s'\n                },\n                onMouseEnter: e => {\n                  if (!isSelected) {\n                    e.currentTarget.style.backgroundColor = 'rgba(0, 229, 255, 0.15)';\n                    e.currentTarget.style.color = '#00e5ff';\n                  }\n                },\n                onMouseLeave: e => {\n                  if (!isSelected) {\n                    e.currentTarget.style.backgroundColor = 'transparent';\n                    e.currentTarget.style.color = 'white';\n                  }\n                },\n                tabIndex: 0,\n                children: device.label || `摄像头 ${device.deviceId}`\n              }, device.deviceId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 25\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 15\n        }, this), cameraError && /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: 'orange',\n            marginTop: 6\n          },\n          children: cameraError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 31\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSave,\n        style: buttonStyle,\n        children: \"\\u4FDD\\u5B58\\u8BBE\\u7F6E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u9884\\u89C8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderRadius: 8,\n            padding: 10,\n            backgroundColor: 'rgba(0,0,0,0.3)',\n            backdropFilter: 'blur(10px)',\n            WebkitBackdropFilter: 'blur(10px)'\n          },\n          children: renderPreview()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 535,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: () => setPanelResetFolded(!panelResetFolded),\n      style: foldHeaderStyle,\n      \"aria-expanded\": !panelResetFolded,\n      \"aria-controls\": \"panelResetPanel\",\n      tabIndex: 0,\n      onKeyDown: e => {\n        if (e.key === 'Enter' || e.key === ' ') setPanelResetFolded(!panelResetFolded);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u9762\\u677F\\u4F4D\\u7F6E\\u91CD\\u7F6E (\\u70B9\\u51FB\", panelResetFolded ? '展开' : '收起', \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          fontSize: 18\n        },\n        children: panelResetFolded ? '+' : '−'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 7\n    }, this), !panelResetFolded && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"panelResetPanel\",\n      style: panelContainerStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: resetAllPanels,\n        style: buttonStyle,\n        children: \"\\u91CD\\u7F6E\\u6240\\u6709\\u9762\\u677F\\u5230\\u9ED8\\u8BA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            color: 'white'\n          },\n          children: \"\\u91CD\\u7F6E\\u5355\\u4E2A\\u9762\\u677F\\u4F4D\\u7F6E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 13\n        }, this), panels.map(({\n          id,\n          left,\n          top,\n          width,\n          height\n        }) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            marginBottom: 10,\n            borderRadius: 4,\n            padding: 10,\n            backgroundColor: 'rgba(255, 255, 255, 0.05)',\n            color: 'white',\n            userSelect: 'none'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: id\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 579,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: 12,\n                color: '#bbb'\n              },\n              children: [\"\\u5F53\\u524D\\uFF1A\", left, \",\", top, \"\\uFF0C\\u5927\\u5C0F\\uFF1A\", width, \"x\", height]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 580,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => resetSinglePanel(id),\n            style: resetSingleBtnStyle,\n            children: \"\\u91CD\\u7F6E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 584,\n            columnNumber: 17\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 15\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 288,\n    columnNumber: 5\n  }, this);\n}\n\n// CameraPreview 组件保持不变\n_s(Settings, \"H9QbLmm9KsH86uiXPjXZUt5UR+I=\");\n_c = Settings;\nfunction CameraPreview({\n  cameraId\n}) {\n  _s2();\n  const videoRef = React.useRef(null);\n  const [error, setError] = React.useState(null);\n  React.useEffect(() => {\n    if (!cameraId) {\n      setError('未选择摄像头');\n      return;\n    }\n    setError(null);\n    let stream;\n    const constraints = {\n      video: {\n        deviceId: {\n          exact: cameraId\n        }\n      },\n      audio: false\n    };\n    async function startStream() {\n      try {\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n          await videoRef.current.play();\n        }\n      } catch {\n        setError('无法访问摄像头，可能未授权或设备异常');\n      }\n    }\n    startStream();\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach(track => track.stop());\n      }\n      if (videoRef.current) {\n        videoRef.current.srcObject = null;\n      }\n    };\n  }, [cameraId]);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 639,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"video\", {\n    ref: videoRef,\n    style: {\n      width: '100%',\n      maxHeight: 300,\n      borderRadius: 8,\n      backgroundColor: '#000'\n    },\n    muted: true,\n    playsInline: true,\n    autoPlay: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 643,\n    columnNumber: 5\n  }, this);\n}\n\n// isValidUrl 保持不变\n_s2(CameraPreview, \"Z4/Bk+yDXdHnVi24D9ydZvaMMK0=\");\n_c2 = CameraPreview;\nfunction isValidUrl(string) {\n  try {\n    new URL(string);\n    return true;\n  } catch {\n    return false;\n  }\n}\nvar _c, _c2;\n$RefreshReg$(_c, \"Settings\");\n$RefreshReg$(_c2, \"CameraPreview\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","menuItems","key","label","wallpaperTypes","value","Settings","wallpaperSettings","setWallpaperSettings","panels","resetAllPanels","resetSinglePanel","_s","_menuItems$find","_availableCameras$fin","selectedMenu","setSelectedMenu","selectedType","setSelectedType","mediaSrc","setMediaSrc","availableCameras","setAvailableCameras","selectedCameraId","setSelectedCameraId","cameraError","setCameraError","wallpaperFolded","setWallpaperFolded","panelResetFolded","setPanelResetFolded","menuOpen","setMenuOpen","menuRef","cameraMenuOpen","setCameraMenuOpen","cameraMenuRef","cfg","type","fetchCameras","devices","navigator","mediaDevices","enumerateDevices","videoDevices","filter","d","kind","some","deviceId","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleMenuSelect","handleCameraSelect","handleTypeChange","e","newType","length","handleMediaSrcChange","handleSave","valueToSave","trim","isValidUrl","startsWith","alert","prev","renderPreview","src","alt","style","maxWidth","maxHeight","borderRadius","objectFit","backgroundColor","onError","currentTarget","fileName","_jsxFileName","lineNumber","columnNumber","controls","muted","loop","autoPlay","color","children","CameraPreview","cameraId","foldHeaderStyle","cursor","userSelect","display","justifyContent","alignItems","padding","backdropFilter","WebkitBackdropFilter","border","panelContainerStyle","marginBottom","inputSelectStyle","width","fontSize","outline","boxSizing","buttonStyle","fontWeight","resetSingleBtnStyle","dropdownWrapperStyle","position","dropdownHeaderStyle","dropdownListStyle","top","left","right","overflowY","boxShadow","zIndex","dropdownItemStyle","isSelected","transition","dropdownItemHoverStyle","margin","fontFamily","onClick","tabIndex","onKeyDown","id","htmlFor","ref","role","preventDefault","borderColor","find","item","height","transform","undefined","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","map","onMouseEnter","onMouseLeave","marginRight","name","checked","onChange","placeholder","device","marginTop","_c","_s2","videoRef","error","setError","stream","constraints","video","exact","audio","startStream","getUserMedia","srcObject","play","getTracks","forEach","track","stop","playsInline","_c2","string","URL","$RefreshReg$"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/Settings.jsx"],"sourcesContent":["// components/Settings.jsx\r\nimport React, { useState, useEffect, useRef } from 'react';\r\n\r\nconst menuItems = [\r\n  { key: 'home', label: '主页' },\r\n  { key: 'butler', label: '管家' },\r\n  { key: 'car', label: '车' },\r\n  { key: 'homeassistant', label: 'HA' },\r\n  { key: 'ops', label: '运维' },\r\n  { key: 'settings', label: '设置' },\r\n];\r\n\r\nconst wallpaperTypes = [\r\n  { value: 'image', label: '静态图片' },\r\n  { value: 'video', label: '视频背景' },\r\n  { value: 'camera', label: '摄像头实时画面' },\r\n];\r\n\r\n// ... isValidUrl 和 CameraPreview 保持不变 ...\r\n\r\nexport default function Settings({ wallpaperSettings, setWallpaperSettings, panels = [], resetAllPanels, resetSinglePanel }) {\r\n  const [selectedMenu, setSelectedMenu] = useState('home');\r\n  const [selectedType, setSelectedType] = useState('image');\r\n  const [mediaSrc, setMediaSrc] = useState('');\r\n  const [availableCameras, setAvailableCameras] = useState([]);\r\n  const [selectedCameraId, setSelectedCameraId] = useState(null);\r\n  const [cameraError, setCameraError] = useState(null);\r\n\r\n  const [wallpaperFolded, setWallpaperFolded] = useState(false);\r\n  const [panelResetFolded, setPanelResetFolded] = useState(true);\r\n\r\n  // 菜单展开状态\r\n  const [menuOpen, setMenuOpen] = useState(false);\r\n  const menuRef = useRef(null);\r\n\r\n  // 摄像头设备菜单展开状态\r\n  const [cameraMenuOpen, setCameraMenuOpen] = useState(false);\r\n  const cameraMenuRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const cfg = wallpaperSettings[selectedMenu] || { type: 'image', value: '' };\r\n    setSelectedType(cfg.type);\r\n    if (cfg.type === 'camera') {\r\n      setSelectedCameraId(cfg.value || null);\r\n      setMediaSrc('');\r\n    } else {\r\n      setMediaSrc(cfg.value || '');\r\n      setSelectedCameraId(null);\r\n    }\r\n    setCameraError(null);\r\n  }, [selectedMenu, wallpaperSettings]);\r\n\r\n  useEffect(() => {\r\n    async function fetchCameras() {\r\n      try {\r\n        const devices = await navigator.mediaDevices.enumerateDevices();\r\n        const videoDevices = devices.filter(d => d.kind === 'videoinput');\r\n        setAvailableCameras(videoDevices);\r\n        if (selectedCameraId && !videoDevices.some(d => d.deviceId === selectedCameraId)) {\r\n          setSelectedCameraId(null);\r\n        }\r\n      } catch {\r\n        setAvailableCameras([]);\r\n        setCameraError('无法获取摄像头设备列表，可能未授予权限或浏览器不支持。');\r\n      }\r\n    }\r\n    fetchCameras();\r\n  }, [selectedCameraId]);\r\n\r\n  // 点击页面空白关闭所有菜单\r\n  useEffect(() => {\r\n    function handleClickOutside(event) {\r\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\r\n        setMenuOpen(false);\r\n      }\r\n      if (cameraMenuRef.current && !cameraMenuRef.current.contains(event.target)) {\r\n        setCameraMenuOpen(false);\r\n      }\r\n    }\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // 选择菜单项\r\n  const handleMenuSelect = (key) => {\r\n    setSelectedMenu(key);\r\n    setMenuOpen(false);\r\n    setCameraError(null);\r\n  };\r\n\r\n  // 选择摄像头设备\r\n  const handleCameraSelect = (deviceId) => {\r\n    setSelectedCameraId(deviceId);\r\n    setCameraMenuOpen(false);\r\n    setCameraError(null);\r\n  };\r\n\r\n  const handleTypeChange = (e) => {\r\n    const newType = e.target.value;\r\n    setSelectedType(newType);\r\n    setCameraError(null);\r\n\r\n    if (newType === 'camera') {\r\n      setMediaSrc('');\r\n      if (availableCameras.length > 0) {\r\n        setSelectedCameraId(availableCameras[0].deviceId);\r\n      } else {\r\n        setSelectedCameraId(null);\r\n      }\r\n    } else {\r\n      setMediaSrc('');\r\n      setSelectedCameraId(null);\r\n    }\r\n  };\r\n\r\n  const handleMediaSrcChange = (e) => setMediaSrc(e.target.value);\r\n\r\n  const handleSave = () => {\r\n    let valueToSave = null;\r\n    if (selectedType === 'camera') {\r\n      valueToSave = selectedCameraId || null;\r\n    } else if (selectedType === 'image' || selectedType === 'video') {\r\n      valueToSave = mediaSrc.trim() || null;\r\n    }\r\n\r\n    if ((selectedType === 'image' || selectedType === 'video') && valueToSave) {\r\n      if (!isValidUrl(valueToSave) && !valueToSave.startsWith('/')) {\r\n        alert('请输入有效的 URL 地址或以 / 开头的本地路径');\r\n        return;\r\n      }\r\n    }\r\n\r\n    setWallpaperSettings(prev => ({\r\n      ...prev,\r\n      [selectedMenu]: {\r\n        type: selectedType,\r\n        value: valueToSave,\r\n      },\r\n    }));\r\n\r\n    alert('保存成功');\r\n  };\r\n\r\n  const renderPreview = () => {\r\n    if (selectedType === 'image' && mediaSrc) {\r\n      return (\r\n        <img\r\n          src={mediaSrc}\r\n          alt=\"背景图片预览\"\r\n          style={{ maxWidth: '100%', maxHeight: 300, borderRadius: 8, objectFit: 'contain', backgroundColor: '#111' }}\r\n          onError={(e) => { e.currentTarget.src = ''; }}\r\n        />\r\n      );\r\n    }\r\n    if (selectedType === 'video' && mediaSrc) {\r\n      return (\r\n        <video\r\n          src={mediaSrc}\r\n          style={{ maxWidth: '100%', maxHeight: 300, borderRadius: 8, backgroundColor: '#111' }}\r\n          controls\r\n          muted\r\n          loop\r\n          autoPlay\r\n        />\r\n      );\r\n    }\r\n    if (selectedType === 'camera') {\r\n      if (availableCameras.length === 0) {\r\n        return <div style={{ color: 'orange' }}>无可用摄像头设备或未授权访问摄像头。</div>;\r\n      }\r\n      return (\r\n        <CameraPreview cameraId={selectedCameraId} />\r\n      );\r\n    }\r\n    return <div style={{ color: '#666' }}>请选择壁纸类型并输入或选择资源。</div>;\r\n  };\r\n\r\n  // 样式定义\r\n  const foldHeaderStyle = {\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n    padding: '10px 15px',\r\n    borderRadius: '6px',\r\n    backgroundColor: 'rgba(0, 229, 255, 0.1)', // 磨砂浅蓝半透明\r\n    backdropFilter: 'blur(12px)',\r\n    WebkitBackdropFilter: 'blur(12px)',\r\n    color: 'white',\r\n    border: 'none', // 无边框\r\n  };\r\n\r\n  const panelContainerStyle = {\r\n    padding: 12,\r\n    borderRadius: 6,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.15)', // 白色半透明磨砂背景\r\n    backdropFilter: 'blur(12px)',\r\n    WebkitBackdropFilter: 'blur(12px)',\r\n    color: '#222',\r\n    marginBottom: 20,\r\n  };\r\n\r\n  const inputSelectStyle = {\r\n    width: '100%',\r\n    padding: 8,\r\n    borderRadius: 4,\r\n    border: 'none',\r\n    fontSize: 16,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.08)',\r\n    color: '#222',\r\n    outline: 'none',\r\n    boxSizing: 'border-box',\r\n  };\r\n\r\n  const buttonStyle = {\r\n    padding: '10px 20px',\r\n    backgroundColor: 'rgba(255, 255, 255, 0.7)',\r\n    color: '#222',\r\n    fontWeight: 'bold',\r\n    border: 'none',\r\n    borderRadius: 6,\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n  };\r\n\r\n  const resetSingleBtnStyle = {\r\n    padding: '4px 10px',\r\n    borderRadius: 4,\r\n    border: 'none',\r\n    backgroundColor: 'rgba(0, 123, 255, 0.6)',\r\n    color: 'white',\r\n    cursor: 'pointer',\r\n    userSelect: 'none',\r\n  };\r\n\r\n  // 自定义选择菜单样式（菜单项、摄像头）\r\n  const dropdownWrapperStyle = {\r\n    position: 'relative',\r\n    userSelect: 'none',\r\n  };\r\n\r\n  const dropdownHeaderStyle = {\r\n    padding: '10px 14px',\r\n    borderRadius: 6,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.25)',\r\n    backdropFilter: 'blur(10px)',\r\n    WebkitBackdropFilter: 'blur(10px)',\r\n    border: '1px solid rgba(255,255,255,0.4)',\r\n    color: '#222',\r\n    fontWeight: '600',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'center',\r\n  };\r\n\r\n  const dropdownListStyle = {\r\n    position: 'absolute',\r\n    top: 'calc(100% + 6px)',\r\n    left: 0,\r\n    right: 0,\r\n    maxHeight: 180,\r\n    overflowY: 'auto',\r\n    borderRadius: 8,\r\n    backgroundColor: 'rgba(255, 255, 255, 0.15)',\r\n    backdropFilter: 'blur(12px)',\r\n    WebkitBackdropFilter: 'blur(12px)',\r\n    boxShadow: '0 8px 24px rgba(0,0,0,0.12)',\r\n    zIndex: 1000,\r\n  };\r\n\r\n  const dropdownItemStyle = (isSelected) => ({\r\n    padding: '10px 14px',\r\n    cursor: 'pointer',\r\n    backgroundColor: isSelected ? '#00e5ff' : 'transparent',\r\n    color: isSelected ? '#fff' : '#222',\r\n    fontWeight: isSelected ? '700' : '500',\r\n    transition: 'background-color 0.2s, color 0.2s',\r\n  });\r\n\r\n  const dropdownItemHoverStyle = {\r\n    backgroundColor: 'rgba(0, 229, 255, 0.15)',\r\n    color: '#00e5ff',\r\n  };\r\n\r\n  return (\r\n    <div style={{ color: 'white', maxWidth: 700, margin: 'auto', fontFamily: 'sans-serif' }}>\r\n      {/* 壁纸设置折叠头 */}\r\n      <div\r\n        onClick={() => setWallpaperFolded(!wallpaperFolded)}\r\n        style={foldHeaderStyle}\r\n        aria-expanded={!wallpaperFolded}\r\n        aria-controls=\"wallpaperSettingsPanel\"\r\n        tabIndex={0}\r\n        onKeyDown={e => { if (e.key === 'Enter' || e.key === ' ') setWallpaperFolded(!wallpaperFolded); }}\r\n      >\r\n        <span>壁纸设置 (点击{wallpaperFolded ? '展开' : '收起'})</span>\r\n        <span style={{ fontSize: 18 }}>{wallpaperFolded ? '+' : '−'}</span>\r\n      </div>\r\n  \r\n      {!wallpaperFolded && (\r\n        <div id=\"wallpaperSettingsPanel\" style={panelContainerStyle}>\r\n          {/* 自定义菜单项选择 */}\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label htmlFor=\"menuSelect\" style={{ display: 'block', marginBottom: 6, color: 'white' }}>选择菜单项</label>\r\n            <div style={dropdownWrapperStyle} ref={menuRef}>\r\n              <div\r\n                id=\"menuSelect\"\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                onClick={() => setMenuOpen(!menuOpen)}\r\n                onKeyDown={e => {\r\n                  if (e.key === 'Enter' || e.key === ' ') {\r\n                    e.preventDefault();\r\n                    setMenuOpen(!menuOpen);\r\n                  }\r\n                }}\r\n                style={{\r\n                  ...dropdownHeaderStyle,\r\n                  color: 'white',\r\n                  borderColor: 'rgba(255,255,255,0.6)', // 让边框颜色更亮\r\n                }}\r\n                aria-haspopup=\"listbox\"\r\n                aria-expanded={menuOpen}\r\n                aria-labelledby=\"menuSelect\"\r\n              >\r\n                {menuItems.find(item => item.key === selectedMenu)?.label || '请选择'}\r\n                <svg\r\n                  style={{ width: 18, height: 18, transform: menuOpen ? 'rotate(180deg)' : undefined, transition: 'transform 0.3s' }}\r\n                  viewBox=\"0 0 24 24\"\r\n                  fill=\"none\"\r\n                  stroke=\"white\"\r\n                  strokeWidth=\"2\"\r\n                  strokeLinecap=\"round\"\r\n                  strokeLinejoin=\"round\"\r\n                >\r\n                  <polyline points=\"6 9 12 15 18 9\" />\r\n                </svg>\r\n              </div>\r\n              {menuOpen && (\r\n                <ul\r\n                  role=\"listbox\"\r\n                  tabIndex={-1}\r\n                  aria-activedescendant={selectedMenu}\r\n                  style={dropdownListStyle}\r\n                >\r\n                  {menuItems.map(({ key, label }) => {\r\n                    const isSelected = key === selectedMenu;\r\n                    return (\r\n                      <li\r\n                        id={key}\r\n                        key={key}\r\n                        role=\"option\"\r\n                        aria-selected={isSelected}\r\n                        onClick={() => handleMenuSelect(key)}\r\n                        onKeyDown={e => {\r\n                          if (e.key === 'Enter' || e.key === ' ') {\r\n                            e.preventDefault();\r\n                            handleMenuSelect(key);\r\n                          }\r\n                        }}\r\n                        style={{\r\n                          padding: '10px 14px',\r\n                          cursor: 'pointer',\r\n                          backgroundColor: isSelected ? '#00e5ff' : 'transparent',\r\n                          color: isSelected ? '#fff' : 'white',\r\n                          fontWeight: isSelected ? '700' : '500',\r\n                          transition: 'background-color 0.2s, color 0.2s',\r\n                        }}\r\n                        onMouseEnter={e => {\r\n                          if (!isSelected) {\r\n                            e.currentTarget.style.backgroundColor = 'rgba(0, 229, 255, 0.15)';\r\n                            e.currentTarget.style.color = '#00e5ff';\r\n                          }\r\n                        }}\r\n                        onMouseLeave={e => {\r\n                          if (!isSelected) {\r\n                            e.currentTarget.style.backgroundColor = 'transparent';\r\n                            e.currentTarget.style.color = 'white';\r\n                          }\r\n                        }}\r\n                        tabIndex={0}\r\n                      >\r\n                        {label}\r\n                      </li>\r\n                    );\r\n                  })}\r\n                </ul>\r\n              )}\r\n            </div>\r\n          </div>\r\n  \r\n          {/* 壁纸类型 */}\r\n          <div style={{ marginBottom: 16 }}>\r\n            <label style={{ display: 'block', marginBottom: 6, color: 'white' }}>壁纸类型</label>\r\n            {wallpaperTypes.map(({ value, label }) => (\r\n              <label key={value} style={{ marginRight: 20, cursor: 'pointer', color: 'white' }}>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"wallpaperType\"\r\n                  value={value}\r\n                  checked={selectedType === value}\r\n                  onChange={handleTypeChange}\r\n                  style={{ marginRight: 6 }}\r\n                />\r\n                {label}\r\n              </label>\r\n            ))}\r\n          </div>\r\n  \r\n          {/* 图片或视频地址输入 */}\r\n          {(selectedType === 'image' || selectedType === 'video') && (\r\n            <div style={{ marginBottom: 16 }}>\r\n              <label htmlFor=\"mediaSrc\" style={{ display: 'block', marginBottom: 6, color: 'white' }}>\r\n                {selectedType === 'image' ? '图片地址(URL 或本地路径)' : '视频地址(URL 或本地路径)'}\r\n              </label>\r\n              <input\r\n                id=\"mediaSrc\"\r\n                type=\"text\"\r\n                value={mediaSrc}\r\n                onChange={handleMediaSrcChange}\r\n                placeholder={selectedType === 'image' ? '例如 https://example.com/bg.jpg 或 /local/path/bg.jpg' : '例如 https://example.com/bg.mp4 或 /local/path/bg.mp4'}\r\n                style={{ width: '100%', padding: 8, borderRadius: 4, border: 'none', fontSize: 16, backgroundColor: 'rgba(255,255,255,0.1)', color: 'white' }}\r\n              />\r\n            </div>\r\n          )}\r\n  \r\n          {/* 摄像头设备选择改成自定义菜单 */}\r\n          {selectedType === 'camera' && (\r\n            <div style={{ marginBottom: 16 }}>\r\n              <label htmlFor=\"cameraSelect\" style={{ display: 'block', marginBottom: 6, color: 'white' }}>选择摄像头设备</label>\r\n              <div style={dropdownWrapperStyle} ref={cameraMenuRef}>\r\n                <div\r\n                  id=\"cameraSelect\"\r\n                  role=\"button\"\r\n                  tabIndex={0}\r\n                  onClick={() => {\r\n                    // 如果无设备，禁止展开菜单\r\n                    if (availableCameras.length > 0) setCameraMenuOpen(!cameraMenuOpen);\r\n                  }}\r\n                  onKeyDown={e => {\r\n                    if ((e.key === 'Enter' || e.key === ' ') && availableCameras.length > 0) {\r\n                      e.preventDefault();\r\n                      setCameraMenuOpen(!cameraMenuOpen);\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    ...dropdownHeaderStyle,\r\n                    color: availableCameras.length > 0 ? 'white' : 'rgba(255,255,255,0.4)', // 设备可用时白色，不可用时透明白\r\n                    backgroundColor: availableCameras.length > 0 ? dropdownHeaderStyle.backgroundColor : 'rgba(255,255,255,0.1)',\r\n                    cursor: availableCameras.length > 0 ? 'pointer' : 'not-allowed',\r\n                    borderColor: availableCameras.length > 0 ? 'rgba(255,255,255,0.6)' : 'rgba(255,255,255,0.2)',\r\n                  }}\r\n                  aria-haspopup=\"listbox\"\r\n                  aria-expanded={cameraMenuOpen}\r\n                  aria-labelledby=\"cameraSelect\"\r\n                >\r\n                  {availableCameras.length === 0\r\n                    ? '无可用摄像头设备'\r\n                    : (availableCameras.find(d => d.deviceId === selectedCameraId)?.label || `摄像头 ${selectedCameraId || ''}`) || '请选择'}\r\n                  <svg\r\n                    style={{ width: 18, height: 18, transform: cameraMenuOpen ? 'rotate(180deg)' : undefined, transition: 'transform 0.3s' }}\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"none\"\r\n                    stroke=\"white\"\r\n                    strokeWidth=\"2\"\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                  >\r\n                    <polyline points=\"6 9 12 15 18 9\" />\r\n                  </svg>\r\n                </div>\r\n                {cameraMenuOpen && (\r\n                  <ul\r\n                    role=\"listbox\"\r\n                    tabIndex={-1}\r\n                    aria-activedescendant={selectedCameraId}\r\n                    style={dropdownListStyle}\r\n                  >\r\n                    {availableCameras.map((device) => {\r\n                      const isSelected = device.deviceId === selectedCameraId;\r\n                      return (\r\n                        <li\r\n                          id={device.deviceId}\r\n                          key={device.deviceId}\r\n                          role=\"option\"\r\n                          aria-selected={isSelected}\r\n                          onClick={() => handleCameraSelect(device.deviceId)}\r\n                          onKeyDown={e => {\r\n                            if (e.key === 'Enter' || e.key === ' ') {\r\n                              e.preventDefault();\r\n                              handleCameraSelect(device.deviceId);\r\n                            }\r\n                          }}\r\n                          style={{\r\n                            padding: '10px 14px',\r\n                            cursor: 'pointer',\r\n                            backgroundColor: isSelected ? '#00e5ff' : 'transparent',\r\n                            color: isSelected ? '#fff' : 'white',\r\n                            fontWeight: isSelected ? '700' : '500',\r\n                            transition: 'background-color 0.2s, color 0.2s',\r\n                          }}\r\n                          onMouseEnter={e => {\r\n                            if (!isSelected) {\r\n                              e.currentTarget.style.backgroundColor = 'rgba(0, 229, 255, 0.15)';\r\n                              e.currentTarget.style.color = '#00e5ff';\r\n                            }\r\n                          }}\r\n                          onMouseLeave={e => {\r\n                            if (!isSelected) {\r\n                              e.currentTarget.style.backgroundColor = 'transparent';\r\n                              e.currentTarget.style.color = 'white';\r\n                            }\r\n                          }}\r\n                          tabIndex={0}\r\n                        >\r\n                          {device.label || `摄像头 ${device.deviceId}`}\r\n                        </li>\r\n                      );\r\n                    })}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n              {cameraError && <p style={{ color: 'orange', marginTop: 6 }}>{cameraError}</p>}\r\n            </div>\r\n          )}  \r\n\r\n          <button onClick={handleSave} style={buttonStyle}>\r\n            保存设置\r\n          </button>\r\n\r\n          <div>\r\n            <h4>预览</h4>\r\n            <div style={{ borderRadius: 8, padding: 10, backgroundColor: 'rgba(0,0,0,0.3)', backdropFilter: 'blur(10px)', WebkitBackdropFilter: 'blur(10px)' }}>\r\n              {renderPreview()}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* 面板重置折叠头 */}\r\n      <div\r\n        onClick={() => setPanelResetFolded(!panelResetFolded)}\r\n        style={foldHeaderStyle}\r\n        aria-expanded={!panelResetFolded}\r\n        aria-controls=\"panelResetPanel\"\r\n        tabIndex={0}\r\n        onKeyDown={e => { if (e.key === 'Enter' || e.key === ' ') setPanelResetFolded(!panelResetFolded); }}\r\n      >\r\n        <span>面板位置重置 (点击{panelResetFolded ? '展开' : '收起'})</span>\r\n        <span style={{ fontSize: 18 }}>{panelResetFolded ? '+' : '−'}</span>\r\n      </div>\r\n\r\n      {!panelResetFolded && (\r\n        <div id=\"panelResetPanel\" style={panelContainerStyle}>\r\n          <button onClick={resetAllPanels} style={buttonStyle}>\r\n            重置所有面板到默认\r\n          </button>\r\n\r\n          <div>\r\n            <h4 style={{ color: 'white' }}>重置单个面板位置</h4>\r\n            {panels.map(({ id, left, top, width, height }) => (\r\n              <div\r\n                key={id}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                  marginBottom: 10,\r\n                  borderRadius: 4,\r\n                  padding: 10,\r\n                  backgroundColor: 'rgba(255, 255, 255, 0.05)',\r\n                  color: 'white',\r\n                  userSelect: 'none',\r\n                }}\r\n              >\r\n                <div>\r\n                  <strong>{id}</strong>\r\n                  <div style={{ fontSize: 12, color: '#bbb' }}>\r\n                    当前：{left},{top}，大小：{width}x{height}\r\n                  </div>\r\n                </div>\r\n                <button onClick={() => resetSinglePanel(id)} style={resetSingleBtnStyle}>\r\n                  重置\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// CameraPreview 组件保持不变\r\nfunction CameraPreview({ cameraId }) {\r\n  const videoRef = React.useRef(null);\r\n  const [error, setError] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    if (!cameraId) {\r\n      setError('未选择摄像头');\r\n      return;\r\n    }\r\n    setError(null);\r\n\r\n    let stream;\r\n\r\n    const constraints = {\r\n      video: { deviceId: { exact: cameraId } },\r\n      audio: false,\r\n    };\r\n\r\n    async function startStream() {\r\n      try {\r\n        stream = await navigator.mediaDevices.getUserMedia(constraints);\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = stream;\r\n          await videoRef.current.play();\r\n        }\r\n      } catch {\r\n        setError('无法访问摄像头，可能未授权或设备异常');\r\n      }\r\n    }\r\n    startStream();\r\n\r\n    return () => {\r\n      if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n      }\r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = null;\r\n      }\r\n    };\r\n  }, [cameraId]);\r\n\r\n  if (error) {\r\n    return <div style={{ color: 'red' }}>{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <video\r\n      ref={videoRef}\r\n      style={{ width: '100%', maxHeight: 300, borderRadius: 8, backgroundColor: '#000' }}\r\n      muted\r\n      playsInline\r\n      autoPlay\r\n    />\r\n  );\r\n}\r\n\r\n// isValidUrl 保持不变\r\nfunction isValidUrl(string) {\r\n  try {\r\n    new URL(string);\r\n    return true;\r\n  } catch {\r\n    return false;\r\n  }\r\n}\r\n"],"mappings":";;;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,MAAMC,SAAS,GAAG,CAChB;EAAEC,GAAG,EAAE,MAAM;EAAEC,KAAK,EAAE;AAAK,CAAC,EAC5B;EAAED,GAAG,EAAE,QAAQ;EAAEC,KAAK,EAAE;AAAK,CAAC,EAC9B;EAAED,GAAG,EAAE,KAAK;EAAEC,KAAK,EAAE;AAAI,CAAC,EAC1B;EAAED,GAAG,EAAE,eAAe;EAAEC,KAAK,EAAE;AAAK,CAAC,EACrC;EAAED,GAAG,EAAE,KAAK;EAAEC,KAAK,EAAE;AAAK,CAAC,EAC3B;EAAED,GAAG,EAAE,UAAU;EAAEC,KAAK,EAAE;AAAK,CAAC,CACjC;AAED,MAAMC,cAAc,GAAG,CACrB;EAAEC,KAAK,EAAE,OAAO;EAAEF,KAAK,EAAE;AAAO,CAAC,EACjC;EAAEE,KAAK,EAAE,OAAO;EAAEF,KAAK,EAAE;AAAO,CAAC,EACjC;EAAEE,KAAK,EAAE,QAAQ;EAAEF,KAAK,EAAE;AAAU,CAAC,CACtC;;AAED;;AAEA,eAAe,SAASG,QAAQA,CAAC;EAAEC,iBAAiB;EAAEC,oBAAoB;EAAEC,MAAM,GAAG,EAAE;EAAEC,cAAc;EAAEC;AAAiB,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,eAAA,EAAAC,qBAAA;EAC3H,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGpB,QAAQ,CAAC,MAAM,CAAC;EACxD,MAAM,CAACqB,YAAY,EAAEC,eAAe,CAAC,GAAGtB,QAAQ,CAAC,OAAO,CAAC;EACzD,MAAM,CAACuB,QAAQ,EAAEC,WAAW,CAAC,GAAGxB,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACyB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAM,CAAC2B,gBAAgB,EAAEC,mBAAmB,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAAC6B,WAAW,EAAEC,cAAc,CAAC,GAAG9B,QAAQ,CAAC,IAAI,CAAC;EAEpD,MAAM,CAAC+B,eAAe,EAAEC,kBAAkB,CAAC,GAAGhC,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACiC,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGlC,QAAQ,CAAC,IAAI,CAAC;;EAE9D;EACA,MAAM,CAACmC,QAAQ,EAAEC,WAAW,CAAC,GAAGpC,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMqC,OAAO,GAAGnC,MAAM,CAAC,IAAI,CAAC;;EAE5B;EACA,MAAM,CAACoC,cAAc,EAAEC,iBAAiB,CAAC,GAAGvC,QAAQ,CAAC,KAAK,CAAC;EAC3D,MAAMwC,aAAa,GAAGtC,MAAM,CAAC,IAAI,CAAC;EAElCD,SAAS,CAAC,MAAM;IACd,MAAMwC,GAAG,GAAG9B,iBAAiB,CAACQ,YAAY,CAAC,IAAI;MAAEuB,IAAI,EAAE,OAAO;MAAEjC,KAAK,EAAE;IAAG,CAAC;IAC3Ea,eAAe,CAACmB,GAAG,CAACC,IAAI,CAAC;IACzB,IAAID,GAAG,CAACC,IAAI,KAAK,QAAQ,EAAE;MACzBd,mBAAmB,CAACa,GAAG,CAAChC,KAAK,IAAI,IAAI,CAAC;MACtCe,WAAW,CAAC,EAAE,CAAC;IACjB,CAAC,MAAM;MACLA,WAAW,CAACiB,GAAG,CAAChC,KAAK,IAAI,EAAE,CAAC;MAC5BmB,mBAAmB,CAAC,IAAI,CAAC;IAC3B;IACAE,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC,EAAE,CAACX,YAAY,EAAER,iBAAiB,CAAC,CAAC;EAErCV,SAAS,CAAC,MAAM;IACd,eAAe0C,YAAYA,CAAA,EAAG;MAC5B,IAAI;QACF,MAAMC,OAAO,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,gBAAgB,CAAC,CAAC;QAC/D,MAAMC,YAAY,GAAGJ,OAAO,CAACK,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,YAAY,CAAC;QACjEzB,mBAAmB,CAACsB,YAAY,CAAC;QACjC,IAAIrB,gBAAgB,IAAI,CAACqB,YAAY,CAACI,IAAI,CAACF,CAAC,IAAIA,CAAC,CAACG,QAAQ,KAAK1B,gBAAgB,CAAC,EAAE;UAChFC,mBAAmB,CAAC,IAAI,CAAC;QAC3B;MACF,CAAC,CAAC,MAAM;QACNF,mBAAmB,CAAC,EAAE,CAAC;QACvBI,cAAc,CAAC,6BAA6B,CAAC;MAC/C;IACF;IACAa,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAAChB,gBAAgB,CAAC,CAAC;;EAEtB;EACA1B,SAAS,CAAC,MAAM;IACd,SAASqD,kBAAkBA,CAACC,KAAK,EAAE;MACjC,IAAIlB,OAAO,CAACmB,OAAO,IAAI,CAACnB,OAAO,CAACmB,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAE;QAC9DtB,WAAW,CAAC,KAAK,CAAC;MACpB;MACA,IAAII,aAAa,CAACgB,OAAO,IAAI,CAAChB,aAAa,CAACgB,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,EAAE;QAC1EnB,iBAAiB,CAAC,KAAK,CAAC;MAC1B;IACF;IACAoB,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAEN,kBAAkB,CAAC;IAC1D,OAAO,MAAMK,QAAQ,CAACE,mBAAmB,CAAC,WAAW,EAAEP,kBAAkB,CAAC;EAC5E,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMQ,gBAAgB,GAAIxD,GAAG,IAAK;IAChCc,eAAe,CAACd,GAAG,CAAC;IACpB8B,WAAW,CAAC,KAAK,CAAC;IAClBN,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;;EAED;EACA,MAAMiC,kBAAkB,GAAIV,QAAQ,IAAK;IACvCzB,mBAAmB,CAACyB,QAAQ,CAAC;IAC7Bd,iBAAiB,CAAC,KAAK,CAAC;IACxBT,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMkC,gBAAgB,GAAIC,CAAC,IAAK;IAC9B,MAAMC,OAAO,GAAGD,CAAC,CAACP,MAAM,CAACjD,KAAK;IAC9Ba,eAAe,CAAC4C,OAAO,CAAC;IACxBpC,cAAc,CAAC,IAAI,CAAC;IAEpB,IAAIoC,OAAO,KAAK,QAAQ,EAAE;MACxB1C,WAAW,CAAC,EAAE,CAAC;MACf,IAAIC,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,EAAE;QAC/BvC,mBAAmB,CAACH,gBAAgB,CAAC,CAAC,CAAC,CAAC4B,QAAQ,CAAC;MACnD,CAAC,MAAM;QACLzB,mBAAmB,CAAC,IAAI,CAAC;MAC3B;IACF,CAAC,MAAM;MACLJ,WAAW,CAAC,EAAE,CAAC;MACfI,mBAAmB,CAAC,IAAI,CAAC;IAC3B;EACF,CAAC;EAED,MAAMwC,oBAAoB,GAAIH,CAAC,IAAKzC,WAAW,CAACyC,CAAC,CAACP,MAAM,CAACjD,KAAK,CAAC;EAE/D,MAAM4D,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAIC,WAAW,GAAG,IAAI;IACtB,IAAIjD,YAAY,KAAK,QAAQ,EAAE;MAC7BiD,WAAW,GAAG3C,gBAAgB,IAAI,IAAI;IACxC,CAAC,MAAM,IAAIN,YAAY,KAAK,OAAO,IAAIA,YAAY,KAAK,OAAO,EAAE;MAC/DiD,WAAW,GAAG/C,QAAQ,CAACgD,IAAI,CAAC,CAAC,IAAI,IAAI;IACvC;IAEA,IAAI,CAAClD,YAAY,KAAK,OAAO,IAAIA,YAAY,KAAK,OAAO,KAAKiD,WAAW,EAAE;MACzE,IAAI,CAACE,UAAU,CAACF,WAAW,CAAC,IAAI,CAACA,WAAW,CAACG,UAAU,CAAC,GAAG,CAAC,EAAE;QAC5DC,KAAK,CAAC,2BAA2B,CAAC;QAClC;MACF;IACF;IAEA9D,oBAAoB,CAAC+D,IAAI,KAAK;MAC5B,GAAGA,IAAI;MACP,CAACxD,YAAY,GAAG;QACduB,IAAI,EAAErB,YAAY;QAClBZ,KAAK,EAAE6D;MACT;IACF,CAAC,CAAC,CAAC;IAEHI,KAAK,CAAC,MAAM,CAAC;EACf,CAAC;EAED,MAAME,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAIvD,YAAY,KAAK,OAAO,IAAIE,QAAQ,EAAE;MACxC,oBACEnB,OAAA;QACEyE,GAAG,EAAEtD,QAAS;QACduD,GAAG,EAAC,sCAAQ;QACZC,KAAK,EAAE;UAAEC,QAAQ,EAAE,MAAM;UAAEC,SAAS,EAAE,GAAG;UAAEC,YAAY,EAAE,CAAC;UAAEC,SAAS,EAAE,SAAS;UAAEC,eAAe,EAAE;QAAO,CAAE;QAC5GC,OAAO,EAAGpB,CAAC,IAAK;UAAEA,CAAC,CAACqB,aAAa,CAACT,GAAG,GAAG,EAAE;QAAE;MAAE;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC;IAEN;IACA,IAAIrE,YAAY,KAAK,OAAO,IAAIE,QAAQ,EAAE;MACxC,oBACEnB,OAAA;QACEyE,GAAG,EAAEtD,QAAS;QACdwD,KAAK,EAAE;UAAEC,QAAQ,EAAE,MAAM;UAAEC,SAAS,EAAE,GAAG;UAAEC,YAAY,EAAE,CAAC;UAAEE,eAAe,EAAE;QAAO,CAAE;QACtFO,QAAQ;QACRC,KAAK;QACLC,IAAI;QACJC,QAAQ;MAAA;QAAAP,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC;IAEN;IACA,IAAIrE,YAAY,KAAK,QAAQ,EAAE;MAC7B,IAAII,gBAAgB,CAAC0C,MAAM,KAAK,CAAC,EAAE;QACjC,oBAAO/D,OAAA;UAAK2E,KAAK,EAAE;YAAEgB,KAAK,EAAE;UAAS,CAAE;UAAAC,QAAA,EAAC;QAAkB;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAClE;MACA,oBACEtF,OAAA,CAAC6F,aAAa;QAACC,QAAQ,EAAEvE;MAAiB;QAAA4D,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAEjD;IACA,oBAAOtF,OAAA;MAAK2E,KAAK,EAAE;QAAEgB,KAAK,EAAE;MAAO,CAAE;MAAAC,QAAA,EAAC;IAAgB;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAC9D,CAAC;;EAED;EACA,MAAMS,eAAe,GAAG;IACtBC,MAAM,EAAE,SAAS;IACjBC,UAAU,EAAE,MAAM;IAClBC,OAAO,EAAE,MAAM;IACfC,cAAc,EAAE,eAAe;IAC/BC,UAAU,EAAE,QAAQ;IACpBC,OAAO,EAAE,WAAW;IACpBvB,YAAY,EAAE,KAAK;IACnBE,eAAe,EAAE,wBAAwB;IAAE;IAC3CsB,cAAc,EAAE,YAAY;IAC5BC,oBAAoB,EAAE,YAAY;IAClCZ,KAAK,EAAE,OAAO;IACda,MAAM,EAAE,MAAM,CAAE;EAClB,CAAC;EAED,MAAMC,mBAAmB,GAAG;IAC1BJ,OAAO,EAAE,EAAE;IACXvB,YAAY,EAAE,CAAC;IACfE,eAAe,EAAE,2BAA2B;IAAE;IAC9CsB,cAAc,EAAE,YAAY;IAC5BC,oBAAoB,EAAE,YAAY;IAClCZ,KAAK,EAAE,MAAM;IACbe,YAAY,EAAE;EAChB,CAAC;EAED,MAAMC,gBAAgB,GAAG;IACvBC,KAAK,EAAE,MAAM;IACbP,OAAO,EAAE,CAAC;IACVvB,YAAY,EAAE,CAAC;IACf0B,MAAM,EAAE,MAAM;IACdK,QAAQ,EAAE,EAAE;IACZ7B,eAAe,EAAE,2BAA2B;IAC5CW,KAAK,EAAE,MAAM;IACbmB,OAAO,EAAE,MAAM;IACfC,SAAS,EAAE;EACb,CAAC;EAED,MAAMC,WAAW,GAAG;IAClBX,OAAO,EAAE,WAAW;IACpBrB,eAAe,EAAE,0BAA0B;IAC3CW,KAAK,EAAE,MAAM;IACbsB,UAAU,EAAE,MAAM;IAClBT,MAAM,EAAE,MAAM;IACd1B,YAAY,EAAE,CAAC;IACfkB,MAAM,EAAE,SAAS;IACjBC,UAAU,EAAE;EACd,CAAC;EAED,MAAMiB,mBAAmB,GAAG;IAC1Bb,OAAO,EAAE,UAAU;IACnBvB,YAAY,EAAE,CAAC;IACf0B,MAAM,EAAE,MAAM;IACdxB,eAAe,EAAE,wBAAwB;IACzCW,KAAK,EAAE,OAAO;IACdK,MAAM,EAAE,SAAS;IACjBC,UAAU,EAAE;EACd,CAAC;;EAED;EACA,MAAMkB,oBAAoB,GAAG;IAC3BC,QAAQ,EAAE,UAAU;IACpBnB,UAAU,EAAE;EACd,CAAC;EAED,MAAMoB,mBAAmB,GAAG;IAC1BhB,OAAO,EAAE,WAAW;IACpBvB,YAAY,EAAE,CAAC;IACfE,eAAe,EAAE,2BAA2B;IAC5CsB,cAAc,EAAE,YAAY;IAC5BC,oBAAoB,EAAE,YAAY;IAClCC,MAAM,EAAE,iCAAiC;IACzCb,KAAK,EAAE,MAAM;IACbsB,UAAU,EAAE,KAAK;IACjBjB,MAAM,EAAE,SAAS;IACjBE,OAAO,EAAE,MAAM;IACfC,cAAc,EAAE,eAAe;IAC/BC,UAAU,EAAE;EACd,CAAC;EAED,MAAMkB,iBAAiB,GAAG;IACxBF,QAAQ,EAAE,UAAU;IACpBG,GAAG,EAAE,kBAAkB;IACvBC,IAAI,EAAE,CAAC;IACPC,KAAK,EAAE,CAAC;IACR5C,SAAS,EAAE,GAAG;IACd6C,SAAS,EAAE,MAAM;IACjB5C,YAAY,EAAE,CAAC;IACfE,eAAe,EAAE,2BAA2B;IAC5CsB,cAAc,EAAE,YAAY;IAC5BC,oBAAoB,EAAE,YAAY;IAClCoB,SAAS,EAAE,6BAA6B;IACxCC,MAAM,EAAE;EACV,CAAC;EAED,MAAMC,iBAAiB,GAAIC,UAAU,KAAM;IACzCzB,OAAO,EAAE,WAAW;IACpBL,MAAM,EAAE,SAAS;IACjBhB,eAAe,EAAE8C,UAAU,GAAG,SAAS,GAAG,aAAa;IACvDnC,KAAK,EAAEmC,UAAU,GAAG,MAAM,GAAG,MAAM;IACnCb,UAAU,EAAEa,UAAU,GAAG,KAAK,GAAG,KAAK;IACtCC,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,MAAMC,sBAAsB,GAAG;IAC7BhD,eAAe,EAAE,yBAAyB;IAC1CW,KAAK,EAAE;EACT,CAAC;EAED,oBACE3F,OAAA;IAAK2E,KAAK,EAAE;MAAEgB,KAAK,EAAE,OAAO;MAAEf,QAAQ,EAAE,GAAG;MAAEqD,MAAM,EAAE,MAAM;MAAEC,UAAU,EAAE;IAAa,CAAE;IAAAtC,QAAA,gBAEtF5F,OAAA;MACEmI,OAAO,EAAEA,CAAA,KAAMvG,kBAAkB,CAAC,CAACD,eAAe,CAAE;MACpDgD,KAAK,EAAEoB,eAAgB;MACvB,iBAAe,CAACpE,eAAgB;MAChC,iBAAc,wBAAwB;MACtCyG,QAAQ,EAAE,CAAE;MACZC,SAAS,EAAExE,CAAC,IAAI;QAAE,IAAIA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,EAAE0B,kBAAkB,CAAC,CAACD,eAAe,CAAC;MAAE,CAAE;MAAAiE,QAAA,gBAElG5F,OAAA;QAAA4F,QAAA,GAAM,wCAAQ,EAACjE,eAAe,GAAG,IAAI,GAAG,IAAI,EAAC,GAAC;MAAA;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACrDtF,OAAA;QAAM2E,KAAK,EAAE;UAAEkC,QAAQ,EAAE;QAAG,CAAE;QAAAjB,QAAA,EAAEjE,eAAe,GAAG,GAAG,GAAG;MAAG;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChE,CAAC,EAEL,CAAC3D,eAAe,iBACf3B,OAAA;MAAKsI,EAAE,EAAC,wBAAwB;MAAC3D,KAAK,EAAE8B,mBAAoB;MAAAb,QAAA,gBAE1D5F,OAAA;QAAK2E,KAAK,EAAE;UAAE+B,YAAY,EAAE;QAAG,CAAE;QAAAd,QAAA,gBAC/B5F,OAAA;UAAOuI,OAAO,EAAC,YAAY;UAAC5D,KAAK,EAAE;YAAEuB,OAAO,EAAE,OAAO;YAAEQ,YAAY,EAAE,CAAC;YAAEf,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,EAAC;QAAK;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eACvGtF,OAAA;UAAK2E,KAAK,EAAEwC,oBAAqB;UAACqB,GAAG,EAAEvG,OAAQ;UAAA2D,QAAA,gBAC7C5F,OAAA;YACEsI,EAAE,EAAC,YAAY;YACfG,IAAI,EAAC,QAAQ;YACbL,QAAQ,EAAE,CAAE;YACZD,OAAO,EAAEA,CAAA,KAAMnG,WAAW,CAAC,CAACD,QAAQ,CAAE;YACtCsG,SAAS,EAAExE,CAAC,IAAI;cACd,IAAIA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,EAAE;gBACtC2D,CAAC,CAAC6E,cAAc,CAAC,CAAC;gBAClB1G,WAAW,CAAC,CAACD,QAAQ,CAAC;cACxB;YACF,CAAE;YACF4C,KAAK,EAAE;cACL,GAAG0C,mBAAmB;cACtB1B,KAAK,EAAE,OAAO;cACdgD,WAAW,EAAE,uBAAuB,CAAE;YACxC,CAAE;YACF,iBAAc,SAAS;YACvB,iBAAe5G,QAAS;YACxB,mBAAgB,YAAY;YAAA6D,QAAA,GAE3B,EAAA/E,eAAA,GAAAZ,SAAS,CAAC2I,IAAI,CAACC,IAAI,IAAIA,IAAI,CAAC3I,GAAG,KAAKa,YAAY,CAAC,cAAAF,eAAA,uBAAjDA,eAAA,CAAmDV,KAAK,KAAI,KAAK,eAClEH,OAAA;cACE2E,KAAK,EAAE;gBAAEiC,KAAK,EAAE,EAAE;gBAAEkC,MAAM,EAAE,EAAE;gBAAEC,SAAS,EAAEhH,QAAQ,GAAG,gBAAgB,GAAGiH,SAAS;gBAAEjB,UAAU,EAAE;cAAiB,CAAE;cACnHkB,OAAO,EAAC,WAAW;cACnBC,IAAI,EAAC,MAAM;cACXC,MAAM,EAAC,OAAO;cACdC,WAAW,EAAC,GAAG;cACfC,aAAa,EAAC,OAAO;cACrBC,cAAc,EAAC,OAAO;cAAA1D,QAAA,eAEtB5F,OAAA;gBAAUuJ,MAAM,EAAC;cAAgB;gBAAApE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EACLvD,QAAQ,iBACP/B,OAAA;YACEyI,IAAI,EAAC,SAAS;YACdL,QAAQ,EAAE,CAAC,CAAE;YACb,yBAAuBrH,YAAa;YACpC4D,KAAK,EAAE2C,iBAAkB;YAAA1B,QAAA,EAExB3F,SAAS,CAACuJ,GAAG,CAAC,CAAC;cAAEtJ,GAAG;cAAEC;YAAM,CAAC,KAAK;cACjC,MAAM2H,UAAU,GAAG5H,GAAG,KAAKa,YAAY;cACvC,oBACEf,OAAA;gBACEsI,EAAE,EAAEpI,GAAI;gBAERuI,IAAI,EAAC,QAAQ;gBACb,iBAAeX,UAAW;gBAC1BK,OAAO,EAAEA,CAAA,KAAMzE,gBAAgB,CAACxD,GAAG,CAAE;gBACrCmI,SAAS,EAAExE,CAAC,IAAI;kBACd,IAAIA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,EAAE;oBACtC2D,CAAC,CAAC6E,cAAc,CAAC,CAAC;oBAClBhF,gBAAgB,CAACxD,GAAG,CAAC;kBACvB;gBACF,CAAE;gBACFyE,KAAK,EAAE;kBACL0B,OAAO,EAAE,WAAW;kBACpBL,MAAM,EAAE,SAAS;kBACjBhB,eAAe,EAAE8C,UAAU,GAAG,SAAS,GAAG,aAAa;kBACvDnC,KAAK,EAAEmC,UAAU,GAAG,MAAM,GAAG,OAAO;kBACpCb,UAAU,EAAEa,UAAU,GAAG,KAAK,GAAG,KAAK;kBACtCC,UAAU,EAAE;gBACd,CAAE;gBACF0B,YAAY,EAAE5F,CAAC,IAAI;kBACjB,IAAI,CAACiE,UAAU,EAAE;oBACfjE,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACK,eAAe,GAAG,yBAAyB;oBACjEnB,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACgB,KAAK,GAAG,SAAS;kBACzC;gBACF,CAAE;gBACF+D,YAAY,EAAE7F,CAAC,IAAI;kBACjB,IAAI,CAACiE,UAAU,EAAE;oBACfjE,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACK,eAAe,GAAG,aAAa;oBACrDnB,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACgB,KAAK,GAAG,OAAO;kBACvC;gBACF,CAAE;gBACFyC,QAAQ,EAAE,CAAE;gBAAAxC,QAAA,EAEXzF;cAAK,GAhCDD,GAAG;gBAAAiF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAiCN,CAAC;YAET,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtF,OAAA;QAAK2E,KAAK,EAAE;UAAE+B,YAAY,EAAE;QAAG,CAAE;QAAAd,QAAA,gBAC/B5F,OAAA;UAAO2E,KAAK,EAAE;YAAEuB,OAAO,EAAE,OAAO;YAAEQ,YAAY,EAAE,CAAC;YAAEf,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,EAAC;QAAI;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,EAChFlF,cAAc,CAACoJ,GAAG,CAAC,CAAC;UAAEnJ,KAAK;UAAEF;QAAM,CAAC,kBACnCH,OAAA;UAAmB2E,KAAK,EAAE;YAAEgF,WAAW,EAAE,EAAE;YAAE3D,MAAM,EAAE,SAAS;YAAEL,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,gBAC/E5F,OAAA;YACEsC,IAAI,EAAC,OAAO;YACZsH,IAAI,EAAC,eAAe;YACpBvJ,KAAK,EAAEA,KAAM;YACbwJ,OAAO,EAAE5I,YAAY,KAAKZ,KAAM;YAChCyJ,QAAQ,EAAElG,gBAAiB;YAC3Be,KAAK,EAAE;cAAEgF,WAAW,EAAE;YAAE;UAAE;YAAAxE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,EACDnF,KAAK;QAAA,GATIE,KAAK;UAAA8E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAUV,CACR,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC,EAGL,CAACrE,YAAY,KAAK,OAAO,IAAIA,YAAY,KAAK,OAAO,kBACpDjB,OAAA;QAAK2E,KAAK,EAAE;UAAE+B,YAAY,EAAE;QAAG,CAAE;QAAAd,QAAA,gBAC/B5F,OAAA;UAAOuI,OAAO,EAAC,UAAU;UAAC5D,KAAK,EAAE;YAAEuB,OAAO,EAAE,OAAO;YAAEQ,YAAY,EAAE,CAAC;YAAEf,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,EACpF3E,YAAY,KAAK,OAAO,GAAG,iBAAiB,GAAG;QAAiB;UAAAkE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D,CAAC,eACRtF,OAAA;UACEsI,EAAE,EAAC,UAAU;UACbhG,IAAI,EAAC,MAAM;UACXjC,KAAK,EAAEc,QAAS;UAChB2I,QAAQ,EAAE9F,oBAAqB;UAC/B+F,WAAW,EAAE9I,YAAY,KAAK,OAAO,GAAG,oDAAoD,GAAG,oDAAqD;UACpJ0D,KAAK,EAAE;YAAEiC,KAAK,EAAE,MAAM;YAAEP,OAAO,EAAE,CAAC;YAAEvB,YAAY,EAAE,CAAC;YAAE0B,MAAM,EAAE,MAAM;YAAEK,QAAQ,EAAE,EAAE;YAAE7B,eAAe,EAAE,uBAAuB;YAAEW,KAAK,EAAE;UAAQ;QAAE;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/I,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN,EAGArE,YAAY,KAAK,QAAQ,iBACxBjB,OAAA;QAAK2E,KAAK,EAAE;UAAE+B,YAAY,EAAE;QAAG,CAAE;QAAAd,QAAA,gBAC/B5F,OAAA;UAAOuI,OAAO,EAAC,cAAc;UAAC5D,KAAK,EAAE;YAAEuB,OAAO,EAAE,OAAO;YAAEQ,YAAY,EAAE,CAAC;YAAEf,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,EAAC;QAAO;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC3GtF,OAAA;UAAK2E,KAAK,EAAEwC,oBAAqB;UAACqB,GAAG,EAAEpG,aAAc;UAAAwD,QAAA,gBACnD5F,OAAA;YACEsI,EAAE,EAAC,cAAc;YACjBG,IAAI,EAAC,QAAQ;YACbL,QAAQ,EAAE,CAAE;YACZD,OAAO,EAAEA,CAAA,KAAM;cACb;cACA,IAAI9G,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,EAAE5B,iBAAiB,CAAC,CAACD,cAAc,CAAC;YACrE,CAAE;YACFmG,SAAS,EAAExE,CAAC,IAAI;cACd,IAAI,CAACA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,KAAKmB,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,EAAE;gBACvEF,CAAC,CAAC6E,cAAc,CAAC,CAAC;gBAClBvG,iBAAiB,CAAC,CAACD,cAAc,CAAC;cACpC;YACF,CAAE;YACFyC,KAAK,EAAE;cACL,GAAG0C,mBAAmB;cACtB1B,KAAK,EAAEtE,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,GAAG,OAAO,GAAG,uBAAuB;cAAE;cACxEiB,eAAe,EAAE3D,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,GAAGsD,mBAAmB,CAACrC,eAAe,GAAG,uBAAuB;cAC5GgB,MAAM,EAAE3E,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,GAAG,SAAS,GAAG,aAAa;cAC/D4E,WAAW,EAAEtH,gBAAgB,CAAC0C,MAAM,GAAG,CAAC,GAAG,uBAAuB,GAAG;YACvE,CAAE;YACF,iBAAc,SAAS;YACvB,iBAAe7B,cAAe;YAC9B,mBAAgB,cAAc;YAAA0D,QAAA,GAE7BvE,gBAAgB,CAAC0C,MAAM,KAAK,CAAC,GAC1B,UAAU,GACT,EAAAjD,qBAAA,GAAAO,gBAAgB,CAACuH,IAAI,CAAC9F,CAAC,IAAIA,CAAC,CAACG,QAAQ,KAAK1B,gBAAgB,CAAC,cAAAT,qBAAA,uBAA3DA,qBAAA,CAA6DX,KAAK,KAAI,OAAOoB,gBAAgB,IAAI,EAAE,EAAE,IAAK,KAAK,eACpHvB,OAAA;cACE2E,KAAK,EAAE;gBAAEiC,KAAK,EAAE,EAAE;gBAAEkC,MAAM,EAAE,EAAE;gBAAEC,SAAS,EAAE7G,cAAc,GAAG,gBAAgB,GAAG8G,SAAS;gBAAEjB,UAAU,EAAE;cAAiB,CAAE;cACzHkB,OAAO,EAAC,WAAW;cACnBC,IAAI,EAAC,MAAM;cACXC,MAAM,EAAC,OAAO;cACdC,WAAW,EAAC,GAAG;cACfC,aAAa,EAAC,OAAO;cACrBC,cAAc,EAAC,OAAO;cAAA1D,QAAA,eAEtB5F,OAAA;gBAAUuJ,MAAM,EAAC;cAAgB;gBAAApE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,EACLpD,cAAc,iBACblC,OAAA;YACEyI,IAAI,EAAC,SAAS;YACdL,QAAQ,EAAE,CAAC,CAAE;YACb,yBAAuB7G,gBAAiB;YACxCoD,KAAK,EAAE2C,iBAAkB;YAAA1B,QAAA,EAExBvE,gBAAgB,CAACmI,GAAG,CAAEQ,MAAM,IAAK;cAChC,MAAMlC,UAAU,GAAGkC,MAAM,CAAC/G,QAAQ,KAAK1B,gBAAgB;cACvD,oBACEvB,OAAA;gBACEsI,EAAE,EAAE0B,MAAM,CAAC/G,QAAS;gBAEpBwF,IAAI,EAAC,QAAQ;gBACb,iBAAeX,UAAW;gBAC1BK,OAAO,EAAEA,CAAA,KAAMxE,kBAAkB,CAACqG,MAAM,CAAC/G,QAAQ,CAAE;gBACnDoF,SAAS,EAAExE,CAAC,IAAI;kBACd,IAAIA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,EAAE;oBACtC2D,CAAC,CAAC6E,cAAc,CAAC,CAAC;oBAClB/E,kBAAkB,CAACqG,MAAM,CAAC/G,QAAQ,CAAC;kBACrC;gBACF,CAAE;gBACF0B,KAAK,EAAE;kBACL0B,OAAO,EAAE,WAAW;kBACpBL,MAAM,EAAE,SAAS;kBACjBhB,eAAe,EAAE8C,UAAU,GAAG,SAAS,GAAG,aAAa;kBACvDnC,KAAK,EAAEmC,UAAU,GAAG,MAAM,GAAG,OAAO;kBACpCb,UAAU,EAAEa,UAAU,GAAG,KAAK,GAAG,KAAK;kBACtCC,UAAU,EAAE;gBACd,CAAE;gBACF0B,YAAY,EAAE5F,CAAC,IAAI;kBACjB,IAAI,CAACiE,UAAU,EAAE;oBACfjE,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACK,eAAe,GAAG,yBAAyB;oBACjEnB,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACgB,KAAK,GAAG,SAAS;kBACzC;gBACF,CAAE;gBACF+D,YAAY,EAAE7F,CAAC,IAAI;kBACjB,IAAI,CAACiE,UAAU,EAAE;oBACfjE,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACK,eAAe,GAAG,aAAa;oBACrDnB,CAAC,CAACqB,aAAa,CAACP,KAAK,CAACgB,KAAK,GAAG,OAAO;kBACvC;gBACF,CAAE;gBACFyC,QAAQ,EAAE,CAAE;gBAAAxC,QAAA,EAEXoE,MAAM,CAAC7J,KAAK,IAAI,OAAO6J,MAAM,CAAC/G,QAAQ;cAAE,GAhCpC+G,MAAM,CAAC/G,QAAQ;gBAAAkC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAiClB,CAAC;YAET,CAAC;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CACL;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC,EACL7D,WAAW,iBAAIzB,OAAA;UAAG2E,KAAK,EAAE;YAAEgB,KAAK,EAAE,QAAQ;YAAEsE,SAAS,EAAE;UAAE,CAAE;UAAArE,QAAA,EAAEnE;QAAW;UAAA0D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3E,CACN,eAEDtF,OAAA;QAAQmI,OAAO,EAAElE,UAAW;QAACU,KAAK,EAAEqC,WAAY;QAAApB,QAAA,EAAC;MAEjD;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETtF,OAAA;QAAA4F,QAAA,gBACE5F,OAAA;UAAA4F,QAAA,EAAI;QAAE;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACXtF,OAAA;UAAK2E,KAAK,EAAE;YAAEG,YAAY,EAAE,CAAC;YAAEuB,OAAO,EAAE,EAAE;YAAErB,eAAe,EAAE,iBAAiB;YAAEsB,cAAc,EAAE,YAAY;YAAEC,oBAAoB,EAAE;UAAa,CAAE;UAAAX,QAAA,EAChJpB,aAAa,CAAC;QAAC;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACb,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,eAGDtF,OAAA;MACEmI,OAAO,EAAEA,CAAA,KAAMrG,mBAAmB,CAAC,CAACD,gBAAgB,CAAE;MACtD8C,KAAK,EAAEoB,eAAgB;MACvB,iBAAe,CAAClE,gBAAiB;MACjC,iBAAc,iBAAiB;MAC/BuG,QAAQ,EAAE,CAAE;MACZC,SAAS,EAAExE,CAAC,IAAI;QAAE,IAAIA,CAAC,CAAC3D,GAAG,KAAK,OAAO,IAAI2D,CAAC,CAAC3D,GAAG,KAAK,GAAG,EAAE4B,mBAAmB,CAAC,CAACD,gBAAgB,CAAC;MAAE,CAAE;MAAA+D,QAAA,gBAEpG5F,OAAA;QAAA4F,QAAA,GAAM,oDAAU,EAAC/D,gBAAgB,GAAG,IAAI,GAAG,IAAI,EAAC,GAAC;MAAA;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACxDtF,OAAA;QAAM2E,KAAK,EAAE;UAAEkC,QAAQ,EAAE;QAAG,CAAE;QAAAjB,QAAA,EAAE/D,gBAAgB,GAAG,GAAG,GAAG;MAAG;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjE,CAAC,EAEL,CAACzD,gBAAgB,iBAChB7B,OAAA;MAAKsI,EAAE,EAAC,iBAAiB;MAAC3D,KAAK,EAAE8B,mBAAoB;MAAAb,QAAA,gBACnD5F,OAAA;QAAQmI,OAAO,EAAEzH,cAAe;QAACiE,KAAK,EAAEqC,WAAY;QAAApB,QAAA,EAAC;MAErD;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAETtF,OAAA;QAAA4F,QAAA,gBACE5F,OAAA;UAAI2E,KAAK,EAAE;YAAEgB,KAAK,EAAE;UAAQ,CAAE;UAAAC,QAAA,EAAC;QAAQ;UAAAT,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAC3C7E,MAAM,CAAC+I,GAAG,CAAC,CAAC;UAAElB,EAAE;UAAEd,IAAI;UAAED,GAAG;UAAEX,KAAK;UAAEkC;QAAO,CAAC,kBAC3C9I,OAAA;UAEE2E,KAAK,EAAE;YACLuB,OAAO,EAAE,MAAM;YACfE,UAAU,EAAE,QAAQ;YACpBD,cAAc,EAAE,eAAe;YAC/BO,YAAY,EAAE,EAAE;YAChB5B,YAAY,EAAE,CAAC;YACfuB,OAAO,EAAE,EAAE;YACXrB,eAAe,EAAE,2BAA2B;YAC5CW,KAAK,EAAE,OAAO;YACdM,UAAU,EAAE;UACd,CAAE;UAAAL,QAAA,gBAEF5F,OAAA;YAAA4F,QAAA,gBACE5F,OAAA;cAAA4F,QAAA,EAAS0C;YAAE;cAAAnD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAS,CAAC,eACrBtF,OAAA;cAAK2E,KAAK,EAAE;gBAAEkC,QAAQ,EAAE,EAAE;gBAAElB,KAAK,EAAE;cAAO,CAAE;cAAAC,QAAA,GAAC,oBACxC,EAAC4B,IAAI,EAAC,GAAC,EAACD,GAAG,EAAC,0BAAI,EAACX,KAAK,EAAC,GAAC,EAACkC,MAAM;YAAA;cAAA3D,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNtF,OAAA;YAAQmI,OAAO,EAAEA,CAAA,KAAMxH,gBAAgB,CAAC2H,EAAE,CAAE;YAAC3D,KAAK,EAAEuC,mBAAoB;YAAAtB,QAAA,EAAC;UAEzE;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GArBJgD,EAAE;UAAAnD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAsBJ,CACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;;AAEA;AAAA1E,EAAA,CA/jBwBN,QAAQ;AAAA4J,EAAA,GAAR5J,QAAQ;AAgkBhC,SAASuF,aAAaA,CAAC;EAAEC;AAAS,CAAC,EAAE;EAAAqE,GAAA;EACnC,MAAMC,QAAQ,GAAGzK,KAAK,CAACG,MAAM,CAAC,IAAI,CAAC;EACnC,MAAM,CAACuK,KAAK,EAAEC,QAAQ,CAAC,GAAG3K,KAAK,CAACC,QAAQ,CAAC,IAAI,CAAC;EAE9CD,KAAK,CAACE,SAAS,CAAC,MAAM;IACpB,IAAI,CAACiG,QAAQ,EAAE;MACbwE,QAAQ,CAAC,QAAQ,CAAC;MAClB;IACF;IACAA,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAIC,MAAM;IAEV,MAAMC,WAAW,GAAG;MAClBC,KAAK,EAAE;QAAExH,QAAQ,EAAE;UAAEyH,KAAK,EAAE5E;QAAS;MAAE,CAAC;MACxC6E,KAAK,EAAE;IACT,CAAC;IAED,eAAeC,WAAWA,CAAA,EAAG;MAC3B,IAAI;QACFL,MAAM,GAAG,MAAM9H,SAAS,CAACC,YAAY,CAACmI,YAAY,CAACL,WAAW,CAAC;QAC/D,IAAIJ,QAAQ,CAAChH,OAAO,EAAE;UACpBgH,QAAQ,CAAChH,OAAO,CAAC0H,SAAS,GAAGP,MAAM;UACnC,MAAMH,QAAQ,CAAChH,OAAO,CAAC2H,IAAI,CAAC,CAAC;QAC/B;MACF,CAAC,CAAC,MAAM;QACNT,QAAQ,CAAC,oBAAoB,CAAC;MAChC;IACF;IACAM,WAAW,CAAC,CAAC;IAEb,OAAO,MAAM;MACX,IAAIL,MAAM,EAAE;QACVA,MAAM,CAACS,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;MACnD;MACA,IAAIf,QAAQ,CAAChH,OAAO,EAAE;QACpBgH,QAAQ,CAAChH,OAAO,CAAC0H,SAAS,GAAG,IAAI;MACnC;IACF,CAAC;EACH,CAAC,EAAE,CAAChF,QAAQ,CAAC,CAAC;EAEd,IAAIuE,KAAK,EAAE;IACT,oBAAOrK,OAAA;MAAK2E,KAAK,EAAE;QAAEgB,KAAK,EAAE;MAAM,CAAE;MAAAC,QAAA,EAAEyE;IAAK;MAAAlF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC;EACpD;EAEA,oBACEtF,OAAA;IACEwI,GAAG,EAAE4B,QAAS;IACdzF,KAAK,EAAE;MAAEiC,KAAK,EAAE,MAAM;MAAE/B,SAAS,EAAE,GAAG;MAAEC,YAAY,EAAE,CAAC;MAAEE,eAAe,EAAE;IAAO,CAAE;IACnFQ,KAAK;IACL4F,WAAW;IACX1F,QAAQ;EAAA;IAAAP,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEN;;AAEA;AAAA6E,GAAA,CAxDStE,aAAa;AAAAwF,GAAA,GAAbxF,aAAa;AAyDtB,SAASzB,UAAUA,CAACkH,MAAM,EAAE;EAC1B,IAAI;IACF,IAAIC,GAAG,CAACD,MAAM,CAAC;IACf,OAAO,IAAI;EACb,CAAC,CAAC,MAAM;IACN,OAAO,KAAK;EACd;AACF;AAAC,IAAApB,EAAA,EAAAmB,GAAA;AAAAG,YAAA,CAAAtB,EAAA;AAAAsB,YAAA,CAAAH,GAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}