{"ast":null,"code":"// components/WallpaperManager.jsx\nimport React,{useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export const menuWallpapers={home:'/core/client/ai-butler/image/bg-home.jpeg',butler:'/core/client/ai-butler/image/bg-butler.jpeg',car:'/core/client/ai-butler/image/bg-car.jpeg',homeassistant:'/core/client/ai-butler/image/bg-homeassistant.jpeg',ops:'/core/client/ai-butler/image/bg-ops.jpeg',settings:'/core/client/ai-butler/image/bg-settings.jpeg'};const WallpaperManager=_ref=>{let{selectedMenu,showGlassTransition}=_ref;const[currentWallpaper,setCurrentWallpaper]=useState(menuWallpapers.home);// 默认使用home壁纸\nconst[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{// 获取目标壁纸路径，如果不存在则使用home壁纸\nconst targetWallpaper=menuWallpapers[selectedMenu]||menuWallpapers.home;setIsLoading(true);setError(null);// 预加载图片并验证路径有效性\nconst img=new Image();img.onload=()=>{console.log('壁纸加载成功:',targetWallpaper);setCurrentWallpaper(targetWallpaper);setIsLoading(false);};img.onerror=err=>{console.error('壁纸加载失败:',targetWallpaper,err);console.log('使用默认壁纸:',menuWallpapers.home);// 如果目标壁纸加载失败，尝试使用home壁纸\nconst homeImg=new Image();homeImg.onload=()=>{setCurrentWallpaper(menuWallpapers.home);setIsLoading(false);};homeImg.onerror=()=>{setError('默认壁纸也无法加载，请检查路径');setIsLoading(false);};homeImg.src=menuWallpapers.home;};img.src=targetWallpaper;},[selectedMenu]);return/*#__PURE__*/_jsx(\"div\",{className:\"app-wallpaper\",style:{position:'fixed',top:0,left:0,width:'100%',height:'100%',zIndex:-1,backgroundImage:\"url(\".concat(currentWallpaper,\")\"),backgroundSize:'cover',backgroundPosition:'center',opacity:isLoading||error?0:1,transition:'opacity 0.5s ease-in-out'},\"aria-hidden\":\"true\"});};export default WallpaperManager;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","menuWallpapers","home","butler","car","homeassistant","ops","settings","WallpaperManager","_ref","selectedMenu","showGlassTransition","currentWallpaper","setCurrentWallpaper","isLoading","setIsLoading","error","setError","targetWallpaper","img","Image","onload","console","log","onerror","err","homeImg","src","className","style","position","top","left","width","height","zIndex","backgroundImage","concat","backgroundSize","backgroundPosition","opacity","transition"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/WallpaperManager.jsx"],"sourcesContent":["// components/WallpaperManager.jsx\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nexport const menuWallpapers = {\r\n  home: '/core/client/ai-butler/image/bg-home.jpeg',\r\n  butler: '/core/client/ai-butler/image/bg-butler.jpeg',\r\n  car: '/core/client/ai-butler/image/bg-car.jpeg',\r\n  homeassistant: '/core/client/ai-butler/image/bg-homeassistant.jpeg',\r\n  ops: '/core/client/ai-butler/image/bg-ops.jpeg',\r\n  settings: '/core/client/ai-butler/image/bg-settings.jpeg',\r\n};\r\n\r\nconst WallpaperManager = ({ selectedMenu, showGlassTransition }) => {\r\n  const [currentWallpaper, setCurrentWallpaper] = useState(menuWallpapers.home); // 默认使用home壁纸\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // 获取目标壁纸路径，如果不存在则使用home壁纸\r\n    const targetWallpaper = menuWallpapers[selectedMenu] || menuWallpapers.home;\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    // 预加载图片并验证路径有效性\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      console.log('壁纸加载成功:', targetWallpaper);\r\n      setCurrentWallpaper(targetWallpaper);\r\n      setIsLoading(false);\r\n    };\r\n    img.onerror = (err) => {\r\n      console.error('壁纸加载失败:', targetWallpaper, err);\r\n      console.log('使用默认壁纸:', menuWallpapers.home);\r\n      \r\n      // 如果目标壁纸加载失败，尝试使用home壁纸\r\n      const homeImg = new Image();\r\n      homeImg.onload = () => {\r\n        setCurrentWallpaper(menuWallpapers.home);\r\n        setIsLoading(false);\r\n      };\r\n      homeImg.onerror = () => {\r\n        setError('默认壁纸也无法加载，请检查路径');\r\n        setIsLoading(false);\r\n      };\r\n      homeImg.src = menuWallpapers.home;\r\n    };\r\n    img.src = targetWallpaper;\r\n  }, [selectedMenu]);\r\n\r\n  return (\r\n    <div \r\n      className=\"app-wallpaper\"\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100%',\r\n        height: '100%',\r\n        zIndex: -1,\r\n        backgroundImage: `url(${currentWallpaper})`,\r\n        backgroundSize: 'cover',\r\n        backgroundPosition: 'center',\r\n        opacity: isLoading || error ? 0 : 1,\r\n        transition: 'opacity 0.5s ease-in-out'\r\n      }}\r\n      aria-hidden=\"true\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default WallpaperManager;"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,MAAO,MAAM,CAAAC,cAAc,CAAG,CAC5BC,IAAI,CAAE,2CAA2C,CACjDC,MAAM,CAAE,6CAA6C,CACrDC,GAAG,CAAE,0CAA0C,CAC/CC,aAAa,CAAE,oDAAoD,CACnEC,GAAG,CAAE,0CAA0C,CAC/CC,QAAQ,CAAE,+CACZ,CAAC,CAED,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAA2C,IAA1C,CAAEC,YAAY,CAAEC,mBAAoB,CAAC,CAAAF,IAAA,CAC7D,KAAM,CAACG,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGhB,QAAQ,CAACI,cAAc,CAACC,IAAI,CAAC,CAAE;AAC/E,KAAM,CAACY,SAAS,CAAEC,YAAY,CAAC,CAAGlB,QAAQ,CAAC,IAAI,CAAC,CAChD,KAAM,CAACmB,KAAK,CAAEC,QAAQ,CAAC,CAAGpB,QAAQ,CAAC,IAAI,CAAC,CAExCC,SAAS,CAAC,IAAM,CACd;AACA,KAAM,CAAAoB,eAAe,CAAGjB,cAAc,CAACS,YAAY,CAAC,EAAIT,cAAc,CAACC,IAAI,CAC3Ea,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,IAAI,CAAC,CAEd;AACA,KAAM,CAAAE,GAAG,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CACvBD,GAAG,CAACE,MAAM,CAAG,IAAM,CACjBC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEL,eAAe,CAAC,CACvCL,mBAAmB,CAACK,eAAe,CAAC,CACpCH,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CACDI,GAAG,CAACK,OAAO,CAAIC,GAAG,EAAK,CACrBH,OAAO,CAACN,KAAK,CAAC,SAAS,CAAEE,eAAe,CAAEO,GAAG,CAAC,CAC9CH,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEtB,cAAc,CAACC,IAAI,CAAC,CAE3C;AACA,KAAM,CAAAwB,OAAO,CAAG,GAAI,CAAAN,KAAK,CAAC,CAAC,CAC3BM,OAAO,CAACL,MAAM,CAAG,IAAM,CACrBR,mBAAmB,CAACZ,cAAc,CAACC,IAAI,CAAC,CACxCa,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CACDW,OAAO,CAACF,OAAO,CAAG,IAAM,CACtBP,QAAQ,CAAC,iBAAiB,CAAC,CAC3BF,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CACDW,OAAO,CAACC,GAAG,CAAG1B,cAAc,CAACC,IAAI,CACnC,CAAC,CACDiB,GAAG,CAACQ,GAAG,CAAGT,eAAe,CAC3B,CAAC,CAAE,CAACR,YAAY,CAAC,CAAC,CAElB,mBACEV,IAAA,QACE4B,SAAS,CAAC,eAAe,CACzBC,KAAK,CAAE,CACLC,QAAQ,CAAE,OAAO,CACjBC,GAAG,CAAE,CAAC,CACNC,IAAI,CAAE,CAAC,CACPC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAE,CAAC,CAAC,CACVC,eAAe,QAAAC,MAAA,CAASzB,gBAAgB,KAAG,CAC3C0B,cAAc,CAAE,OAAO,CACvBC,kBAAkB,CAAE,QAAQ,CAC5BC,OAAO,CAAE1B,SAAS,EAAIE,KAAK,CAAG,CAAC,CAAG,CAAC,CACnCyB,UAAU,CAAE,0BACd,CAAE,CACF,cAAY,MAAM,CACnB,CAAC,CAEN,CAAC,CAED,cAAe,CAAAjC,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}