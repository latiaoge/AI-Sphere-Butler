{"ast":null,"code":"var _jsxFileName = \"D:\\\\XM\\\\AI-Sphere-Butler\\\\core\\\\client\\\\src\\\\components\\\\CameraControl.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport cameraSwitchIcon from '../assets/icons/camera-switch.png';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function CameraControl() {\n  _s();\n  const videoRef = useRef(null);\n  const floatingContainerRef = useRef(null);\n  const [stream, setStream] = useState(null);\n  const [devices, setDevices] = useState([]);\n  const [selectedDeviceId, setSelectedDeviceId] = useState(null);\n  const [isCameraOn, setIsCameraOn] = useState(false);\n  const currentStreamRef = useRef(null);\n  const currentCameraDeviceIdRef = useRef(null);\n\n  // 用于区分单击和双击\n  const clickTimeoutRef = useRef(null);\n\n  // localStorage key，保存浮动容器位置\n  const storageKey = 'cameraControlFloatingPosition';\n\n  // 新增：安全上下文及API支持判断\n  function hasMediaDevices() {\n    return typeof navigator !== 'undefined' && navigator.mediaDevices && typeof navigator.mediaDevices.enumerateDevices === 'function' && typeof navigator.mediaDevices.getUserMedia === 'function';\n  }\n  async function getCameraDevices() {\n    if (!hasMediaDevices()) {\n      console.error('浏览器不支持 mediaDevices.enumerateDevices API 或未在安全上下文中，无法获取摄像头设备列表');\n      return [];\n    }\n    try {\n      const allDevices = await navigator.mediaDevices.enumerateDevices();\n      return allDevices.filter(d => d.kind === 'videoinput');\n    } catch (error) {\n      console.error('无法获取摄像头设备列表:', error);\n      return [];\n    }\n  }\n  async function initializeCamera(deviceId) {\n    stopCamera(); // 先关闭已有流\n\n    if (!hasMediaDevices()) {\n      alert('摄像头功能无法使用，请确保浏览器支持并且页面通过HTTPS访问');\n      throw new Error('浏览器不支持 mediaDevices.getUserMedia 或未在安全上下文中');\n    }\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: deviceId ? {\n          deviceId: {\n            exact: deviceId\n          }\n        } : true,\n        audio: false\n      });\n      currentStreamRef.current = stream;\n      currentCameraDeviceIdRef.current = deviceId;\n      setStream(stream);\n      setSelectedDeviceId(deviceId);\n      setIsCameraOn(true);\n      return stream;\n    } catch (error) {\n      console.error('摄像头初始化失败:', error);\n      alert('摄像头初始化失败: ' + error.message);\n      throw error;\n    }\n  }\n  function stopCamera() {\n    if (currentStreamRef.current) {\n      currentStreamRef.current.getTracks().forEach(track => track.stop());\n      currentStreamRef.current = null;\n      currentCameraDeviceIdRef.current = null;\n    }\n    setStream(null);\n    setIsCameraOn(false);\n  }\n  async function switchCamera() {\n    if (!isCameraOn) {\n      console.log('摄像头未打开，无法切换');\n      return;\n    }\n    const videoDevices = await getCameraDevices();\n    if (videoDevices.length < 2) {\n      console.log('仅有一个摄像头，无法切换');\n      return;\n    }\n    let nextDeviceId;\n    for (const device of videoDevices) {\n      if (device.deviceId !== currentCameraDeviceIdRef.current) {\n        nextDeviceId = device.deviceId;\n        break;\n      }\n    }\n    if (!nextDeviceId) nextDeviceId = videoDevices[0].deviceId;\n    try {\n      await initializeCamera(nextDeviceId);\n      console.log('摄像头已切换:', nextDeviceId);\n    } catch (e) {\n      console.error('切换失败:', e);\n    }\n  }\n  async function toggleCameraOnOff() {\n    if (isCameraOn) {\n      stopCamera();\n    } else {\n      let deviceIdToUse = selectedDeviceId;\n      if (!deviceIdToUse) {\n        const videoDevices = await getCameraDevices();\n        setDevices(videoDevices);\n        if (videoDevices.length === 0) {\n          alert('无摄像头设备');\n          return;\n        }\n        deviceIdToUse = videoDevices[0].deviceId;\n      }\n      try {\n        await initializeCamera(deviceIdToUse);\n      } catch {}\n    }\n  }\n\n  // 单击和双击区分处理\n  function handleButtonClick() {\n    if (clickTimeoutRef.current) {\n      clearTimeout(clickTimeoutRef.current);\n      clickTimeoutRef.current = null;\n    }\n    clickTimeoutRef.current = setTimeout(() => {\n      switchCamera();\n      clickTimeoutRef.current = null;\n    }, 250); // 单击延迟250ms触发\n  }\n  function handleButtonDoubleClick() {\n    if (clickTimeoutRef.current) {\n      clearTimeout(clickTimeoutRef.current);\n      clickTimeoutRef.current = null;\n    }\n    toggleCameraOnOff();\n  }\n  useEffect(() => {\n    async function init() {\n      if (!hasMediaDevices()) {\n        console.warn('浏览器不支持 mediaDevices API 或未在安全上下文中，摄像头功能不可用');\n        return;\n      }\n      const videoDevices = await getCameraDevices();\n      setDevices(videoDevices);\n    }\n    init();\n    return () => {\n      stopCamera();\n      if (clickTimeoutRef.current) clearTimeout(clickTimeoutRef.current);\n      if (floatingContainerRef.current) {\n        floatingContainerRef.current.removeEventListener('mousedown', onMouseDown);\n        floatingContainerRef.current.removeEventListener('touchstart', onTouchStart);\n      }\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      document.removeEventListener('touchmove', onTouchMove);\n      document.removeEventListener('touchend', onTouchEnd);\n    };\n  }, []);\n  useEffect(() => {\n    const video = videoRef.current;\n    if (video && stream) {\n      video.srcObject = stream;\n      const playPromise = video.play();\n      if (playPromise !== undefined) {\n        playPromise.catch(e => {\n          console.warn('video.play()失败:', e);\n        });\n      }\n    } else if (video) {\n      video.srcObject = null;\n    }\n  }, [stream]);\n\n  // 拖动相关状态\n  const isDraggingRef = useRef(false);\n  const offsetXRef = useRef(0);\n  const offsetYRef = useRef(0);\n  const onMouseDown = e => {\n    if (!floatingContainerRef.current) return;\n    isDraggingRef.current = true;\n    offsetXRef.current = e.clientX - floatingContainerRef.current.offsetLeft;\n    offsetYRef.current = e.clientY - floatingContainerRef.current.offsetTop;\n    floatingContainerRef.current.style.cursor = 'grabbing';\n    e.preventDefault();\n  };\n  const onMouseMove = e => {\n    if (isDraggingRef.current && floatingContainerRef.current) {\n      let newLeft = e.clientX - offsetXRef.current;\n      let newTop = e.clientY - offsetYRef.current;\n\n      // 限制拖动范围\n      const container = floatingContainerRef.current;\n      const maxLeft = window.innerWidth - container.offsetWidth;\n      const maxTop = window.innerHeight - container.offsetHeight;\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\n      newTop = Math.min(Math.max(0, newTop), maxTop);\n      container.style.left = `${newLeft}px`;\n      container.style.top = `${newTop}px`;\n    }\n  };\n  const onMouseUp = () => {\n    if (floatingContainerRef.current) {\n      isDraggingRef.current = false;\n      floatingContainerRef.current.style.cursor = 'grab';\n\n      // 保存位置\n      const container = floatingContainerRef.current;\n      localStorage.setItem(storageKey, JSON.stringify({\n        left: container.offsetLeft,\n        top: container.offsetTop\n      }));\n    }\n  };\n  const onTouchStart = e => {\n    if (!floatingContainerRef.current || e.touches.length === 0) return;\n    isDraggingRef.current = true;\n    const touch = e.touches[0];\n    offsetXRef.current = touch.clientX - floatingContainerRef.current.offsetLeft;\n    offsetYRef.current = touch.clientY - floatingContainerRef.current.offsetTop;\n    floatingContainerRef.current.style.cursor = 'grabbing';\n  };\n  const onTouchMove = e => {\n    if (isDraggingRef.current && floatingContainerRef.current && e.touches.length > 0) {\n      const touch = e.touches[0];\n      let newLeft = touch.clientX - offsetXRef.current;\n      let newTop = touch.clientY - offsetYRef.current;\n      const container = floatingContainerRef.current;\n      const maxLeft = window.innerWidth - container.offsetWidth;\n      const maxTop = window.innerHeight - container.offsetHeight;\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\n      newTop = Math.min(Math.max(0, newTop), maxTop);\n      container.style.left = `${newLeft}px`;\n      container.style.top = `${newTop}px`;\n      e.preventDefault();\n    }\n  };\n  const onTouchEnd = () => {\n    if (floatingContainerRef.current) {\n      isDraggingRef.current = false;\n      floatingContainerRef.current.style.cursor = 'grab';\n\n      // 保存位置\n      const container = floatingContainerRef.current;\n      localStorage.setItem(storageKey, JSON.stringify({\n        left: container.offsetLeft,\n        top: container.offsetTop\n      }));\n    }\n  };\n  useEffect(() => {\n    if (!floatingContainerRef.current) return;\n    const container = floatingContainerRef.current;\n\n    // 恢复位置\n    const savedPosStr = localStorage.getItem(storageKey);\n    let left = 10;\n    let top = 10;\n    if (savedPosStr) {\n      try {\n        const pos = JSON.parse(savedPosStr);\n        if (typeof pos.left === 'number' && typeof pos.top === 'number' && pos.left >= 0 && pos.top >= 0) {\n          left = pos.left;\n          top = pos.top;\n        }\n      } catch {\n        // 解析失败忽略\n      }\n    }\n    container.style.position = 'fixed';\n    container.style.left = `${left}px`;\n    container.style.top = `${top}px`;\n    container.style.cursor = 'grab';\n    container.style.zIndex = '10000';\n    container.style.width = '160px';\n\n    // 绑定拖拽事件\n    container.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    container.addEventListener('touchstart', onTouchStart);\n    document.addEventListener('touchmove', onTouchMove);\n    document.addEventListener('touchend', onTouchEnd);\n    return () => {\n      container.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      container.removeEventListener('touchstart', onTouchStart);\n      document.removeEventListener('touchmove', onTouchMove);\n      document.removeEventListener('touchend', onTouchEnd);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        #video {\n          border-radius: 50%;\n          object-fit: cover;\n          width: 120px;\n          height: 120px;\n          background-color: black;\n          display: block;\n          user-select: none;\n          pointer-events: none;\n        }\n        #floating-container {\n          user-select: none;\n          background: transparent;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 8px;\n          padding: 4px;\n          box-sizing: border-box;\n        }\n        #toggle-switch-camera {\n          cursor: pointer;\n          width: 36px;\n          height: 36px;\n          border-radius: 50%;\n          border: 1px solid #00e5ff;\n          background-color: transparent;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          transition: background-color 0.3s, border-color 0.3s;\n        }\n        #toggle-switch-camera:hover {\n          background-color: rgba(0, 229, 255, 0.15);\n          border-color: #00e5ff;\n        }\n        #toggle-switch-camera img {\n          width: 35px;\n          height: 35px;\n          pointer-events: none;\n          user-select: none;\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"floating-container\",\n      ref: floatingContainerRef,\n      children: [isCameraOn && /*#__PURE__*/_jsxDEV(\"video\", {\n        id: \"video\",\n        ref: videoRef,\n        autoPlay: true,\n        playsInline: true,\n        muted: true,\n        onDragStart: e => e.preventDefault()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"toggle-switch-camera\",\n        type: \"button\",\n        \"aria-label\": isCameraOn ? '切换摄像头' : '打开摄像头',\n        onClick: handleButtonClick,\n        onDoubleClick: handleButtonDoubleClick,\n        title: isCameraOn ? '单击切换摄像头，双击关闭摄像头' : '双击打开摄像头',\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: cameraSwitchIcon,\n          alt: \"\\u5207\\u6362\\u6444\\u50CF\\u5934\",\n          draggable: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(CameraControl, \"6jGVOCa3ojTagNz36qtbsJHz+0M=\");\n_c = CameraControl;\nvar _c;\n$RefreshReg$(_c, \"CameraControl\");","map":{"version":3,"names":["React","useEffect","useState","useRef","cameraSwitchIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","CameraControl","_s","videoRef","floatingContainerRef","stream","setStream","devices","setDevices","selectedDeviceId","setSelectedDeviceId","isCameraOn","setIsCameraOn","currentStreamRef","currentCameraDeviceIdRef","clickTimeoutRef","storageKey","hasMediaDevices","navigator","mediaDevices","enumerateDevices","getUserMedia","getCameraDevices","console","error","allDevices","filter","d","kind","initializeCamera","deviceId","stopCamera","alert","Error","video","exact","audio","current","message","getTracks","forEach","track","stop","switchCamera","log","videoDevices","length","nextDeviceId","device","e","toggleCameraOnOff","deviceIdToUse","handleButtonClick","clearTimeout","setTimeout","handleButtonDoubleClick","init","warn","removeEventListener","onMouseDown","onTouchStart","document","onMouseMove","onMouseUp","onTouchMove","onTouchEnd","srcObject","playPromise","play","undefined","catch","isDraggingRef","offsetXRef","offsetYRef","clientX","offsetLeft","clientY","offsetTop","style","cursor","preventDefault","newLeft","newTop","container","maxLeft","window","innerWidth","offsetWidth","maxTop","innerHeight","offsetHeight","Math","min","max","left","top","localStorage","setItem","JSON","stringify","touches","touch","savedPosStr","getItem","pos","parse","position","zIndex","width","addEventListener","children","fileName","_jsxFileName","lineNumber","columnNumber","id","ref","autoPlay","playsInline","muted","onDragStart","type","onClick","onDoubleClick","title","src","alt","draggable","_c","$RefreshReg$"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/CameraControl.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\r\nimport cameraSwitchIcon from '../assets/icons/camera-switch.png';\r\n\r\nexport default function CameraControl() {\r\n  const videoRef = useRef(null);\r\n  const floatingContainerRef = useRef(null);\r\n\r\n  const [stream, setStream] = useState(null);\r\n  const [devices, setDevices] = useState([]);\r\n  const [selectedDeviceId, setSelectedDeviceId] = useState(null);\r\n  const [isCameraOn, setIsCameraOn] = useState(false);\r\n\r\n  const currentStreamRef = useRef(null);\r\n  const currentCameraDeviceIdRef = useRef(null);\r\n\r\n  // 用于区分单击和双击\r\n  const clickTimeoutRef = useRef(null);\r\n\r\n  // localStorage key，保存浮动容器位置\r\n  const storageKey = 'cameraControlFloatingPosition';\r\n\r\n  // 新增：安全上下文及API支持判断\r\n  function hasMediaDevices() {\r\n    return (\r\n      typeof navigator !== 'undefined' &&\r\n      navigator.mediaDevices &&\r\n      typeof navigator.mediaDevices.enumerateDevices === 'function' &&\r\n      typeof navigator.mediaDevices.getUserMedia === 'function'\r\n    );\r\n  }\r\n\r\n  async function getCameraDevices() {\r\n    if (!hasMediaDevices()) {\r\n      console.error('浏览器不支持 mediaDevices.enumerateDevices API 或未在安全上下文中，无法获取摄像头设备列表');\r\n      return [];\r\n    }\r\n    try {\r\n      const allDevices = await navigator.mediaDevices.enumerateDevices();\r\n      return allDevices.filter((d) => d.kind === 'videoinput');\r\n    } catch (error) {\r\n      console.error('无法获取摄像头设备列表:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async function initializeCamera(deviceId) {\r\n    stopCamera(); // 先关闭已有流\r\n\r\n    if (!hasMediaDevices()) {\r\n      alert('摄像头功能无法使用，请确保浏览器支持并且页面通过HTTPS访问');\r\n      throw new Error('浏览器不支持 mediaDevices.getUserMedia 或未在安全上下文中');\r\n    }\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({\r\n        video: deviceId ? { deviceId: { exact: deviceId } } : true,\r\n        audio: false,\r\n      });\r\n      currentStreamRef.current = stream;\r\n      currentCameraDeviceIdRef.current = deviceId;\r\n      setStream(stream);\r\n      setSelectedDeviceId(deviceId);\r\n      setIsCameraOn(true);\r\n      return stream;\r\n    } catch (error) {\r\n      console.error('摄像头初始化失败:', error);\r\n      alert('摄像头初始化失败: ' + error.message);\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  function stopCamera() {\r\n    if (currentStreamRef.current) {\r\n      currentStreamRef.current.getTracks().forEach((track) => track.stop());\r\n      currentStreamRef.current = null;\r\n      currentCameraDeviceIdRef.current = null;\r\n    }\r\n    setStream(null);\r\n    setIsCameraOn(false);\r\n  }\r\n\r\n  async function switchCamera() {\r\n    if (!isCameraOn) {\r\n      console.log('摄像头未打开，无法切换');\r\n      return;\r\n    }\r\n    const videoDevices = await getCameraDevices();\r\n    if (videoDevices.length < 2) {\r\n      console.log('仅有一个摄像头，无法切换');\r\n      return;\r\n    }\r\n\r\n    let nextDeviceId;\r\n    for (const device of videoDevices) {\r\n      if (device.deviceId !== currentCameraDeviceIdRef.current) {\r\n        nextDeviceId = device.deviceId;\r\n        break;\r\n      }\r\n    }\r\n    if (!nextDeviceId) nextDeviceId = videoDevices[0].deviceId;\r\n\r\n    try {\r\n      await initializeCamera(nextDeviceId);\r\n      console.log('摄像头已切换:', nextDeviceId);\r\n    } catch (e) {\r\n      console.error('切换失败:', e);\r\n    }\r\n  }\r\n\r\n  async function toggleCameraOnOff() {\r\n    if (isCameraOn) {\r\n      stopCamera();\r\n    } else {\r\n      let deviceIdToUse = selectedDeviceId;\r\n      if (!deviceIdToUse) {\r\n        const videoDevices = await getCameraDevices();\r\n        setDevices(videoDevices);\r\n        if (videoDevices.length === 0) {\r\n          alert('无摄像头设备');\r\n          return;\r\n        }\r\n        deviceIdToUse = videoDevices[0].deviceId;\r\n      }\r\n      try {\r\n        await initializeCamera(deviceIdToUse);\r\n      } catch {}\r\n    }\r\n  }\r\n\r\n  // 单击和双击区分处理\r\n  function handleButtonClick() {\r\n    if (clickTimeoutRef.current) {\r\n      clearTimeout(clickTimeoutRef.current);\r\n      clickTimeoutRef.current = null;\r\n    }\r\n    clickTimeoutRef.current = setTimeout(() => {\r\n      switchCamera();\r\n      clickTimeoutRef.current = null;\r\n    }, 250); // 单击延迟250ms触发\r\n  }\r\n\r\n  function handleButtonDoubleClick() {\r\n    if (clickTimeoutRef.current) {\r\n      clearTimeout(clickTimeoutRef.current);\r\n      clickTimeoutRef.current = null;\r\n    }\r\n    toggleCameraOnOff();\r\n  }\r\n\r\n  useEffect(() => {\r\n    async function init() {\r\n      if (!hasMediaDevices()) {\r\n        console.warn('浏览器不支持 mediaDevices API 或未在安全上下文中，摄像头功能不可用');\r\n        return;\r\n      }\r\n      const videoDevices = await getCameraDevices();\r\n      setDevices(videoDevices);\r\n    }\r\n    init();\r\n\r\n    return () => {\r\n      stopCamera();\r\n      if (clickTimeoutRef.current) clearTimeout(clickTimeoutRef.current);\r\n      if (floatingContainerRef.current) {\r\n        floatingContainerRef.current.removeEventListener('mousedown', onMouseDown);\r\n        floatingContainerRef.current.removeEventListener('touchstart', onTouchStart);\r\n      }\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (video && stream) {\r\n      video.srcObject = stream;\r\n      const playPromise = video.play();\r\n      if (playPromise !== undefined) {\r\n        playPromise.catch((e) => {\r\n          console.warn('video.play()失败:', e);\r\n        });\r\n      }\r\n    } else if (video) {\r\n      video.srcObject = null;\r\n    }\r\n  }, [stream]);\r\n\r\n  // 拖动相关状态\r\n  const isDraggingRef = useRef(false);\r\n  const offsetXRef = useRef(0);\r\n  const offsetYRef = useRef(0);\r\n\r\n  const onMouseDown = (e) => {\r\n    if (!floatingContainerRef.current) return;\r\n    isDraggingRef.current = true;\r\n    offsetXRef.current = e.clientX - floatingContainerRef.current.offsetLeft;\r\n    offsetYRef.current = e.clientY - floatingContainerRef.current.offsetTop;\r\n    floatingContainerRef.current.style.cursor = 'grabbing';\r\n    e.preventDefault();\r\n  };\r\n  const onMouseMove = (e) => {\r\n    if (isDraggingRef.current && floatingContainerRef.current) {\r\n      let newLeft = e.clientX - offsetXRef.current;\r\n      let newTop = e.clientY - offsetYRef.current;\r\n\r\n      // 限制拖动范围\r\n      const container = floatingContainerRef.current;\r\n      const maxLeft = window.innerWidth - container.offsetWidth;\r\n      const maxTop = window.innerHeight - container.offsetHeight;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      container.style.left = `${newLeft}px`;\r\n      container.style.top = `${newTop}px`;\r\n    }\r\n  };\r\n  const onMouseUp = () => {\r\n    if (floatingContainerRef.current) {\r\n      isDraggingRef.current = false;\r\n      floatingContainerRef.current.style.cursor = 'grab';\r\n\r\n      // 保存位置\r\n      const container = floatingContainerRef.current;\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: container.offsetLeft, top: container.offsetTop })\r\n      );\r\n    }\r\n  };\r\n  const onTouchStart = (e) => {\r\n    if (!floatingContainerRef.current || e.touches.length === 0) return;\r\n    isDraggingRef.current = true;\r\n    const touch = e.touches[0];\r\n    offsetXRef.current = touch.clientX - floatingContainerRef.current.offsetLeft;\r\n    offsetYRef.current = touch.clientY - floatingContainerRef.current.offsetTop;\r\n    floatingContainerRef.current.style.cursor = 'grabbing';\r\n  };\r\n  const onTouchMove = (e) => {\r\n    if (isDraggingRef.current && floatingContainerRef.current && e.touches.length > 0) {\r\n      const touch = e.touches[0];\r\n      let newLeft = touch.clientX - offsetXRef.current;\r\n      let newTop = touch.clientY - offsetYRef.current;\r\n\r\n      const container = floatingContainerRef.current;\r\n      const maxLeft = window.innerWidth - container.offsetWidth;\r\n      const maxTop = window.innerHeight - container.offsetHeight;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      container.style.left = `${newLeft}px`;\r\n      container.style.top = `${newTop}px`;\r\n\r\n      e.preventDefault();\r\n    }\r\n  };\r\n  const onTouchEnd = () => {\r\n    if (floatingContainerRef.current) {\r\n      isDraggingRef.current = false;\r\n      floatingContainerRef.current.style.cursor = 'grab';\r\n\r\n      // 保存位置\r\n      const container = floatingContainerRef.current;\r\n      localStorage.setItem(\r\n        storageKey,\r\n        JSON.stringify({ left: container.offsetLeft, top: container.offsetTop })\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!floatingContainerRef.current) return;\r\n    const container = floatingContainerRef.current;\r\n\r\n    // 恢复位置\r\n    const savedPosStr = localStorage.getItem(storageKey);\r\n    let left = 10;\r\n    let top = 10;\r\n    if (savedPosStr) {\r\n      try {\r\n        const pos = JSON.parse(savedPosStr);\r\n        if (\r\n          typeof pos.left === 'number' &&\r\n          typeof pos.top === 'number' &&\r\n          pos.left >= 0 &&\r\n          pos.top >= 0\r\n        ) {\r\n          left = pos.left;\r\n          top = pos.top;\r\n        }\r\n      } catch {\r\n        // 解析失败忽略\r\n      }\r\n    }\r\n\r\n    container.style.position = 'fixed';\r\n    container.style.left = `${left}px`;\r\n    container.style.top = `${top}px`;\r\n    container.style.cursor = 'grab';\r\n    container.style.zIndex = '10000';\r\n    container.style.width = '160px';\r\n\r\n    // 绑定拖拽事件\r\n    container.addEventListener('mousedown', onMouseDown);\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n\r\n    container.addEventListener('touchstart', onTouchStart);\r\n    document.addEventListener('touchmove', onTouchMove);\r\n    document.addEventListener('touchend', onTouchEnd);\r\n\r\n    return () => {\r\n      container.removeEventListener('mousedown', onMouseDown);\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n\r\n      container.removeEventListener('touchstart', onTouchStart);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        #video {\r\n          border-radius: 50%;\r\n          object-fit: cover;\r\n          width: 120px;\r\n          height: 120px;\r\n          background-color: black;\r\n          display: block;\r\n          user-select: none;\r\n          pointer-events: none;\r\n        }\r\n        #floating-container {\r\n          user-select: none;\r\n          background: transparent;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          gap: 8px;\r\n          padding: 4px;\r\n          box-sizing: border-box;\r\n        }\r\n        #toggle-switch-camera {\r\n          cursor: pointer;\r\n          width: 36px;\r\n          height: 36px;\r\n          border-radius: 50%;\r\n          border: 1px solid #00e5ff;\r\n          background-color: transparent;\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          transition: background-color 0.3s, border-color 0.3s;\r\n        }\r\n        #toggle-switch-camera:hover {\r\n          background-color: rgba(0, 229, 255, 0.15);\r\n          border-color: #00e5ff;\r\n        }\r\n        #toggle-switch-camera img {\r\n          width: 35px;\r\n          height: 35px;\r\n          pointer-events: none;\r\n          user-select: none;\r\n        }\r\n      `}</style>\r\n\r\n      <div id=\"floating-container\" ref={floatingContainerRef}>\r\n        {isCameraOn && (\r\n          <video\r\n            id=\"video\"\r\n            ref={videoRef}\r\n            autoPlay\r\n            playsInline\r\n            muted\r\n            onDragStart={(e) => e.preventDefault()}\r\n          />\r\n        )}\r\n        <button\r\n          id=\"toggle-switch-camera\"\r\n          type=\"button\"\r\n          aria-label={isCameraOn ? '切换摄像头' : '打开摄像头'}\r\n          onClick={handleButtonClick}\r\n          onDoubleClick={handleButtonDoubleClick}\r\n          title={isCameraOn ? '单击切换摄像头，双击关闭摄像头' : '双击打开摄像头'}\r\n        >\r\n          <img src={cameraSwitchIcon} alt=\"切换摄像头\" draggable={false} />\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}