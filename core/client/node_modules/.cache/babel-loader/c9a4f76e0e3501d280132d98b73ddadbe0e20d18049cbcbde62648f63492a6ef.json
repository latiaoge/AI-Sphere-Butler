{"ast":null,"code":"var _jsxFileName = \"D:\\\\XM\\\\AI-Sphere-Butler\\\\core\\\\client\\\\src\\\\components\\\\AudioTranscriber.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useRecorderContext } from '../contexts/RecorderProvider'; // 注意路径根据实际调整\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function AudioTranscriber() {\n  _s();\n  const {\n    isRecording,\n    transcription,\n    lang,\n    speakerVerification,\n    wakeWordEnabled,\n    wakeWords,\n    setLang,\n    setSpeakerVerification,\n    setWakeWordEnabled,\n    setWakeWords,\n    startRecording,\n    stopRecording,\n    setTranscription\n  } = useRecorderContext();\n  const [expanded, setExpanded] = useState(false);\n  const micButtonRef = useRef(null);\n  const wrapperRef = useRef(null);\n  const isDraggingRef = useRef(false);\n  const offsetXRef = useRef(0);\n  const offsetYRef = useRef(0);\n  const panelRef = useRef(null);\n  const panelDragState = useRef({\n    isDragging: false,\n    offsetX: 0,\n    offsetY: 0\n  });\n  const MIC_STORAGE_KEY = 'audioTranscriberMicButtonPosition';\n  const PANEL_STORAGE_KEY = 'audioTranscriberPanelPosition';\n  const [isSpeakerRecording, setIsSpeakerRecording] = useState(false);\n  const [speakerUploadStatus, setSpeakerUploadStatus] = useState('');\n  const speakerRecorderRef = useRef(null);\n  const speakerAudioChunksRef = useRef([]);\n  const [panelPosition, setPanelPosition] = useState(() => {\n    try {\n      const saved = localStorage.getItem(PANEL_STORAGE_KEY);\n      if (saved) return JSON.parse(saved);\n    } catch {}\n    return {\n      left: 100,\n      top: 100,\n      width: 360,\n      height: 280\n    };\n  });\n  const [micPosition, setMicPosition] = useState(() => {\n    try {\n      const saved = localStorage.getItem(MIC_STORAGE_KEY);\n      if (saved) return JSON.parse(saved);\n    } catch {}\n    return {\n      left: 26,\n      top: 26\n    };\n  });\n\n  // ...保留您原来sendTextMessage, startSpeakerRecording, stopSpeakerRecording等函数不变...\n\n  function startSpeakerRecording() {\n    if (isSpeakerRecording) return;\n    setSpeakerUploadStatus('请求麦克风权限...');\n    navigator.mediaDevices.getUserMedia({\n      audio: true\n    }).then(stream => {\n      setSpeakerUploadStatus('开始录音2秒...');\n      speakerAudioChunksRef.current = [];\n      let mediaRecorder;\n      try {\n        mediaRecorder = new MediaRecorder(stream, {\n          mimeType: 'audio/wav'\n        });\n      } catch (e) {\n        mediaRecorder = new MediaRecorder(stream);\n      }\n      speakerRecorderRef.current = mediaRecorder;\n      mediaRecorder.ondataavailable = event => {\n        if (event.data && event.data.size > 0) {\n          speakerAudioChunksRef.current.push(event.data);\n        }\n      };\n      mediaRecorder.onstop = async () => {\n        setSpeakerUploadStatus('录音结束，准备上传...');\n        const blob = new Blob(speakerAudioChunksRef.current, {\n          type: 'audio/wav'\n        });\n        try {\n          const formData = new FormData();\n          formData.append('file', blob, 'speaker.wav');\n          const uploadUrl = 'http://192.168.168.77:6007/api/uploadSpeaker';\n          const res = await fetch(uploadUrl, {\n            method: 'POST',\n            body: formData\n          });\n          if (!res.ok) throw new Error(`上传失败，状态码: ${res.status}`);\n          const result = await res.json();\n          setSpeakerUploadStatus('上传成功');\n          console.log('上传成功，服务器返回：', result);\n        } catch (err) {\n          setSpeakerUploadStatus('上传失败: ' + err.message);\n          console.error('上传失败', err);\n        }\n        stream.getTracks().forEach(track => track.stop());\n        setTimeout(() => setSpeakerUploadStatus(''), 3000);\n        setIsSpeakerRecording(false);\n      };\n      mediaRecorder.start();\n      setIsSpeakerRecording(true);\n      setTimeout(() => {\n        if (speakerRecorderRef.current && speakerRecorderRef.current.state !== 'inactive') {\n          speakerRecorderRef.current.stop();\n        }\n      }, 2000);\n    }).catch(err => {\n      setSpeakerUploadStatus('获取麦克风权限失败: ' + err.message);\n      console.error('获取麦克风权限失败', err);\n    });\n  }\n  function stopSpeakerRecording() {\n    if (speakerRecorderRef.current && speakerRecorderRef.current.state !== 'inactive') {\n      speakerRecorderRef.current.stop();\n      setIsSpeakerRecording(false);\n    }\n  }\n  const saveMicPosition = pos => {\n    setMicPosition(pos);\n    try {\n      localStorage.setItem(MIC_STORAGE_KEY, JSON.stringify(pos));\n    } catch {}\n  };\n  const savePanelPosition = pos => {\n    setPanelPosition(pos);\n    try {\n      localStorage.setItem(PANEL_STORAGE_KEY, JSON.stringify(pos));\n    } catch {}\n  };\n\n  // 拖拽逻辑 - 麦克风按钮（折叠态）\n  useEffect(() => {\n    if (!micButtonRef.current || !wrapperRef.current) return;\n    const button = micButtonRef.current;\n    const wrapper = wrapperRef.current;\n    let left = micPosition.left;\n    let top = micPosition.top;\n    button.style.position = 'absolute';\n    button.style.left = `${left}px`;\n    button.style.top = `${top}px`;\n    button.style.zIndex = '10000';\n    button.style.cursor = 'grab';\n    isDraggingRef.current = false;\n    offsetXRef.current = 0;\n    offsetYRef.current = 0;\n    const onMouseDown = e => {\n      if (e.button !== 0) return;\n      isDraggingRef.current = true;\n      const wrapperRect = wrapper.getBoundingClientRect();\n      offsetXRef.current = e.clientX - wrapperRect.left - button.offsetLeft;\n      offsetYRef.current = e.clientY - wrapperRect.top - button.offsetTop;\n      button.style.cursor = 'grabbing';\n      e.preventDefault();\n    };\n    const onMouseMove = e => {\n      if (!isDraggingRef.current) return;\n      const wrapperRect = wrapper.getBoundingClientRect();\n      let newLeft = e.clientX - wrapperRect.left - offsetXRef.current;\n      let newTop = e.clientY - wrapperRect.top - offsetYRef.current;\n      newLeft = Math.min(Math.max(0, newLeft), wrapper.clientWidth - button.offsetWidth);\n      newTop = Math.min(Math.max(0, newTop), wrapper.clientHeight - button.offsetHeight);\n      button.style.left = `${newLeft}px`;\n      button.style.top = `${newTop}px`;\n    };\n    const onMouseUp = () => {\n      if (!isDraggingRef.current) return;\n      isDraggingRef.current = false;\n      button.style.cursor = 'grab';\n      localStorage.setItem(MIC_STORAGE_KEY, JSON.stringify({\n        left: button.offsetLeft,\n        top: button.offsetTop\n      }));\n      setMicPosition({\n        left: button.offsetLeft,\n        top: button.offsetTop\n      });\n    };\n    const onTouchStart = e => {\n      if (e.touches.length === 0) return;\n      isDraggingRef.current = true;\n      const wrapperRect = wrapper.getBoundingClientRect();\n      const touch = e.touches[0];\n      offsetXRef.current = touch.clientX - wrapperRect.left - button.offsetLeft;\n      offsetYRef.current = touch.clientY - wrapperRect.top - button.offsetTop;\n      button.style.cursor = 'grabbing';\n      e.preventDefault();\n    };\n    const onTouchMove = e => {\n      if (!isDraggingRef.current || e.touches.length === 0) return;\n      const wrapperRect = wrapper.getBoundingClientRect();\n      const touch = e.touches[0];\n      let newLeft = touch.clientX - wrapperRect.left - offsetXRef.current;\n      let newTop = touch.clientY - wrapperRect.top - offsetYRef.current;\n      newLeft = Math.min(Math.max(0, newLeft), wrapper.clientWidth - button.offsetWidth);\n      newTop = Math.min(Math.max(0, newTop), wrapper.clientHeight - button.offsetHeight);\n      button.style.left = `${newLeft}px`;\n      button.style.top = `${newTop}px`;\n      e.preventDefault();\n    };\n    const onTouchEnd = () => {\n      if (!isDraggingRef.current) return;\n      isDraggingRef.current = false;\n      button.style.cursor = 'grab';\n      localStorage.setItem(MIC_STORAGE_KEY, JSON.stringify({\n        left: button.offsetLeft,\n        top: button.offsetTop\n      }));\n      setMicPosition({\n        left: button.offsetLeft,\n        top: button.offsetTop\n      });\n    };\n    button.addEventListener('mousedown', onMouseDown);\n    document.addEventListener('mousemove', onMouseMove);\n    document.addEventListener('mouseup', onMouseUp);\n    button.addEventListener('touchstart', onTouchStart, {\n      passive: false\n    });\n    document.addEventListener('touchmove', onTouchMove, {\n      passive: false\n    });\n    document.addEventListener('touchend', onTouchEnd);\n    return () => {\n      button.removeEventListener('mousedown', onMouseDown);\n      document.removeEventListener('mousemove', onMouseMove);\n      document.removeEventListener('mouseup', onMouseUp);\n      button.removeEventListener('touchstart', onTouchStart);\n      document.removeEventListener('touchmove', onTouchMove);\n      document.removeEventListener('touchend', onTouchEnd);\n    };\n  }, [micPosition]);\n\n  // 拖拽逻辑 - 面板（展开态）\n  useEffect(() => {\n    if (!expanded || !panelRef.current) return;\n    const panel = panelRef.current;\n    panel.style.position = 'fixed';\n    panel.style.left = `${panelPosition.left}px`;\n    panel.style.top = `${panelPosition.top}px`;\n    panel.style.width = `${panelPosition.width}px`;\n    panel.style.height = `${panelPosition.height}px`;\n    panel.style.zIndex = 9999;\n    panel.style.cursor = 'grab';\n    const onMouseDown = e => {\n      if (e.button !== 0) return;\n      if (!e.target.closest('.panel-header')) return;\n      panelDragState.current.isDragging = true;\n      panelDragState.current.offsetX = e.clientX - panel.offsetLeft;\n      panelDragState.current.offsetY = e.clientY - panel.offsetTop;\n      panel.style.cursor = 'grabbing';\n      e.preventDefault();\n    };\n    const onMouseMove = e => {\n      if (!panelDragState.current.isDragging) return;\n      e.preventDefault();\n      let newLeft = e.clientX - panelDragState.current.offsetX;\n      let newTop = e.clientY - panelDragState.current.offsetY;\n      const maxLeft = window.innerWidth - panel.offsetWidth;\n      const maxTop = window.innerHeight - panel.offsetHeight;\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\n      newTop = Math.min(Math.max(0, newTop), maxTop);\n      panel.style.left = `${newLeft}px`;\n      panel.style.top = `${newTop}px`;\n    };\n    const onMouseUp = () => {\n      if (!panelDragState.current.isDragging) return;\n      panelDragState.current.isDragging = false;\n      panel.style.cursor = 'grab';\n      savePanelPosition({\n        left: panel.offsetLeft,\n        top: panel.offsetTop,\n        width: panel.offsetWidth,\n        height: panel.offsetHeight\n      });\n    };\n    const onTouchStart = e => {\n      if (e.touches.length === 0) return;\n      if (!e.target.closest('.panel-header')) return;\n      panelDragState.current.isDragging = true;\n      const touch = e.touches[0];\n      panelDragState.current.offsetX = touch.clientX - panel.offsetLeft;\n      panelDragState.current.offsetY = touch.clientY - panel.offsetTop;\n      panel.style.cursor = 'grabbing';\n      e.preventDefault();\n    };\n    const onTouchMove = e => {\n      if (!panelDragState.current.isDragging) return;\n      const touch = e.touches[0];\n      let newLeft = touch.clientX - panelDragState.current.offsetX;\n      let newTop = touch.clientY - panelDragState.current.offsetY;\n      const maxLeft = window.innerWidth - panel.offsetWidth;\n      const maxTop = window.innerHeight - panel.offsetHeight;\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\n      newTop = Math.min(Math.max(0, newTop), maxTop);\n      panel.style.left = `${newLeft}px`;\n      panel.style.top = `${newTop}px`;\n      e.preventDefault();\n    };\n    const onTouchEnd = () => {\n      if (!panelDragState.current.isDragging) return;\n      panelDragState.current.isDragging = false;\n      panel.style.cursor = 'grab';\n      savePanelPosition({\n        left: panel.offsetLeft,\n        top: panel.offsetTop,\n        width: panel.offsetWidth,\n        height: panel.offsetHeight\n      });\n    };\n    panel.addEventListener('mousedown', onMouseDown);\n    window.addEventListener('mousemove', onMouseMove);\n    window.addEventListener('mouseup', onMouseUp);\n    panel.addEventListener('touchstart', onTouchStart, {\n      passive: false\n    });\n    window.addEventListener('touchmove', onTouchMove, {\n      passive: false\n    });\n    window.addEventListener('touchend', onTouchEnd);\n    return () => {\n      panel.removeEventListener('mousedown', onMouseDown);\n      window.removeEventListener('mousemove', onMouseMove);\n      window.removeEventListener('mouseup', onMouseUp);\n      panel.removeEventListener('touchstart', onTouchStart);\n      window.removeEventListener('touchmove', onTouchMove);\n      window.removeEventListener('touchend', onTouchEnd);\n    };\n  }, [expanded, panelPosition]);\n\n  // 双击节流，单击/双击事件合并处理\n  const lastClickTimeRef = useRef(0);\n  const DOUBLE_CLICK_DELAY = 400;\n  const handleMicClick = () => {\n    const now = Date.now();\n    if (now - lastClickTimeRef.current < DOUBLE_CLICK_DELAY) {\n      setExpanded(prev => !prev);\n    } else {\n      if (isRecording) stopRecording();else startRecording();\n    }\n    lastClickTimeRef.current = now;\n  };\n  const [ripples, setRipples] = useState([]);\n  const rippleCountRef = useRef(0);\n  const speakerButtonRef = useRef(null);\n  const handleSpeakerRecordClick = event => {\n    if (isRecording || isSpeakerRecording) return;\n    createRipple(event);\n    startSpeakerRecording();\n  };\n  const createRipple = event => {\n    if (!speakerButtonRef.current) return;\n    const rect = speakerButtonRef.current.getBoundingClientRect();\n    const size = Math.max(rect.width, rect.height);\n    const x = event.clientX - rect.left - size / 2;\n    const y = event.clientY - rect.top - size / 2;\n    const newRipple = {\n      key: rippleCountRef.current,\n      size,\n      x,\n      y\n    };\n    rippleCountRef.current += 1;\n    setRipples(oldRipples => [...oldRipples, newRipple]);\n    setTimeout(() => {\n      setRipples(oldRipples => oldRipples.filter(r => r.key !== newRipple.key));\n    }, 1000);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        /* 样式保持和之前相同，省略为简洁 */\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this), !expanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"mic-button-wrapper\",\n      ref: wrapperRef,\n      style: {\n        position: 'fixed',\n        left: micPosition.left,\n        top: micPosition.top,\n        zIndex: 10000,\n        backgroundColor: 'rgba(0, 229, 255, 0.8)',\n        /* 显眼背景，方便调试 */\n        borderRadius: 28,\n        width: 68,\n        height: 68,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        boxShadow: '0 0 12px rgba(0,229,255,0.7)',\n        userSelect: 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"mic-button\",\n        ref: micButtonRef,\n        className: isRecording ? 'recording' : '',\n        onClick: handleMicClick,\n        \"aria-label\": isRecording ? '停止录音，双击展开面板' : '开始录音，双击展开面板',\n        title: isRecording ? '点击停止录音，双击展开面板' : '点击开始录音，双击展开面板',\n        type: \"button\",\n        disabled: isSpeakerRecording,\n        style: {\n          background: 'none',\n          border: 'none',\n          padding: 0,\n          outline: 'none',\n          cursor: 'pointer',\n          width: '48px',\n          height: '48px',\n          filter: isRecording ? 'drop-shadow(0 0 5px red)' : 'none',\n          userSelect: 'none'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/core/client/ai-butler/image/mic-icon.png\",\n          alt: \"\\u9EA6\\u514B\\u98CE\",\n          draggable: false,\n          style: {\n            width: 48,\n            height: 48\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 9\n    }, this), expanded && /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"audio-transcriber-panel\",\n      ref: panelRef,\n      role: \"region\",\n      \"aria-label\": \"\\u8BED\\u97F3\\u8BC6\\u522B\\u9762\\u677F\",\n      style: {\n        position: 'fixed',\n        left: panelPosition.left,\n        top: panelPosition.top,\n        width: panelPosition.width,\n        height: panelPosition.height,\n        backgroundColor: 'rgba(0, 0, 0, 0.85)',\n        borderRadius: 8,\n        boxShadow: '0 0 12px rgba(0, 229, 255, 0.8)',\n        color: 'white',\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n        userSelect: 'none',\n        zIndex: 10000\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-header\",\n        style: {\n          height: 40,\n          backgroundColor: 'rgba(0, 229, 255, 0.2)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'space-between',\n          padding: '0 12px',\n          cursor: 'grab',\n          userSelect: 'none'\n        },\n        title: \"\\u62D6\\u52A8\\u6B64\\u533A\\u57DF\\u79FB\\u52A8\\u9762\\u677F\\uFF0C\\u53CC\\u51FB\\u9EA6\\u514B\\u98CE\\u6309\\u94AE\\u6298\\u53E0\\u9762\\u677F\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `mic-button${isRecording ? ' recording' : ''}`,\n          onClick: handleMicClick,\n          \"aria-label\": isRecording ? '停止录音，双击折叠面板' : '开始录音，双击折叠面板',\n          title: isRecording ? '点击停止录音，双击折叠面板' : '点击开始录音，双击折叠面板',\n          type: \"button\",\n          disabled: isSpeakerRecording,\n          style: {\n            width: 36,\n            height: 36,\n            borderRadius: '50%',\n            backgroundColor: isRecording ? '#ff4d4d' : 'rgba(0,229,255,0.8)',\n            border: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            outline: 'none',\n            boxShadow: isRecording ? '0 0 10px red' : '0 0 10px rgba(0,229,255,0.7)',\n            userSelect: 'none',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/core/client/ai-butler/image/mic-icon.png\",\n            alt: \"\\u9EA6\\u514B\\u98CE\",\n            draggable: false,\n            style: {\n              width: 20,\n              height: 20\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 512,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 'bold',\n            fontSize: 16,\n            userSelect: 'none'\n          },\n          children: \"\\u8BED\\u97F3\\u8BC6\\u522B\\u9762\\u677F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 519,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: 12,\n            opacity: 0.7,\n            userSelect: 'none'\n          },\n          children: \"\\u53CC\\u51FB\\u9EA6\\u514B\\u98CE\\u6309\\u94AE\\u6298\\u53E0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 476,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          overflowY: 'auto',\n          padding: 12,\n          fontFamily: 'Arial, sans-serif',\n          fontSize: 14,\n          userSelect: 'text'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: 'rgba(255,255,255,0.05)',\n            borderRadius: 4,\n            minHeight: 120,\n            whiteSpace: 'pre-wrap',\n            padding: 8,\n            marginBottom: 12,\n            color: transcription ? 'white' : 'rgba(255,255,255,0.5)'\n          },\n          \"aria-live\": \"polite\",\n          \"aria-atomic\": \"true\",\n          role: \"region\",\n          tabIndex: 0,\n          children: transcription || '识别文字展示区...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 537,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: 6\n          },\n          children: [\"\\u8BED\\u8A00\\uFF1A\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"langInput\",\n            type: \"text\",\n            value: lang,\n            onChange: e => setLang(e.target.value),\n            disabled: isRecording || isSpeakerRecording,\n            placeholder: \"auto\",\n            autoComplete: \"off\",\n            style: {\n              marginLeft: 8,\n              padding: 4,\n              borderRadius: 4,\n              border: '1px solid #555',\n              backgroundColor: 'rgba(0,0,0,0.3)',\n              color: 'white',\n              width: 100\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 557,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 555,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            marginBottom: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"speakerVerificationCheckbox\",\n            type: \"checkbox\",\n            checked: speakerVerification,\n            disabled: isRecording || isSpeakerRecording,\n            onChange: e => setSpeakerVerification(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 578,\n            columnNumber: 15\n          }, this), \"\\u58F0\\u7EB9\\u8BC6\\u522B\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 577,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 8,\n            marginBottom: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"wakeWordToggleCheckbox\",\n            type: \"checkbox\",\n            checked: wakeWordEnabled,\n            disabled: isRecording || isSpeakerRecording,\n            onChange: e => setWakeWordEnabled(e.target.checked)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 589,\n            columnNumber: 15\n          }, this), \"\\u8BED\\u97F3\\u5524\\u9192\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: 6\n          },\n          children: [\"\\u5524\\u9192\\u8BCD\\uFF08\\u62FC\\u97F3\\uFF0C\\u591A\\u4E2A\\u7528\\u9017\\u53F7\\u5206\\u9694\\uFF09\\uFF1A\", /*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"wakeWordsInput\",\n            type: \"text\",\n            value: wakeWords,\n            onChange: e => setWakeWords(e.target.value),\n            disabled: isRecording || isSpeakerRecording || !wakeWordEnabled,\n            placeholder: \"\\u5982\\uFF1Azhan qi lai, ni hao xiao qian\",\n            autoComplete: \"off\",\n            style: {\n              marginLeft: 8,\n              padding: 4,\n              borderRadius: 4,\n              border: '1px solid #555',\n              backgroundColor: 'rgba(0,0,0,0.3)',\n              color: 'white',\n              width: '100%',\n              boxSizing: 'border-box'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 599,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"speaker-record-button\",\n          ref: speakerButtonRef,\n          onClick: handleSpeakerRecordClick,\n          disabled: isRecording || isSpeakerRecording,\n          type: \"button\",\n          \"aria-live\": \"polite\",\n          \"aria-label\": \"\\u5F55\\u5236\\u58F0\\u7EB9\",\n          title: \"\\u5F55\\u5236\\u7EA62\\u79D2\\u58F0\\u97F3\\u7528\\u4E8E\\u58F0\\u7EB9\\u8BC6\\u522B\\uFF0C\\u5F55\\u5236\\u5B8C\\u6210\\u81EA\\u52A8\\u4E0A\\u4F20\",\n          style: {\n            position: 'relative',\n            overflow: 'hidden',\n            background: 'rgba(255, 255, 255, 0.1)',\n            borderRadius: 16,\n            border: '1px solid rgba(255, 255, 255, 0.3)',\n            color: 'white',\n            padding: '3px 10px',\n            fontSize: 13,\n            fontWeight: 600,\n            cursor: 'pointer',\n            userSelect: 'none',\n            boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\n            backdropFilter: 'blur(10px)',\n            WebkitBackdropFilter: 'blur(12px)',\n            transition: 'all 0.3s ease',\n            display: 'inline-flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            outline: 'none',\n            borderImage: 'none'\n          },\n          children: [\"\\u5F55\\u5236\\u58F0\\u7EB9 (2\\u79D2)\", ripples.map(({\n            key,\n            size,\n            x,\n            y\n          }) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"ripple\",\n            style: {\n              width: size,\n              height: size,\n              top: y,\n              left: x\n            }\n          }, key, false, {\n            fileName: _jsxFileName,\n            lineNumber: 656,\n            columnNumber: 17\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 622,\n          columnNumber: 13\n        }, this), speakerUploadStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"speaker-record-status\",\n          role: \"alert\",\n          \"aria-live\": \"polite\",\n          \"aria-atomic\": \"true\",\n          style: {\n            marginTop: 8\n          },\n          children: speakerUploadStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(AudioTranscriber, \"5FxLKDOLZIOl953r0sGwju5vac8=\", false, function () {\n  return [useRecorderContext];\n});\n_c = AudioTranscriber;\nvar _c;\n$RefreshReg$(_c, \"AudioTranscriber\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useRecorderContext","jsxDEV","_jsxDEV","Fragment","_Fragment","AudioTranscriber","_s","isRecording","transcription","lang","speakerVerification","wakeWordEnabled","wakeWords","setLang","setSpeakerVerification","setWakeWordEnabled","setWakeWords","startRecording","stopRecording","setTranscription","expanded","setExpanded","micButtonRef","wrapperRef","isDraggingRef","offsetXRef","offsetYRef","panelRef","panelDragState","isDragging","offsetX","offsetY","MIC_STORAGE_KEY","PANEL_STORAGE_KEY","isSpeakerRecording","setIsSpeakerRecording","speakerUploadStatus","setSpeakerUploadStatus","speakerRecorderRef","speakerAudioChunksRef","panelPosition","setPanelPosition","saved","localStorage","getItem","JSON","parse","left","top","width","height","micPosition","setMicPosition","startSpeakerRecording","navigator","mediaDevices","getUserMedia","audio","then","stream","current","mediaRecorder","MediaRecorder","mimeType","e","ondataavailable","event","data","size","push","onstop","blob","Blob","type","formData","FormData","append","uploadUrl","res","fetch","method","body","ok","Error","status","result","json","console","log","err","message","error","getTracks","forEach","track","stop","setTimeout","start","state","catch","stopSpeakerRecording","saveMicPosition","pos","setItem","stringify","savePanelPosition","button","wrapper","style","position","zIndex","cursor","onMouseDown","wrapperRect","getBoundingClientRect","clientX","offsetLeft","clientY","offsetTop","preventDefault","onMouseMove","newLeft","newTop","Math","min","max","clientWidth","offsetWidth","clientHeight","offsetHeight","onMouseUp","onTouchStart","touches","length","touch","onTouchMove","onTouchEnd","addEventListener","document","passive","removeEventListener","panel","target","closest","maxLeft","window","innerWidth","maxTop","innerHeight","lastClickTimeRef","DOUBLE_CLICK_DELAY","handleMicClick","now","Date","prev","ripples","setRipples","rippleCountRef","speakerButtonRef","handleSpeakerRecordClick","createRipple","rect","x","y","newRipple","key","oldRipples","filter","r","children","fileName","_jsxFileName","lineNumber","columnNumber","id","ref","backgroundColor","borderRadius","display","alignItems","justifyContent","boxShadow","userSelect","className","onClick","title","disabled","background","border","padding","outline","src","alt","draggable","role","color","flexDirection","overflow","fontWeight","fontSize","opacity","flex","overflowY","fontFamily","minHeight","whiteSpace","marginBottom","tabIndex","value","onChange","placeholder","autoComplete","marginLeft","gap","checked","boxSizing","backdropFilter","WebkitBackdropFilter","transition","borderImage","map","marginTop","_c","$RefreshReg$"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/AudioTranscriber.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\nimport { useRecorderContext } from '../contexts/RecorderProvider'; // 注意路径根据实际调整\r\n\r\nexport default function AudioTranscriber() {\r\n  const {\r\n    isRecording,\r\n    transcription,\r\n    lang,\r\n    speakerVerification,\r\n    wakeWordEnabled,\r\n    wakeWords,\r\n    setLang,\r\n    setSpeakerVerification,\r\n    setWakeWordEnabled,\r\n    setWakeWords,\r\n    startRecording,\r\n    stopRecording,\r\n    setTranscription,\r\n  } = useRecorderContext();\r\n\r\n  const [expanded, setExpanded] = useState(false);\r\n  const micButtonRef = useRef(null);\r\n  const wrapperRef = useRef(null);\r\n  const isDraggingRef = useRef(false);\r\n  const offsetXRef = useRef(0);\r\n  const offsetYRef = useRef(0);\r\n  const panelRef = useRef(null);\r\n  const panelDragState = useRef({\r\n    isDragging: false,\r\n    offsetX: 0,\r\n    offsetY: 0,\r\n  });\r\n  const MIC_STORAGE_KEY = 'audioTranscriberMicButtonPosition';\r\n  const PANEL_STORAGE_KEY = 'audioTranscriberPanelPosition';\r\n\r\n  const [isSpeakerRecording, setIsSpeakerRecording] = useState(false);\r\n  const [speakerUploadStatus, setSpeakerUploadStatus] = useState('');\r\n  const speakerRecorderRef = useRef(null);\r\n  const speakerAudioChunksRef = useRef([]);\r\n\r\n  const [panelPosition, setPanelPosition] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(PANEL_STORAGE_KEY);\r\n      if (saved) return JSON.parse(saved);\r\n    } catch {}\r\n    return { left: 100, top: 100, width: 360, height: 280 };\r\n  });\r\n\r\n  const [micPosition, setMicPosition] = useState(() => {\r\n    try {\r\n      const saved = localStorage.getItem(MIC_STORAGE_KEY);\r\n      if (saved) return JSON.parse(saved);\r\n    } catch {}\r\n    return { left: 26, top: 26 };\r\n  });\r\n\r\n  // ...保留您原来sendTextMessage, startSpeakerRecording, stopSpeakerRecording等函数不变...\r\n\r\n  function startSpeakerRecording() {\r\n    if (isSpeakerRecording) return;\r\n    setSpeakerUploadStatus('请求麦克风权限...');\r\n    navigator.mediaDevices.getUserMedia({ audio: true })\r\n      .then((stream) => {\r\n        setSpeakerUploadStatus('开始录音2秒...');\r\n        speakerAudioChunksRef.current = [];\r\n        let mediaRecorder;\r\n        try {\r\n          mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/wav' });\r\n        } catch (e) {\r\n          mediaRecorder = new MediaRecorder(stream);\r\n        }\r\n        speakerRecorderRef.current = mediaRecorder;\r\n        mediaRecorder.ondataavailable = (event) => {\r\n          if (event.data && event.data.size > 0) {\r\n            speakerAudioChunksRef.current.push(event.data);\r\n          }\r\n        };\r\n        mediaRecorder.onstop = async () => {\r\n          setSpeakerUploadStatus('录音结束，准备上传...');\r\n          const blob = new Blob(speakerAudioChunksRef.current, { type: 'audio/wav' });\r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('file', blob, 'speaker.wav');\r\n            const uploadUrl = 'http://192.168.168.77:6007/api/uploadSpeaker';\r\n            const res = await fetch(uploadUrl, {\r\n              method: 'POST',\r\n              body: formData,\r\n            });\r\n            if (!res.ok) throw new Error(`上传失败，状态码: ${res.status}`);\r\n            const result = await res.json();\r\n            setSpeakerUploadStatus('上传成功');\r\n            console.log('上传成功，服务器返回：', result);\r\n          } catch (err) {\r\n            setSpeakerUploadStatus('上传失败: ' + err.message);\r\n            console.error('上传失败', err);\r\n          }\r\n          stream.getTracks().forEach(track => track.stop());\r\n          setTimeout(() => setSpeakerUploadStatus(''), 3000);\r\n          setIsSpeakerRecording(false);\r\n        };\r\n        mediaRecorder.start();\r\n        setIsSpeakerRecording(true);\r\n        setTimeout(() => {\r\n          if (speakerRecorderRef.current && speakerRecorderRef.current.state !== 'inactive') {\r\n            speakerRecorderRef.current.stop();\r\n          }\r\n        }, 2000);\r\n      })\r\n      .catch((err) => {\r\n        setSpeakerUploadStatus('获取麦克风权限失败: ' + err.message);\r\n        console.error('获取麦克风权限失败', err);\r\n      });\r\n  }\r\n  function stopSpeakerRecording() {\r\n    if (speakerRecorderRef.current && speakerRecorderRef.current.state !== 'inactive') {\r\n      speakerRecorderRef.current.stop();\r\n      setIsSpeakerRecording(false);\r\n    }\r\n  }\r\n\r\n  const saveMicPosition = (pos) => {\r\n    setMicPosition(pos);\r\n    try {\r\n      localStorage.setItem(MIC_STORAGE_KEY, JSON.stringify(pos));\r\n    } catch {}\r\n  };\r\n  const savePanelPosition = (pos) => {\r\n    setPanelPosition(pos);\r\n    try {\r\n      localStorage.setItem(PANEL_STORAGE_KEY, JSON.stringify(pos));\r\n    } catch {}\r\n  };\r\n\r\n  // 拖拽逻辑 - 麦克风按钮（折叠态）\r\n  useEffect(() => {\r\n    if (!micButtonRef.current || !wrapperRef.current) return;\r\n    const button = micButtonRef.current;\r\n    const wrapper = wrapperRef.current;\r\n\r\n    let left = micPosition.left;\r\n    let top = micPosition.top;\r\n\r\n    button.style.position = 'absolute';\r\n    button.style.left = `${left}px`;\r\n    button.style.top = `${top}px`;\r\n    button.style.zIndex = '10000';\r\n    button.style.cursor = 'grab';\r\n\r\n    isDraggingRef.current = false;\r\n    offsetXRef.current = 0;\r\n    offsetYRef.current = 0;\r\n\r\n    const onMouseDown = (e) => {\r\n      if (e.button !== 0) return;\r\n      isDraggingRef.current = true;\r\n      const wrapperRect = wrapper.getBoundingClientRect();\r\n      offsetXRef.current = e.clientX - wrapperRect.left - button.offsetLeft;\r\n      offsetYRef.current = e.clientY - wrapperRect.top - button.offsetTop;\r\n      button.style.cursor = 'grabbing';\r\n      e.preventDefault();\r\n    };\r\n    const onMouseMove = (e) => {\r\n      if (!isDraggingRef.current) return;\r\n      const wrapperRect = wrapper.getBoundingClientRect();\r\n      let newLeft = e.clientX - wrapperRect.left - offsetXRef.current;\r\n      let newTop = e.clientY - wrapperRect.top - offsetYRef.current;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), wrapper.clientWidth - button.offsetWidth);\r\n      newTop = Math.min(Math.max(0, newTop), wrapper.clientHeight - button.offsetHeight);\r\n\r\n      button.style.left = `${newLeft}px`;\r\n      button.style.top = `${newTop}px`;\r\n    };\r\n    const onMouseUp = () => {\r\n      if (!isDraggingRef.current) return;\r\n      isDraggingRef.current = false;\r\n      button.style.cursor = 'grab';\r\n\r\n      localStorage.setItem(\r\n        MIC_STORAGE_KEY,\r\n        JSON.stringify({ left: button.offsetLeft, top: button.offsetTop })\r\n      );\r\n      setMicPosition({ left: button.offsetLeft, top: button.offsetTop });\r\n    };\r\n\r\n    const onTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      isDraggingRef.current = true;\r\n      const wrapperRect = wrapper.getBoundingClientRect();\r\n      const touch = e.touches[0];\r\n      offsetXRef.current = touch.clientX - wrapperRect.left - button.offsetLeft;\r\n      offsetYRef.current = touch.clientY - wrapperRect.top - button.offsetTop;\r\n      button.style.cursor = 'grabbing';\r\n      e.preventDefault();\r\n    };\r\n    const onTouchMove = (e) => {\r\n      if (!isDraggingRef.current || e.touches.length === 0) return;\r\n      const wrapperRect = wrapper.getBoundingClientRect();\r\n      const touch = e.touches[0];\r\n      let newLeft = touch.clientX - wrapperRect.left - offsetXRef.current;\r\n      let newTop = touch.clientY - wrapperRect.top - offsetYRef.current;\r\n\r\n      newLeft = Math.min(Math.max(0, newLeft), wrapper.clientWidth - button.offsetWidth);\r\n      newTop = Math.min(Math.max(0, newTop), wrapper.clientHeight - button.offsetHeight);\r\n\r\n      button.style.left = `${newLeft}px`;\r\n      button.style.top = `${newTop}px`;\r\n\r\n      e.preventDefault();\r\n    };\r\n    const onTouchEnd = () => {\r\n      if (!isDraggingRef.current) return;\r\n      isDraggingRef.current = false;\r\n      button.style.cursor = 'grab';\r\n\r\n      localStorage.setItem(\r\n        MIC_STORAGE_KEY,\r\n        JSON.stringify({ left: button.offsetLeft, top: button.offsetTop })\r\n      );\r\n      setMicPosition({ left: button.offsetLeft, top: button.offsetTop });\r\n    };\r\n\r\n    button.addEventListener('mousedown', onMouseDown);\r\n    document.addEventListener('mousemove', onMouseMove);\r\n    document.addEventListener('mouseup', onMouseUp);\r\n\r\n    button.addEventListener('touchstart', onTouchStart, { passive: false });\r\n    document.addEventListener('touchmove', onTouchMove, { passive: false });\r\n    document.addEventListener('touchend', onTouchEnd);\r\n\r\n    return () => {\r\n      button.removeEventListener('mousedown', onMouseDown);\r\n      document.removeEventListener('mousemove', onMouseMove);\r\n      document.removeEventListener('mouseup', onMouseUp);\r\n\r\n      button.removeEventListener('touchstart', onTouchStart);\r\n      document.removeEventListener('touchmove', onTouchMove);\r\n      document.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, [micPosition]);\r\n\r\n  // 拖拽逻辑 - 面板（展开态）\r\n  useEffect(() => {\r\n    if (!expanded || !panelRef.current) return;\r\n    const panel = panelRef.current;\r\n\r\n    panel.style.position = 'fixed';\r\n    panel.style.left = `${panelPosition.left}px`;\r\n    panel.style.top = `${panelPosition.top}px`;\r\n    panel.style.width = `${panelPosition.width}px`;\r\n    panel.style.height = `${panelPosition.height}px`;\r\n    panel.style.zIndex = 9999;\r\n    panel.style.cursor = 'grab';\r\n\r\n    const onMouseDown = (e) => {\r\n      if (e.button !== 0) return;\r\n      if (!e.target.closest('.panel-header')) return;\r\n\r\n      panelDragState.current.isDragging = true;\r\n      panelDragState.current.offsetX = e.clientX - panel.offsetLeft;\r\n      panelDragState.current.offsetY = e.clientY - panel.offsetTop;\r\n      panel.style.cursor = 'grabbing';\r\n      e.preventDefault();\r\n    };\r\n    const onMouseMove = (e) => {\r\n      if (!panelDragState.current.isDragging) return;\r\n      e.preventDefault();\r\n      let newLeft = e.clientX - panelDragState.current.offsetX;\r\n      let newTop = e.clientY - panelDragState.current.offsetY;\r\n\r\n      const maxLeft = window.innerWidth - panel.offsetWidth;\r\n      const maxTop = window.innerHeight - panel.offsetHeight;\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      panel.style.left = `${newLeft}px`;\r\n      panel.style.top = `${newTop}px`;\r\n    };\r\n    const onMouseUp = () => {\r\n      if (!panelDragState.current.isDragging) return;\r\n      panelDragState.current.isDragging = false;\r\n      panel.style.cursor = 'grab';\r\n\r\n      savePanelPosition({\r\n        left: panel.offsetLeft,\r\n        top: panel.offsetTop,\r\n        width: panel.offsetWidth,\r\n        height: panel.offsetHeight,\r\n      });\r\n    };\r\n\r\n    const onTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      if (!e.target.closest('.panel-header')) return;\r\n      panelDragState.current.isDragging = true;\r\n      const touch = e.touches[0];\r\n      panelDragState.current.offsetX = touch.clientX - panel.offsetLeft;\r\n      panelDragState.current.offsetY = touch.clientY - panel.offsetTop;\r\n      panel.style.cursor = 'grabbing';\r\n      e.preventDefault();\r\n    };\r\n    const onTouchMove = (e) => {\r\n      if (!panelDragState.current.isDragging) return;\r\n      const touch = e.touches[0];\r\n      let newLeft = touch.clientX - panelDragState.current.offsetX;\r\n      let newTop = touch.clientY - panelDragState.current.offsetY;\r\n\r\n      const maxLeft = window.innerWidth - panel.offsetWidth;\r\n      const maxTop = window.innerHeight - panel.offsetHeight;\r\n      newLeft = Math.min(Math.max(0, newLeft), maxLeft);\r\n      newTop = Math.min(Math.max(0, newTop), maxTop);\r\n\r\n      panel.style.left = `${newLeft}px`;\r\n      panel.style.top = `${newTop}px`;\r\n      e.preventDefault();\r\n    };\r\n    const onTouchEnd = () => {\r\n      if (!panelDragState.current.isDragging) return;\r\n      panelDragState.current.isDragging = false;\r\n      panel.style.cursor = 'grab';\r\n\r\n      savePanelPosition({\r\n        left: panel.offsetLeft,\r\n        top: panel.offsetTop,\r\n        width: panel.offsetWidth,\r\n        height: panel.offsetHeight,\r\n      });\r\n    };\r\n\r\n    panel.addEventListener('mousedown', onMouseDown);\r\n    window.addEventListener('mousemove', onMouseMove);\r\n    window.addEventListener('mouseup', onMouseUp);\r\n\r\n    panel.addEventListener('touchstart', onTouchStart, { passive: false });\r\n    window.addEventListener('touchmove', onTouchMove, { passive: false });\r\n    window.addEventListener('touchend', onTouchEnd);\r\n\r\n    return () => {\r\n      panel.removeEventListener('mousedown', onMouseDown);\r\n      window.removeEventListener('mousemove', onMouseMove);\r\n      window.removeEventListener('mouseup', onMouseUp);\r\n\r\n      panel.removeEventListener('touchstart', onTouchStart);\r\n      window.removeEventListener('touchmove', onTouchMove);\r\n      window.removeEventListener('touchend', onTouchEnd);\r\n    };\r\n  }, [expanded, panelPosition]);\r\n\r\n  // 双击节流，单击/双击事件合并处理\r\n  const lastClickTimeRef = useRef(0);\r\n  const DOUBLE_CLICK_DELAY = 400;\r\n\r\n  const handleMicClick = () => {\r\n    const now = Date.now();\r\n    if (now - lastClickTimeRef.current < DOUBLE_CLICK_DELAY) {\r\n      setExpanded((prev) => !prev);\r\n    } else {\r\n      if (isRecording) stopRecording();\r\n      else startRecording();\r\n    }\r\n    lastClickTimeRef.current = now;\r\n  };\r\n\r\n  const [ripples, setRipples] = useState([]);\r\n  const rippleCountRef = useRef(0);\r\n  const speakerButtonRef = useRef(null);\r\n\r\n  const handleSpeakerRecordClick = (event) => {\r\n    if (isRecording || isSpeakerRecording) return;\r\n    createRipple(event);\r\n    startSpeakerRecording();\r\n  };\r\n\r\n  const createRipple = (event) => {\r\n    if (!speakerButtonRef.current) return;\r\n    const rect = speakerButtonRef.current.getBoundingClientRect();\r\n    const size = Math.max(rect.width, rect.height);\r\n    const x = event.clientX - rect.left - size / 2;\r\n    const y = event.clientY - rect.top - size / 2;\r\n\r\n    const newRipple = {\r\n      key: rippleCountRef.current,\r\n      size,\r\n      x,\r\n      y,\r\n    };\r\n    rippleCountRef.current += 1;\r\n\r\n    setRipples((oldRipples) => [...oldRipples, newRipple]);\r\n\r\n    setTimeout(() => {\r\n      setRipples((oldRipples) => oldRipples.filter(r => r.key !== newRipple.key));\r\n    }, 1000);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <style>{`\r\n        /* 样式保持和之前相同，省略为简洁 */\r\n      `}</style>\r\n\r\n      {!expanded && (\r\n        <div\r\n          id=\"mic-button-wrapper\"\r\n          ref={wrapperRef}\r\n          style={{\r\n            position: 'fixed',\r\n            left: micPosition.left,\r\n            top: micPosition.top,\r\n            zIndex: 10000,\r\n            backgroundColor: 'rgba(0, 229, 255, 0.8)', /* 显眼背景，方便调试 */\r\n            borderRadius: 28,\r\n            width: 68,\r\n            height: 68,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            justifyContent: 'center',\r\n            boxShadow: '0 0 12px rgba(0,229,255,0.7)',\r\n            userSelect: 'none',\r\n          }}\r\n        >\r\n          <button\r\n            id=\"mic-button\"\r\n            ref={micButtonRef}\r\n            className={isRecording ? 'recording' : ''}\r\n            onClick={handleMicClick}\r\n            aria-label={isRecording ? '停止录音，双击展开面板' : '开始录音，双击展开面板'}\r\n            title={isRecording ? '点击停止录音，双击展开面板' : '点击开始录音，双击展开面板'}\r\n            type=\"button\"\r\n            disabled={isSpeakerRecording}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              padding: 0,\r\n              outline: 'none',\r\n              cursor: 'pointer',\r\n              width: '48px',\r\n              height: '48px',\r\n              filter: isRecording ? 'drop-shadow(0 0 5px red)' : 'none',\r\n              userSelect: 'none',\r\n            }}\r\n          >\r\n            <img\r\n              src=\"/core/client/ai-butler/image/mic-icon.png\"\r\n              alt=\"麦克风\"\r\n              draggable={false}\r\n              style={{ width: 48, height: 48 }}\r\n            />\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {expanded && (\r\n        <div\r\n          id=\"audio-transcriber-panel\"\r\n          ref={panelRef}\r\n          role=\"region\"\r\n          aria-label=\"语音识别面板\"\r\n          style={{\r\n            position: 'fixed',\r\n            left: panelPosition.left,\r\n            top: panelPosition.top,\r\n            width: panelPosition.width,\r\n            height: panelPosition.height,\r\n            backgroundColor: 'rgba(0, 0, 0, 0.85)',\r\n            borderRadius: 8,\r\n            boxShadow: '0 0 12px rgba(0, 229, 255, 0.8)',\r\n            color: 'white',\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            overflow: 'hidden',\r\n            userSelect: 'none',\r\n            zIndex: 10000,\r\n          }}\r\n        >\r\n          <div\r\n            className=\"panel-header\"\r\n            style={{\r\n              height: 40,\r\n              backgroundColor: 'rgba(0, 229, 255, 0.2)',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'space-between',\r\n              padding: '0 12px',\r\n              cursor: 'grab',\r\n              userSelect: 'none',\r\n            }}\r\n            title=\"拖动此区域移动面板，双击麦克风按钮折叠面板\"\r\n          >\r\n            <button\r\n              className={`mic-button${isRecording ? ' recording' : ''}`}\r\n              onClick={handleMicClick}\r\n              aria-label={isRecording ? '停止录音，双击折叠面板' : '开始录音，双击折叠面板'}\r\n              title={isRecording ? '点击停止录音，双击折叠面板' : '点击开始录音，双击折叠面板'}\r\n              type=\"button\"\r\n              disabled={isSpeakerRecording}\r\n              style={{\r\n                width: 36,\r\n                height: 36,\r\n                borderRadius: '50%',\r\n                backgroundColor: isRecording ? '#ff4d4d' : 'rgba(0,229,255,0.8)',\r\n                border: 'none',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                outline: 'none',\r\n                boxShadow: isRecording ? '0 0 10px red' : '0 0 10px rgba(0,229,255,0.7)',\r\n                userSelect: 'none',\r\n                cursor: 'pointer',\r\n              }}\r\n            >\r\n              <img\r\n                src=\"/core/client/ai-butler/image/mic-icon.png\"\r\n                alt=\"麦克风\"\r\n                draggable={false}\r\n                style={{ width: 20, height: 20 }}\r\n              />\r\n            </button>\r\n            <div style={{ fontWeight: 'bold', fontSize: 16, userSelect: 'none' }}>\r\n              语音识别面板\r\n            </div>\r\n            <div style={{ fontSize: 12, opacity: 0.7, userSelect: 'none' }}>\r\n              双击麦克风按钮折叠\r\n            </div>\r\n          </div>\r\n\r\n          <div\r\n            style={{\r\n              flex: 1,\r\n              overflowY: 'auto',\r\n              padding: 12,\r\n              fontFamily: 'Arial, sans-serif',\r\n              fontSize: 14,\r\n              userSelect: 'text',\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                backgroundColor: 'rgba(255,255,255,0.05)',\r\n                borderRadius: 4,\r\n                minHeight: 120,\r\n                whiteSpace: 'pre-wrap',\r\n                padding: 8,\r\n                marginBottom: 12,\r\n                color: transcription ? 'white' : 'rgba(255,255,255,0.5)',\r\n              }}\r\n              aria-live=\"polite\"\r\n              aria-atomic=\"true\"\r\n              role=\"region\"\r\n              tabIndex={0}\r\n            >\r\n              {transcription || '识别文字展示区...'}\r\n            </div>\r\n\r\n            <label style={{ display: 'block', marginBottom: 6 }}>\r\n              语言：\r\n              <input\r\n                id=\"langInput\"\r\n                type=\"text\"\r\n                value={lang}\r\n                onChange={(e) => setLang(e.target.value)}\r\n                disabled={isRecording || isSpeakerRecording}\r\n                placeholder=\"auto\"\r\n                autoComplete=\"off\"\r\n                style={{\r\n                  marginLeft: 8,\r\n                  padding: 4,\r\n                  borderRadius: 4,\r\n                  border: '1px solid #555',\r\n                  backgroundColor: 'rgba(0,0,0,0.3)',\r\n                  color: 'white',\r\n                  width: 100,\r\n                }}\r\n              />\r\n            </label>\r\n\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 6 }}>\r\n              <input\r\n                id=\"speakerVerificationCheckbox\"\r\n                type=\"checkbox\"\r\n                checked={speakerVerification}\r\n                disabled={isRecording || isSpeakerRecording}\r\n                onChange={(e) => setSpeakerVerification(e.target.checked)}\r\n              />\r\n              声纹识别\r\n            </label>\r\n\r\n            <label style={{ display: 'flex', alignItems: 'center', gap: 8, marginBottom: 6 }}>\r\n              <input\r\n                id=\"wakeWordToggleCheckbox\"\r\n                type=\"checkbox\"\r\n                checked={wakeWordEnabled}\r\n                disabled={isRecording || isSpeakerRecording}\r\n                onChange={(e) => setWakeWordEnabled(e.target.checked)}\r\n              />\r\n              语音唤醒\r\n            </label>\r\n\r\n            <label style={{ display: 'block', marginBottom: 6 }}>\r\n              唤醒词（拼音，多个用逗号分隔）：\r\n              <input\r\n                id=\"wakeWordsInput\"\r\n                type=\"text\"\r\n                value={wakeWords}\r\n                onChange={(e) => setWakeWords(e.target.value)}\r\n                disabled={isRecording || isSpeakerRecording || !wakeWordEnabled}\r\n                placeholder=\"如：zhan qi lai, ni hao xiao qian\"\r\n                autoComplete=\"off\"\r\n                style={{\r\n                  marginLeft: 8,\r\n                  padding: 4,\r\n                  borderRadius: 4,\r\n                  border: '1px solid #555',\r\n                  backgroundColor: 'rgba(0,0,0,0.3)',\r\n                  color: 'white',\r\n                  width: '100%',\r\n                  boxSizing: 'border-box',\r\n                }}\r\n              />\r\n            </label>\r\n\r\n            <button\r\n              id=\"speaker-record-button\"\r\n              ref={speakerButtonRef}\r\n              onClick={handleSpeakerRecordClick}\r\n              disabled={isRecording || isSpeakerRecording}\r\n              type=\"button\"\r\n              aria-live=\"polite\"\r\n              aria-label=\"录制声纹\"\r\n              title=\"录制约2秒声音用于声纹识别，录制完成自动上传\"\r\n              style={{\r\n                position: 'relative',\r\n                overflow: 'hidden',\r\n                background: 'rgba(255, 255, 255, 0.1)',\r\n                borderRadius: 16,\r\n                border: '1px solid rgba(255, 255, 255, 0.3)',\r\n                color: 'white',\r\n                padding: '3px 10px',\r\n                fontSize: 13,\r\n                fontWeight: 600,\r\n                cursor: 'pointer',\r\n                userSelect: 'none',\r\n                boxShadow: '0 4px 30px rgba(0, 0, 0, 0.1)',\r\n                backdropFilter: 'blur(10px)',\r\n                WebkitBackdropFilter: 'blur(12px)',\r\n                transition: 'all 0.3s ease',\r\n                display: 'inline-flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                outline: 'none',\r\n                borderImage: 'none',\r\n              }}\r\n            >\r\n              录制声纹 (2秒)\r\n              {ripples.map(({ key, size, x, y }) => (\r\n                <span\r\n                  key={key}\r\n                  className=\"ripple\"\r\n                  style={{\r\n                    width: size,\r\n                    height: size,\r\n                    top: y,\r\n                    left: x,\r\n                  }}\r\n                />\r\n              ))}\r\n            </button>\r\n\r\n            {speakerUploadStatus && (\r\n              <div\r\n                id=\"speaker-record-status\"\r\n                role=\"alert\"\r\n                aria-live=\"polite\"\r\n                aria-atomic=\"true\"\r\n                style={{ marginTop: 8 }}\r\n              >\r\n                {speakerUploadStatus}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}