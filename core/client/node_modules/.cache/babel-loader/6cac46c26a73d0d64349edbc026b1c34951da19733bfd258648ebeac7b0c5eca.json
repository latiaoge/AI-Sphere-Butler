{"ast":null,"code":"import{useEffect,useRef}from'react';// 简单拖拽 Hook，绑定 ref 的 DOM 元素可拖动\nexport function useDraggable(){const dragRef=useRef(null);useEffect(()=>{const el=dragRef.current;if(!el)return;let pos={left:0,top:0,x:0,y:0};// 鼠标按下，开始拖拽\nfunction mouseDown(e){e.preventDefault();// 阻止文本选中等默认行为\npos={left:el.offsetLeft,top:el.offsetTop,x:e.clientX,y:e.clientY};document.addEventListener('mousemove',mouseMove);document.addEventListener('mouseup',mouseUp);}// 鼠标移动，更新元素位置\nfunction mouseMove(e){const dx=e.clientX-pos.x;const dy=e.clientY-pos.y;el.style.left=\"\".concat(pos.left+dx,\"px\");el.style.top=\"\".concat(pos.top+dy,\"px\");}// 鼠标松开，停止拖拽\nfunction mouseUp(){document.removeEventListener('mousemove',mouseMove);document.removeEventListener('mouseup',mouseUp);}// 初始化样式：绝对定位和移动光标\nel.style.position=el.style.position||'absolute';// 仅当没设置时赋值，避免覆盖\nel.style.cursor='move';// 绑定 mousedown 事件\nel.addEventListener('mousedown',mouseDown);// 清理函数，组件卸载或依赖变更时移除事件监听\nreturn()=>{el.removeEventListener('mousedown',mouseDown);// 同时保证 document 上监听也被移除，防止异常\ndocument.removeEventListener('mousemove',mouseMove);document.removeEventListener('mouseup',mouseUp);};},[]);return dragRef;}","map":{"version":3,"names":["useEffect","useRef","useDraggable","dragRef","el","current","pos","left","top","x","y","mouseDown","e","preventDefault","offsetLeft","offsetTop","clientX","clientY","document","addEventListener","mouseMove","mouseUp","dx","dy","style","concat","removeEventListener","position","cursor"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/hooks/useDraggable.js"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\n\r\n// 简单拖拽 Hook，绑定 ref 的 DOM 元素可拖动\r\nexport function useDraggable() {\r\n  const dragRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const el = dragRef.current;\r\n    if (!el) return;\r\n\r\n    let pos = { left: 0, top: 0, x: 0, y: 0 };\r\n\r\n    // 鼠标按下，开始拖拽\r\n    function mouseDown(e) {\r\n      e.preventDefault(); // 阻止文本选中等默认行为\r\n      pos = {\r\n        left: el.offsetLeft,\r\n        top: el.offsetTop,\r\n        x: e.clientX,\r\n        y: e.clientY,\r\n      };\r\n      document.addEventListener('mousemove', mouseMove);\r\n      document.addEventListener('mouseup', mouseUp);\r\n    }\r\n\r\n    // 鼠标移动，更新元素位置\r\n    function mouseMove(e) {\r\n      const dx = e.clientX - pos.x;\r\n      const dy = e.clientY - pos.y;\r\n      el.style.left = `${pos.left + dx}px`;\r\n      el.style.top = `${pos.top + dy}px`;\r\n    }\r\n\r\n    // 鼠标松开，停止拖拽\r\n    function mouseUp() {\r\n      document.removeEventListener('mousemove', mouseMove);\r\n      document.removeEventListener('mouseup', mouseUp);\r\n    }\r\n\r\n    // 初始化样式：绝对定位和移动光标\r\n    el.style.position = el.style.position || 'absolute'; // 仅当没设置时赋值，避免覆盖\r\n    el.style.cursor = 'move';\r\n\r\n    // 绑定 mousedown 事件\r\n    el.addEventListener('mousedown', mouseDown);\r\n\r\n    // 清理函数，组件卸载或依赖变更时移除事件监听\r\n    return () => {\r\n      el.removeEventListener('mousedown', mouseDown);\r\n      // 同时保证 document 上监听也被移除，防止异常\r\n      document.removeEventListener('mousemove', mouseMove);\r\n      document.removeEventListener('mouseup', mouseUp);\r\n    };\r\n  }, []);\r\n\r\n  return dragRef;\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAEzC;AACA,MAAO,SAAS,CAAAC,YAAYA,CAAA,CAAG,CAC7B,KAAM,CAAAC,OAAO,CAAGF,MAAM,CAAC,IAAI,CAAC,CAE5BD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAI,EAAE,CAAGD,OAAO,CAACE,OAAO,CAC1B,GAAI,CAACD,EAAE,CAAE,OAET,GAAI,CAAAE,GAAG,CAAG,CAAEC,IAAI,CAAE,CAAC,CAAEC,GAAG,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAC,CAEzC;AACA,QAAS,CAAAC,SAASA,CAACC,CAAC,CAAE,CACpBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE;AACpBP,GAAG,CAAG,CACJC,IAAI,CAAEH,EAAE,CAACU,UAAU,CACnBN,GAAG,CAAEJ,EAAE,CAACW,SAAS,CACjBN,CAAC,CAAEG,CAAC,CAACI,OAAO,CACZN,CAAC,CAAEE,CAAC,CAACK,OACP,CAAC,CACDC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,CAAEC,SAAS,CAAC,CACjDF,QAAQ,CAACC,gBAAgB,CAAC,SAAS,CAAEE,OAAO,CAAC,CAC/C,CAEA;AACA,QAAS,CAAAD,SAASA,CAACR,CAAC,CAAE,CACpB,KAAM,CAAAU,EAAE,CAAGV,CAAC,CAACI,OAAO,CAAGV,GAAG,CAACG,CAAC,CAC5B,KAAM,CAAAc,EAAE,CAAGX,CAAC,CAACK,OAAO,CAAGX,GAAG,CAACI,CAAC,CAC5BN,EAAE,CAACoB,KAAK,CAACjB,IAAI,IAAAkB,MAAA,CAAMnB,GAAG,CAACC,IAAI,CAAGe,EAAE,MAAI,CACpClB,EAAE,CAACoB,KAAK,CAAChB,GAAG,IAAAiB,MAAA,CAAMnB,GAAG,CAACE,GAAG,CAAGe,EAAE,MAAI,CACpC,CAEA;AACA,QAAS,CAAAF,OAAOA,CAAA,CAAG,CACjBH,QAAQ,CAACQ,mBAAmB,CAAC,WAAW,CAAEN,SAAS,CAAC,CACpDF,QAAQ,CAACQ,mBAAmB,CAAC,SAAS,CAAEL,OAAO,CAAC,CAClD,CAEA;AACAjB,EAAE,CAACoB,KAAK,CAACG,QAAQ,CAAGvB,EAAE,CAACoB,KAAK,CAACG,QAAQ,EAAI,UAAU,CAAE;AACrDvB,EAAE,CAACoB,KAAK,CAACI,MAAM,CAAG,MAAM,CAExB;AACAxB,EAAE,CAACe,gBAAgB,CAAC,WAAW,CAAER,SAAS,CAAC,CAE3C;AACA,MAAO,IAAM,CACXP,EAAE,CAACsB,mBAAmB,CAAC,WAAW,CAAEf,SAAS,CAAC,CAC9C;AACAO,QAAQ,CAACQ,mBAAmB,CAAC,WAAW,CAAEN,SAAS,CAAC,CACpDF,QAAQ,CAACQ,mBAAmB,CAAC,SAAS,CAAEL,OAAO,CAAC,CAClD,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAlB,OAAO,CAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}