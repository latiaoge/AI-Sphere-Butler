{"ast":null,"code":"var _jsxFileName = \"D:\\\\XM\\\\AI-Sphere-Butler\\\\core\\\\client\\\\src\\\\components\\\\OldWebRTC.jsx\",\n  _s = $RefreshSig$();\n// src/components/OldWebRTC.jsx\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function OldWebRTC() {\n  _s();\n  const videoRef = useRef(null);\n  const audioRef = useRef(null);\n  const pcRef = useRef(null);\n  const [useStun, setUseStun] = useState(false);\n  const [started, setStarted] = useState(false);\n  const [zoomWidth, setZoomWidth] = useState(600);\n\n  // 视频初始宽高\n  const initialWidth = 600;\n  const initialHeight = 450; // 按你代码比例\n\n  // 信令服务器地址（根据你实际后端调整）\n  const SIGNALING_URL = '/offer'; // POST 地址\n\n  // 视频缩放比例\n  const zoomStep = 50;\n\n  // 创建并协商 WebRTC 连接\n  async function negotiate() {\n    const pc = pcRef.current;\n    if (!pc) return;\n    pc.addTransceiver('video', {\n      direction: 'recvonly'\n    });\n    pc.addTransceiver('audio', {\n      direction: 'recvonly'\n    });\n    try {\n      const offer = await pc.createOffer();\n      await pc.setLocalDescription(offer);\n\n      // 等待 ICE gathering 完成\n      await new Promise(resolve => {\n        if (pc.iceGatheringState === 'complete') {\n          resolve();\n        } else {\n          const checkState = () => {\n            if (pc.iceGatheringState === 'complete') {\n              pc.removeEventListener('icegatheringstatechange', checkState);\n              resolve();\n            }\n          };\n          pc.addEventListener('icegatheringstatechange', checkState);\n        }\n      });\n\n      // 发送本地 SDP offer 到服务器，等待答复 SDP answer\n      const response = await fetch(SIGNALING_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          sdp: pc.localDescription.sdp,\n          type: pc.localDescription.type\n        })\n      });\n      const answer = await response.json();\n\n      // 设置远端 SDP\n      await pc.setRemoteDescription(answer);\n\n      // 你原来页面有 sessionid 字段，这里不展示，需要的话可以自行扩展\n    } catch (e) {\n      alert('协商失败: ' + e.message);\n    }\n  }\n  function start() {\n    if (started) return;\n    const config = {\n      sdpSemantics: 'unified-plan'\n    };\n    if (useStun) {\n      config.iceServers = [{\n        urls: ['stun:stun.l.google.com:19302']\n      }];\n    }\n    const pc = new RTCPeerConnection(config);\n    pcRef.current = pc;\n\n    // 监听远端 track，绑定到 video/audio 标签\n    pc.addEventListener('track', evt => {\n      if (evt.track.kind === 'video') {\n        if (videoRef.current) {\n          videoRef.current.srcObject = evt.streams[0];\n        }\n      } else if (evt.track.kind === 'audio') {\n        if (audioRef.current) {\n          audioRef.current.srcObject = evt.streams[0];\n        }\n      }\n    });\n    setStarted(true);\n    negotiate();\n\n    // 初始化视频缩放（首次设置）\n    setZoomWidth(initialWidth);\n  }\n  function stop() {\n    if (!started) return;\n    setStarted(false);\n\n    // 延迟关闭 peer connection 避免卡顿\n    setTimeout(() => {\n      if (pcRef.current) {\n        pcRef.current.close();\n        pcRef.current = null;\n      }\n    }, 500);\n\n    // 停止视频音频流\n    if (videoRef.current && videoRef.current.srcObject) {\n      videoRef.current.srcObject.getTracks().forEach(t => t.stop());\n      videoRef.current.srcObject = null;\n    }\n    if (audioRef.current && audioRef.current.srcObject) {\n      audioRef.current.srcObject.getTracks().forEach(t => t.stop());\n      audioRef.current.srcObject = null;\n    }\n  }\n\n  // 缩放视频\n  function zoomIn() {\n    setZoomWidth(w => w + zoomStep);\n  }\n  function zoomOut() {\n    setZoomWidth(w => w - zoomStep > 0 ? w - zoomStep : w);\n  }\n\n  // 文本框输入状态\n  const [message, setMessage] = useState('');\n\n  // 发送消息函数，发送到指定服务地址\n  const sendMessage = async () => {\n    if (!message.trim()) return;\n    try {\n      const response = await fetch('https://192.168.1.70:6010/qwener', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          text: message\n        })\n      });\n      if (!response.ok) {\n        throw new Error('网络响应失败，状态码: ' + response.status);\n      }\n      const data = await response.json();\n      console.log('发送成功，服务器返回：', data);\n    } catch (error) {\n      console.error('发送失败：', error);\n    }\n  };\n\n  // 表单提交处理\n  const handleSubmit = e => {\n    e.preventDefault();\n    sendMessage();\n    setMessage(''); // 发送后清空输入框\n  };\n\n  // 通用透明背景按钮样式\n  const transparentBtnStyle = {\n    backgroundColor: 'transparent',\n    border: '1px solid #00e5ff',\n    color: '#00e5ff',\n    fontWeight: 'bold',\n    padding: '8px 16px',\n    cursor: 'pointer',\n    borderRadius: 4,\n    outline: 'none',\n    transition: 'background-color 0.3s, color 0.3s'\n  };\n\n  // 禁用按钮样式\n  const disabledBtnStyle = {\n    ...transparentBtnStyle,\n    opacity: 0.4,\n    cursor: 'not-allowed'\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 1280\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"option\",\n      style: {\n        marginBottom: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        id: \"use-stun\",\n        type: \"checkbox\",\n        checked: useStun,\n        onChange: e => setUseStun(e.target.checked)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"use-stun\",\n        style: {\n          marginLeft: 4,\n          color: '#00e5ff'\n        },\n        children: \"Use STUN server\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: start,\n      disabled: started,\n      style: started ? disabledBtnStyle : transparentBtnStyle,\n      children: \"Start\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: stop,\n      disabled: !started,\n      style: !started ? disabledBtnStyle : transparentBtnStyle,\n      children: \"Stop\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"media\",\n      style: {\n        marginTop: 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          color: '#00e5ff'\n        },\n        children: \"\\u7BA1\\u5BB6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioRef,\n        autoPlay: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        style: {\n          width: zoomWidth,\n          height: zoomWidth * initialHeight / initialWidth,\n          display: 'block'\n        },\n        autoPlay: true,\n        playsInline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8,\n          marginBottom: 12\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomIn,\n          style: {\n            ...transparentBtnStyle,\n            marginRight: 4\n          },\n          children: \"Zoom In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: zoomOut,\n          style: transparentBtnStyle,\n          children: \"Zoom Out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        id: \"echo-form\",\n        onSubmit: handleSubmit,\n        style: {\n          display: 'flex',\n          flexDirection: 'column',\n          gap: 8,\n          maxWidth: zoomWidth\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"message\",\n          style: {\n            fontWeight: 'bold',\n            color: '#ccc'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"message\",\n          value: message,\n          onChange: e => setMessage(e.target.value),\n          rows: 3,\n          style: {\n            width: '100%',\n            resize: 'vertical',\n            fontSize: 14,\n            padding: 8,\n            borderRadius: 4,\n            border: '1px solid #666',\n            backgroundColor: '#222',\n            color: 'white',\n            fontFamily: 'inherit'\n          },\n          placeholder: \"\\u8BF7\\u8F93\\u5165\\u8981\\u53D1\\u9001\\u7ED9\\u7BA1\\u5BB6\\u6587\\u672C...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          style: {\n            ...transparentBtnStyle,\n            alignSelf: 'flex-end',\n            padding: '6px 16px'\n          },\n          children: \"\\u53D1\\u9001\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n}\n_s(OldWebRTC, \"uC0AB5CMlg5bH2Bn8VjtPW/towI=\");\n_c = OldWebRTC;\nvar _c;\n$RefreshReg$(_c, \"OldWebRTC\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","OldWebRTC","_s","videoRef","audioRef","pcRef","useStun","setUseStun","started","setStarted","zoomWidth","setZoomWidth","initialWidth","initialHeight","SIGNALING_URL","zoomStep","negotiate","pc","current","addTransceiver","direction","offer","createOffer","setLocalDescription","Promise","resolve","iceGatheringState","checkState","removeEventListener","addEventListener","response","fetch","method","headers","body","JSON","stringify","sdp","localDescription","type","answer","json","setRemoteDescription","e","alert","message","start","config","sdpSemantics","iceServers","urls","RTCPeerConnection","evt","track","kind","srcObject","streams","stop","setTimeout","close","getTracks","forEach","t","zoomIn","w","zoomOut","setMessage","sendMessage","trim","text","ok","Error","status","data","console","log","error","handleSubmit","preventDefault","transparentBtnStyle","backgroundColor","border","color","fontWeight","padding","cursor","borderRadius","outline","transition","disabledBtnStyle","opacity","style","maxWidth","children","className","marginBottom","id","checked","onChange","target","fileName","_jsxFileName","lineNumber","columnNumber","htmlFor","marginLeft","onClick","disabled","marginTop","ref","autoPlay","width","height","display","playsInline","marginRight","onSubmit","flexDirection","gap","value","rows","resize","fontSize","fontFamily","placeholder","alignSelf","_c","$RefreshReg$"],"sources":["D:/XM/AI-Sphere-Butler/core/client/src/components/OldWebRTC.jsx"],"sourcesContent":["// src/components/OldWebRTC.jsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n\r\nexport default function OldWebRTC() {\r\n  const videoRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n  const pcRef = useRef(null);\r\n\r\n  const [useStun, setUseStun] = useState(false);\r\n  const [started, setStarted] = useState(false);\r\n  const [zoomWidth, setZoomWidth] = useState(600);\r\n\r\n  // 视频初始宽高\r\n  const initialWidth = 600;\r\n  const initialHeight = 450; // 按你代码比例\r\n\r\n  // 信令服务器地址（根据你实际后端调整）\r\n  const SIGNALING_URL = '/offer'; // POST 地址\r\n\r\n  // 视频缩放比例\r\n  const zoomStep = 50;\r\n\r\n  // 创建并协商 WebRTC 连接\r\n  async function negotiate() {\r\n    const pc = pcRef.current;\r\n    if (!pc) return;\r\n\r\n    pc.addTransceiver('video', { direction: 'recvonly' });\r\n    pc.addTransceiver('audio', { direction: 'recvonly' });\r\n\r\n    try {\r\n      const offer = await pc.createOffer();\r\n      await pc.setLocalDescription(offer);\r\n\r\n      // 等待 ICE gathering 完成\r\n      await new Promise((resolve) => {\r\n        if (pc.iceGatheringState === 'complete') {\r\n          resolve();\r\n        } else {\r\n          const checkState = () => {\r\n            if (pc.iceGatheringState === 'complete') {\r\n              pc.removeEventListener('icegatheringstatechange', checkState);\r\n              resolve();\r\n            }\r\n          };\r\n          pc.addEventListener('icegatheringstatechange', checkState);\r\n        }\r\n      });\r\n\r\n      // 发送本地 SDP offer 到服务器，等待答复 SDP answer\r\n      const response = await fetch(SIGNALING_URL, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          sdp: pc.localDescription.sdp,\r\n          type: pc.localDescription.type,\r\n        }),\r\n      });\r\n      const answer = await response.json();\r\n\r\n      // 设置远端 SDP\r\n      await pc.setRemoteDescription(answer);\r\n\r\n      // 你原来页面有 sessionid 字段，这里不展示，需要的话可以自行扩展\r\n    } catch (e) {\r\n      alert('协商失败: ' + e.message);\r\n    }\r\n  }\r\n\r\n  function start() {\r\n    if (started) return;\r\n\r\n    const config = { sdpSemantics: 'unified-plan' };\r\n    if (useStun) {\r\n      config.iceServers = [{ urls: ['stun:stun.l.google.com:19302'] }];\r\n    }\r\n\r\n    const pc = new RTCPeerConnection(config);\r\n    pcRef.current = pc;\r\n\r\n    // 监听远端 track，绑定到 video/audio 标签\r\n    pc.addEventListener('track', (evt) => {\r\n      if (evt.track.kind === 'video') {\r\n        if (videoRef.current) {\r\n          videoRef.current.srcObject = evt.streams[0];\r\n        }\r\n      } else if (evt.track.kind === 'audio') {\r\n        if (audioRef.current) {\r\n          audioRef.current.srcObject = evt.streams[0];\r\n        }\r\n      }\r\n    });\r\n\r\n    setStarted(true);\r\n\r\n    negotiate();\r\n\r\n    // 初始化视频缩放（首次设置）\r\n    setZoomWidth(initialWidth);\r\n  }\r\n\r\n  function stop() {\r\n    if (!started) return;\r\n\r\n    setStarted(false);\r\n\r\n    // 延迟关闭 peer connection 避免卡顿\r\n    setTimeout(() => {\r\n      if (pcRef.current) {\r\n        pcRef.current.close();\r\n        pcRef.current = null;\r\n      }\r\n    }, 500);\r\n\r\n    // 停止视频音频流\r\n    if (videoRef.current && videoRef.current.srcObject) {\r\n      videoRef.current.srcObject.getTracks().forEach((t) => t.stop());\r\n      videoRef.current.srcObject = null;\r\n    }\r\n    if (audioRef.current && audioRef.current.srcObject) {\r\n      audioRef.current.srcObject.getTracks().forEach((t) => t.stop());\r\n      audioRef.current.srcObject = null;\r\n    }\r\n  }\r\n\r\n  // 缩放视频\r\n  function zoomIn() {\r\n    setZoomWidth((w) => w + zoomStep);\r\n  }\r\n  function zoomOut() {\r\n    setZoomWidth((w) => (w - zoomStep > 0 ? w - zoomStep : w));\r\n  }\r\n\r\n  // 文本框输入状态\r\n  const [message, setMessage] = useState('');\r\n\r\n  // 发送消息函数，发送到指定服务地址\r\n  const sendMessage = async () => {\r\n    if (!message.trim()) return;\r\n\r\n    try {\r\n      const response = await fetch('https://192.168.1.70:6010/qwener', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ text: message }),\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('网络响应失败，状态码: ' + response.status);\r\n      }\r\n      const data = await response.json();\r\n      console.log('发送成功，服务器返回：', data);\r\n    } catch (error) {\r\n      console.error('发送失败：', error);\r\n    }\r\n  };\r\n\r\n  // 表单提交处理\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    sendMessage();\r\n    setMessage(''); // 发送后清空输入框\r\n  };\r\n\r\n  // 通用透明背景按钮样式\r\n  const transparentBtnStyle = {\r\n    backgroundColor: 'transparent',\r\n    border: '1px solid #00e5ff',\r\n    color: '#00e5ff',\r\n    fontWeight: 'bold',\r\n    padding: '8px 16px',\r\n    cursor: 'pointer',\r\n    borderRadius: 4,\r\n    outline: 'none',\r\n    transition: 'background-color 0.3s, color 0.3s',\r\n  };\r\n\r\n  // 禁用按钮样式\r\n  const disabledBtnStyle = {\r\n    ...transparentBtnStyle,\r\n    opacity: 0.4,\r\n    cursor: 'not-allowed',\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 1280 }}>\r\n      <div className=\"option\" style={{ marginBottom: 8 }}>\r\n        <input\r\n          id=\"use-stun\"\r\n          type=\"checkbox\"\r\n          checked={useStun}\r\n          onChange={(e) => setUseStun(e.target.checked)}\r\n        />\r\n        <label htmlFor=\"use-stun\" style={{ marginLeft: 4, color: '#00e5ff' }}>\r\n          Use STUN server\r\n        </label>\r\n      </div>\r\n\r\n      <button\r\n        onClick={start}\r\n        disabled={started}\r\n        style={started ? disabledBtnStyle : transparentBtnStyle}\r\n      >\r\n        Start\r\n      </button>\r\n      <button\r\n        onClick={stop}\r\n        disabled={!started}\r\n        style={!started ? disabledBtnStyle : transparentBtnStyle}\r\n      >\r\n        Stop\r\n      </button>\r\n\r\n      {/* 视频区域和文本输入表单放在同一个容器内，文本框放在视频底部 */}\r\n      <div id=\"media\" style={{ marginTop: 20 }}>\r\n        <h2 style={{ color: '#00e5ff' }}>管家</h2>\r\n\r\n        <audio ref={audioRef} autoPlay />\r\n        <video\r\n          ref={videoRef}\r\n          style={{ width: zoomWidth, height: (zoomWidth * initialHeight) / initialWidth, display: 'block' }}\r\n          autoPlay\r\n          playsInline\r\n        />\r\n        <div style={{ marginTop: 8, marginBottom: 12 }}>\r\n          <button onClick={zoomIn} style={{ ...transparentBtnStyle, marginRight: 4 }}>\r\n            Zoom In\r\n          </button>\r\n          <button onClick={zoomOut} style={transparentBtnStyle}>\r\n            Zoom Out\r\n          </button>\r\n        </div>\r\n\r\n        {/* 文本发送表单，放在视频下方 */}\r\n        <form\r\n          id=\"echo-form\"\r\n          onSubmit={handleSubmit}\r\n          style={{ display: 'flex', flexDirection: 'column', gap: 8, maxWidth: zoomWidth }}\r\n        >\r\n          <label htmlFor=\"message\" style={{ fontWeight: 'bold', color: '#ccc' }}>\r\n          </label>\r\n          <textarea\r\n            id=\"message\"\r\n            value={message}\r\n            onChange={(e) => setMessage(e.target.value)}\r\n            rows={3}\r\n            style={{\r\n              width: '100%',\r\n              resize: 'vertical',\r\n              fontSize: 14,\r\n              padding: 8,\r\n              borderRadius: 4,\r\n              border: '1px solid #666',\r\n              backgroundColor: '#222',\r\n              color: 'white',\r\n              fontFamily: 'inherit',\r\n            }}\r\n            placeholder=\"请输入要发送给管家文本...\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            style={{\r\n              ...transparentBtnStyle,\r\n              alignSelf: 'flex-end',\r\n              padding: '6px 16px',\r\n            }}\r\n          >\r\n            发送\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}