# AI Sphere Butler

## 介绍

### 开源项目计划
AI Sphere Butler 打造全方位服务用户生活的 AI 全能管家——代号 **“小粒”** （管家名称可以随意自定义）。

**项目名称：AI Sphere Butler**（创意和设计全球首创）

**终极愿景**：我们的目标是创造一个全方位服务于用户生活的 AI 全能管家——“小粒”。除了不具备物理形态外，“小粒”将提供与视频通话中真人管家几乎无异的体验，具备思考、情感交流、视觉、听觉以及模拟触觉反馈等能力，并能够在任何家庭和移动车辆的显示设备上自由呈现。其功能覆盖智能家居控制、情感陪伴、学习交流、健康管理、安全防护、个人购物、外出导航及酒店预订等多个方面。

为了实现 **"小粒"** 的终极愿景，我们决定将这个项目以开源的方式向全球开发者、研究者和技术爱好者开放，共同打造一个高度智能、情感化和人性化的数字人管家。我们相信，通过全球技术社区的力量和智慧，**"小粒"** 将成为用户生活中不可或缺的伙伴，为每个人提供更加贴近人性的陪伴与服务。

简介视频：https://www.bilibili.com/video/BV17WNBezExr/?spm_id_from=333.1387.homepage.video_card.click&vd_source=886ba95d2a89cdc08080f76e5023b688

**现在实现的功能都在metahuman-stream 分支上,主分支还没改造完成。**

metahuman-stream是lipku 大佬开源的数字人框架，具体部署教程移步到这https://github.com/lipku/LiveTalking

慢慢推出使用教程：

AI数字人+HA开源项目AI Sphere Butler如何自定义训练全能管家形象
简约教程见：https://bbs.hassbian.com/thread-28622-1-1.html （讨论请联系我们vx）
效果视频：https://www.bilibili.com/video/BV1c9wQe1EoE/?spm_id_from=333.1387.homepage.video_card.click&vd_source=886ba95d2a89cdc08080f76e5023b688

以下是关于开源计划的详细说明，以及为什么它值得您加入共建。

---

### **为什么选择开源？**

1. **集思广益，快速迭代**：
   - 开源带来了社区协作的力量，全球开发者可以一起贡献代码、算法、设计和想法，推动项目以更快的速度迭代和发展。
   - 通过吸纳来自不同行业的经验和智慧，**"小粒"** 能够更好地适应复杂多样的用户需求和场景。

2. **透明与信任**：
   - 开源让项目的开发过程完全透明，用户能够清晰了解 **"小粒"** 是如何构建和运行的。这种透明性不仅增强了用户的信任，还为项目的安全性和隐私保护提供了更高的保障。

3. **技术普惠**：
   - 我们希望通过开源技术，降低准入门槛，让更多的人能够利用 **"小粒"** 的能力服务于更多场景，如教育、医疗、社会公益等。

4. **全球影响力**：
   - 一项开源的项目，不仅仅是技术的合作，更是全球开发者共同追求创新目标的过程。共同打造 **"小粒"**，不仅是技术的突破，更是一种人类对智能化生活愿景的探索。

---

### **项目架构及规划**

为了吸引更多的人参与，我们需要对项目架构进行清晰的描述，帮助开发者快速理解项目的核心模块，并找到适合他们贡献的切入点。

#### **1. 项目模块化设计**
**"小粒"** 的功能丰富，因此我们将其分为几个核心模块，每个模块独立开发并可协同工作：

1. **视觉交互模块（视觉与表情）**：
   - 任务：打造高度逼真的“虚拟形象”，实现面部表情动态、自然动作模拟及多设备适配。
   - 技术栈：Unity、Unreal Engine、三维建模（Blender）、OpenCV、MediaPipe。

2. **语音交互模块（听觉与语音合成）**：
   - 任务：搭建高精度语音识别、自然语言理解（NLU）和人类语音合成（TTS）系统。
   - 技术栈：Whisper、Coqui TTS、Vosk、Hugging Face Transformers。

3. **情感计算与心理支持模块**：
   - 任务：通过情感分析理解用户情绪，并提供适当的心理互动或安慰。
   - 技术栈：情感分析模型（BERT、RoBERTa）、对话情感识别框架（OpenAI GPT，Rasa）。

4. **智能家居与物联网模块**：
   - 任务：支持主流的智能家居协议（如 Zigbee、Z-Wave、Matter）和设备对接，实时控制和建议。
   - 技术栈：MQTT、OpenHAB、Home Assistant。

5. **学习与知识模块**：
   - 任务：提供知识共享和学习支持服务，包括个性化推荐、语言学习助手等。
   - 技术栈：推荐算法、NLP工具（spaCy、fastText）、多语言模型（Google Translate API、DeepL）。

6. **健康与安全模块**：
   - 任务：结合健康监测设备，提供健康建议、紧急响应服务。
   - 技术栈：可穿戴设备API（Apple HealthKit、Fitbit）、边缘计算、时序数据分析（InfluxDB）。

7. **跨平台兼容性模块**：
   - 任务：确保 **"小粒"** 可在电视、平板、手机、车载设备等多种终端上呈现。
   - 技术栈：React Native、Flutter、WebRTC。

---

## 开发计划

**一、虚拟管家模块**

- 流式对话数字人（目前选用metahuman-stream）
  - 支持自然流畅的人机对话体验。
  - 提供虚拟形象和声音克隆功能，方言对话，使数字人更具个性化。

- 虚拟大脑LLM/MM-Model 或 Multimodal Model（目前选用微调Qwen2.5LLM）
  - 基于微调后的Qwen2.5大型语言模型，赋予数字人更深层次的理解和响应能力。
  - 支持自定义本地LLM以满足特定需求。

- 唤醒模式
  - 通过特定关键词或短语激活系统，实现便捷的启动方式。

- 身份识别（声纹识别、人脸识别）
  - 结合声纹识别与人脸识别技术确保用户的安全性和个性化服务。

- 支持打断/追问
  - 允许用户在对话中随时提问或打断，提升交互灵活性和自然度。

- 一键切换声音和形象
  - 提供简便的操作界面，让用户能够快速更换数字人管家的声音和外观。

-  一键自定义换装
  -  提供简便的操作界面，让用户能够快速更换数字人管家的服装。

**二、声纹识别模块**
- 实现高效的身份验证机制，增强系统的安全性和用户体验。

**三、人脸识别模块**
- 提供额外的安全层，并支持个性化的用户服务。

**四、物联网联动模块（选用Home Assistant）**
- 使用Home Assistant平台管理并控制家中的所有智能设备，实现智能家居的无缝连接。

**五、联网新闻播报模块**
- 实时获取最新资讯，并以语音形式为用户播报重要新闻。

**六、互动反馈模块**
- 触觉反馈：模拟真实世界的触觉感受，提升用户交互的真实感。
- 嗅觉反馈：通过气味传感器模拟真实世界的闻气味，提升用户交互的真实感。
- 距离反馈：通过超声波传感器模拟真实世界的距离远近和室内位置距离，提升用户交互的真实感。

**七、视觉模块（图像识别和OCR）**
- 利用先进的图像处理技术进行物体识别和文字提取，支持多种应用场景。

**八、实时时间模块**
- 提供准确的时间显示，帮助用户掌握当前时刻。

**九、实时日历模块**
- 详细的日程安排，便于用户规划日常活动。

**十、事件提醒模块**
- 及时的事件提醒功能，确保用户不会错过任何重要事项。

**十一、天气播报模块**
- 根据地理位置提供详细的天气预报信息。

**十二、定位导航模块**
- 支持地图浏览、路径规划等功能，方便用户的出行安排。

**十三、娱乐模块**
- 整合音乐播放功能，让用户享受个性化的音乐体验。
- 可以让管家唱歌跳舞表演。
- 可以让管家陪你看电视电影互动
- 可以让管家一起玩游戏互动。

**十四、网店购物模块**
- 提供便捷的商品搜索、比价、下单等一站式购物服务。
- 提供点外卖等服务。

**十五、健康监管模块**
- 监测用户的健康数据，如心率、睡眠质量等，并给出相应的健康建议。

**十六、安防模块**
- 通过摄像头实时监控家庭安全状况，异常情况即时报警。

**十七、管家记忆模块**
- 能够记住用户的偏好、历史交互和情感状态，提供更加个性化和贴心的服务，如同与一位熟悉的老朋友互动般自然。

**十八、视频通话模块**
- 支持高清视频通话，保持与家人朋友的紧密联系。

**十九、主人代理行为模块**
- 可代表用户执行一些日常任务，如接听电话、社交互动等，极大提高生活效率。

**二十、情感识别模块**
- 声音语调分析
  - 语调变化检测：通过分析用户的语音输入中的音高、节奏、强度等特征来判断其情绪状态，如快乐、悲伤、愤怒或平静。
  - 语境推理：不仅仅依赖于单个词语或句子的意义，而是考虑整个对话上下文，以便更准确地捕捉用户的情感倾向。

- 脸部表情识别
  - 实时面部追踪：利用摄像头捕捉用户的脸部动作，并通过深度学习算法实时分析面部表情，包括微笑、皱眉、眼神移动等细节。
  - 情感分类：根据面部肌肉的变化模式，自动识别出诸如高兴、惊讶、困惑、生气等多种情感类别。

- 综合情感评估
  - 多模态融合：结合声音语调和脸部表情的数据进行综合分析，提供一个更为全面和准确的情感评估结果。
  - 个性化调整：随着时间的推移，“小粒”会逐渐学习并适应每个用户的独特表达方式，从而提高情感识别的准确性。

**未来开发计划**

实体机器人管控模块

目标：实现对实体机器人的远程控制与管理，使“小粒”不仅能作为虚拟助手存在，还能通过实体机器人执行物理世界中的任务。

- 远程操控功能
        允许用户通过“小粒”直接控制实体机器人进行各种操作，如清洁、搬运物品等。

    状态监控与反馈
        提供实时的状态更新和视频反馈，让用户可以随时了解机器人当前的工作状态和环境情况。

    自动化任务调度
        根据用户的日常需求和偏好设置，自动安排实体机器人的工作日程，例如定时打扫房间或巡逻检查家庭安全状况。

    集成智能分析
        利用内置传感器收集的数据，“小粒”能够分析并优化机器人的行为模式，提高效率和服务质量。

无线脑机交互模块

目标：探索和发展无线脑机接口(BCI)技术，旨在为用户提供一种全新的交互方式，突破传统输入方法的限制。

- 基本思想传输
        开发基础级别的脑电信号识别技术，允许用户通过思考来发送简单的指令给“小粒”，比如打开灯、播放音乐等。

    情感识别与响应
        进一步深化情感计算能力，不仅基于语音和面部表情，还能通过脑电波变化来感知用户的情绪，并作出相应的反应。

    增强用户体验
        随着技术的进步，逐步增加复杂度更高的交互方式，如思维导航（通过想象目的地来指导导航系统）、意念书写等，极大地丰富用户的互动体验。

    隐私保护与伦理考量
        在推进技术创新的同时，严格遵守数据隐私法规，确保所有收集到的信息得到妥善处理。同时，积极探讨并解决相关伦理问题，保证技术发展符合社会价值观。


---

## 目前已开发功能--进度

**一、虚拟管家模块**
- 流式对话数字人（目前选用metahuman-stream）
- 虚拟大脑LLM/MM-Model 或 Multimodal Model（目前选用微调Qwen2.5LLM）
- 方言对话（未开发）
- 唤醒模式 （未开发）
- 身份识别（声纹识别、人脸识别）（未开发）
- 支持打断/追问（未开发）
- 一键切换声音和形象（未开发）
- 一键自定义换装（未开发）

**二、声纹识别模块**
- （未开发）

**三、人脸识别模块**
- （未开发）

**四、物联网联动模块（选用Home Assistant）**
- 已开发实现基础功能
https://www.bilibili.com/video/BV1n9CpY7E1o/?spm_id_from=333.1387.homepage.video_card.click

**五、联网新闻播报模块**
- 已开发实现基础功能
https://www.bilibili.com/video/BV1R26qYqEvo/?spm_id_from=333.1387.homepage.video_card.click

**六、互动反馈模块**
- 触觉反馈，已开发实现基础功能
https://www.bilibili.com/video/BV1jNrpYPEvG/?spm_id_from=333.1387.homepage.video_card.click
- 嗅觉反馈：（未开发）
- 距离反馈：（未开发）
- 
**七、视觉模块（图像识别和OCR）**
- 已开发实现基础功能
https://www.bilibili.com/video/BV1Rgc2e1EJu/?spm_id_from=333.1387.homepage.video_card.click

**八、实时时间模块**
- 已开发实现基础功能
https://www.bilibili.com/video/BV1h4CrYUEsc/?spm_id_from=333.1387.homepage.video_card.click

**九、实时日历模块**
- 已开发实现基础功能

**十、事件提醒模块**
- 已开发实现基础功能

**十一、天气播报模块**
- 已开发实现基础功能

**十二、定位导航模块**
- 已开发实现基础功能
https://www.bilibili.com/video/BV1TpfnYREwy/?spm_id_from=333.1387.homepage.video_card.click

**十三、娱乐模块**
- （未开发）

**十四、网店购物模块**
- （未开发）

**十五、健康监管模块**
- （未开发）

**十六、安防模块**
- （未开发）

**十七、管家记忆模块**
- 已开发实现基础功能

**十八、视频通话模块**
- （未开发）

**十九、主人代理行为模块**
- （未开发）

**二十、情感识别模块**
- （未开发）

---

## 系统设计目标

1. **模块化架构**：每个功能模块独立开发，通过标准化接口与核心系统集成，支持后期扩展和维护。
2. **统一管理系统**：提供一个集中式的界面，让用户可以直观地管理和操作所有功能模块。
3. **高扩展性与灵活性**：支持未来功能扩展，如实体机器人管控模块和无线脑机交互模块。
4. **用户友好性**：提供便捷的交互方式，简化复杂功能的使用。
5. **数据隐私与安全**：确保用户数据在采集、处理和存储环节的安全性，符合隐私保护法规。

---

## 系统架构设计

### **1. 技术架构**
系统采用**微服务架构**，每个模块作为独立的服务运行，核心管理系统负责调度和管理：

#### **1.1 前端**
- **框架**：React.js 或 Vue.js
- **UI组件库**：Ant Design、Material UI
- **功能**：
  - 仪表盘界面展示所有模块状态和入口。
  - 交互式模块管理页面，支持用户个性化设置。
  - 实时数据展示（如健康监测数据、情感分析结果）。

#### **1.2 后端**
- **主框架**：Python（Django 或 FastAPI） / Node.js
- **数据库**：PostgreSQL（结构化数据） + MongoDB（非结构化数据）
- **消息队列**：Kafka 或 RabbitMQ，用于模块间的异步通信。
- **接口协议**：REST API 或 GraphQL，提供统一的模块接口。

#### **1.3 模块通信**
- **消息传递**：通过 MQTT 或 WebSocket 实现模块间的实时通信。
- **模块注册**：每个模块启动时动态注册到核心系统，便于状态监控和调用。

#### **1.4 部署**
- **容器化**：通过 Docker 和 Kubernetes 管理模块的部署和扩展。
- **云服务**：支持 AWS、Azure 或阿里云，也可以本地部署（尤其是涉及隐私的功能）。

---

### **2. 系统功能模块管理**

#### **2.1 核心管理系统**
- **主要功能**：
  - **模块注册与状态管理**：动态监测模块的运行状态（在线/离线、性能数据）。
  - **任务调度**：根据用户请求调用相应模块（如语音指令触发智能家居控制）。
  - **用户管理**：支持多用户身份识别和个性化偏好设置。
  - **日志与审计**：记录模块运行日志和用户操作，方便排查问题。

#### **2.2 模块通信设计**
- **请求与响应**：
  - 用户交互通过核心管理系统发送请求。
  - 模块返回结果后，核心管理系统整合并展示给用户。
- **异步任务处理**：
  - 复杂任务（如图像识别、情感分析）通过异步消息队列处理，避免阻塞用户操作。

---

### **3. 功能模块实现方案**

以下是主要模块的设计和实现方案：

#### **3.1 虚拟管家模块**
- **技术**：
  - 对话：基于微调的 Qwen2.5 LLM 提供多轮对话能力。
  - 虚拟形象：使用 metahuman-stream 或 Unity3D 实现虚拟人物形象。
  - 声音克隆：整合 Coqui TTS 或类似技术实现个性化语音。
- **功能**：
  - 流式对话：支持实时语音/文本交互。
  - 唤醒模式：通过关键词激活（如“你好，小粒”）。
  - 一键切换形象：提供自定义界面快速更换虚拟人物外观和声音。

#### **3.2 声纹与人脸识别模块**
- **技术**：
  - 声纹识别：使用 Speaker Verification 模型（如 ResNet）。
  - 人脸识别：基于 Dlib 或 FaceNet 实现。
- **功能**：
  - 身份验证：确保用户安全登录和个性化服务。
  - 多用户支持：不同用户登录后加载其专属设置。

#### **3.3 物联网联动模块**
- **技术**：
  - 基于 Home Assistant，通过其 API 接入智能家居设备。
- **功能**：
  - 设备管理：支持灯光、空调等设备的控制。
  - 自动化规则：用户可设置触发条件（如“晚上自动关灯”）。

#### **3.4 情感识别模块**
- **技术**：
  - 语音分析：基于 Transformer 模型（如 Wav2Vec）。
  - 表情识别：使用 OpenCV 或深度学习框架分析面部表情。
  - 多模态融合：通过 TensorFlow 或 PyTorch 整合语音和图像数据。
- **功能**：
  - 实时情感监测：捕捉用户情绪变化并调整服务内容。
  - 用户学习：根据历史交互提升情感识别的准确性。

#### **3.5 健康监管模块**
- **技术**：
  - 数据采集：通过 wearable API（如 Fitbit、Apple HealthKit）。
  - 数据分析：时序数据存储与趋势分析（如 InfluxDB）。
- **功能**：
  - 实时健康监测：提供心率、睡眠等数据。
  - 健康建议：基于监测数据生成个性化建议。

#### **3.6 视频通话模块**
- **技术**：
  - WebRTC 实现低延迟高清视频通话。
- **功能**：
  - 支持多人通话和实时屏幕共享。

---

### **4. 管理界面设计**

#### **4.1 界面布局**
- **顶部导航栏**：
  - 快捷入口：如语音输入、搜索框。
  - 系统状态：显示当前在线模块数、健康状态等。
- **左侧菜单栏**：
  - 模块分类导航（如“虚拟管家”、“智能家居”、“健康监测”）。
- **主工作区**：
  - 仪表盘风格，展示模块的实时状态和快捷操作按钮。
  - 点击模块卡片进入详细界面（如健康监测数据图表）。
- **底部状态栏**：
  - 显示系统日志和实时消息通知。

#### **4.2 用户交互**
- **模块控制**：用户通过卡片式界面快速启用/停用模块。
- **实时反馈**：模块状态（如在线/离线）和任务进度实时更新。

---

### **5. 系统安全设计**
- **数据加密**：用户数据在存储和传输过程中均加密（使用 AES 或 TLS）。
- **权限管理**：基于用户角色控制模块访问权限。
- **隐私保护**：支持数据匿名化和本地存储，确保隐私安全。

---

### **未来扩展**
1. **实体机器人管控模块**：
   - **远程操控**：通过核心系统提供机器人控制界面。
   - **任务调度**：支持按照日程自动完成任务（如清扫、巡逻）。
2. **无线脑机交互模块**：
   - **脑电信号输入**：开发 EEG 设备接口。
   - **高级交互**：支持意念导航、简单指令（如开灯、播放音乐）。

---

### **开发计划**
#### **阶段 1：核心框架搭建**
- 开发核心管理系统，支持模块注册与调度。
- 实现虚拟管家模块和物联网联动模块的基本功能。

#### **阶段 2：功能模块集成**
- 集成情感识别、健康监测等功能模块。
- 优化用户管理和权限控制。

#### **阶段 3：扩展与优化**
- 添加未来功能（如实体机器人控制、无线脑机交互）。
- 迭代优化情感识别和 LLM 模型性能。

---

## 项目结构

ai-sphere-butler/  # 项目根目录
├── docs/                  # 项目文档
│   ├── README.md             # 项目介绍和快速入门指南 (Markdown格式)
│   ├── architecture.md      # 系统架构设计文档 (Markdown格式)
│   ├── api.md               # API 接口文档 (Markdown格式)
│   ├── contributing.md      # 贡献指南 (Markdown格式)
│   ├── installation.md      # 安装说明 (Markdown格式)
│   ├── usage.md             # 使用说明 (Markdown格式)
│   ├── faq.md               # 常见问题解答 (Markdown格式)
│   ├── license.md           # 开源许可证信息 (Markdown格式)
│   └── code_of_conduct.md   # 行为准则 (Markdown格式)
├── core/                    # 核心管理系统
│   ├── server/              # 后端服务
│   │   ├── main.py         # 主程序入口 (Python)
│   │   ├── config/
│   │   │   ├── settings.py  # 后端配置文件 (Python)
│   │   │   ├── logging.conf # 日志配置文件
│   │   │   └── database.ini # 数据库连接信息
│   │   ├── modules/         # 各功能模块的实现
│   │   │   ├── user_manager/
│   │   │   │   ├── __init__.py        # Python 包初始化文件
│   │   │   │   ├── models.py        # 数据库模型 (Python)
│   │   │   │   ├── routes.py        # API路由 (Python)
│   │   │   │   └── services.py       # 业务逻辑 (Python)
│   │   │   ├── dialog_manager/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── nlp.py           # 自然语言处理 (Python)
│   │   │   │   ├── context.py       # 对话上下文管理 (Python)
│   │   │   │   └── routes.py
│   │   │   ├── emotion_engine/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── models.py
│   │   │   │   └── analyzer.py      # 情感分析 (Python)
│   │   │   ├── skill_platform/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── registry.py      # 技能注册 (Python)
│   │   │   │   └── skills/
│   │   │   │       ├── __init__.py
│   │   │   │       ├── smart_home.py  # 智能家居技能 (Python)
│   │   │   │       ├── weather.py     # 天气技能 (Python)
│   │   │   │       └── ...            # 其他技能
│   │   │   ├── device_manager/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── controllers.py   # 设备控制 (Python)
│   │   │   │   └── discovery.py     # 设备发现 (Python)
│   │   │   ├── data_analysis/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── analytics.py     # 数据分析 (Python)
│   │   │   │   └── reporting.py    # 数据报告生成 (Python)
│   │   │   ├── security_manager/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── authentication.py # 身份验证 (Python)
│   │   │   │   └── authorization.py  # 权限管理 (Python)
│   │   │   └── ...                 # 其他模块
│   │   ├── api/                 # API 接口定义
│   │   │   ├── user.py           # 用户API (Python)
│   │   │   ├── device.py         # 设备API (Python)
│   │   │   ├── skill.py          # 技能API (Python)
│   │   │   └── ...
│   │   ├── utils/                # 工具函数和辅助类
│   │   │   ├── __init__.py
│   │   │   ├── logging.py        # 日志工具类 (Python)
│   │   │   ├── database.py       # 数据库工具类 (Python)
│   │   │   └── ...
│   │   └── tests/               # 后端测试
│   │       ├── __init__.py
│   │       ├── test_user_manager.py # 用户管理模块测试 (Python)
│   │       └── ...
│   ├── client/              # 前端客户端
│   │   ├── public/          # 静态资源
│   │   │   ├── index.html    # 主HTML文件
│   │   │   └── ...
│   │   ├── src/            # 源代码
│   │   │   ├── components/  # 组件
│   │   │   │   ├── Header.js    # 顶部导航栏组件 (JavaScript/React)
│   │   │   │   ├── Sidebar.js   # 侧边栏组件 (JavaScript/React)
│   │   │   │   ├── Dashboard.js # 仪表盘组件 (JavaScript/React)
│   │   │   │   ├── SkillCard.js # 技能卡片组件 (JavaScript/React)
│   │   │   │   └── ...
│   │   │   ├── pages/       # 页面
│   │   │   │   ├── Home.js      # 首页 (JavaScript/React)
│   │   │   │   ├── Settings.js  # 设置页面 (JavaScript/React)
│   │   │   │   └── ...
│   │   │   ├── services/    # 服务
│   │   │   │   ├── api.js      # API调用服务 (JavaScript)
│   │   │   │   ├── auth.js     # 身份验证服务 (JavaScript)
│   │   │   │   └── ...
│   │   │   ├── App.js           # 应用入口 (JavaScript/React)
│   │   │   ├── index.js         # 入口文件 (JavaScript/React)
│   │   │   ├── styles.css       # 样式表 (CSS)
│   │   │   └── ...
│   │   └── package.json     # 前端依赖管理
│   └── ...
├── modules/                # 可选的独立模块 (可根据需要增减)
│   ├── iot_control/       # 物联网控制模块 (示例)
│   │   ├── __init__.py
│   │   ├── config.yaml     # 模块配置文件 (YAML)
│   │   ├── handlers.py    # 事件处理 (Python)
│   │   └── ...
│   └── ...                 # 其他模块
├── models/                  # AI模型数据
│   ├── qwen-2.5/           # 预训练语言模型
│   ├── emotion_recognition/  # 情感识别模型
│   └── ...
├── data/                    # 数据存储
│   ├── user_data/          # 用户数据
│   ├── device_data/        # 设备数据
│   └── ...
├── scripts/                 # 脚本工具
│   ├── setup.sh            # 安装脚本 (Shell)
│   ├── run.sh              # 运行脚本 (Shell)
│   └── ...
├── tests/                   # 测试代码
│   ├── unit/               # 单元测试
│   ├── integration/        # 集成测试
│   └── ...
├── .gitignore               # Git忽略文件列表
├── LICENSE                  # 开源许可证文件
├── requirements.txt          # Python依赖包列表
└── setup.py                 # Python项目安装文件


---

### 运行逻辑图

1. **启动流程**
   - 主程序入口 (core/server/main.py):
     - 加载配置文件 (core/server/config/settings.py)
     - 初始化日志记录 (core/server/config/logging.conf)
     - 连接数据库 (core/server/config/database.ini)
     - 启动 Flask 或 Django 等 Web 框架服务器
     - 加载所有必要的模块和服务（如用户管理、对话管理等）

2. **用户交互流程**
   - 前端客户端 (core/client/src/)
     - 静态资源 (public/index.html):
       - 主 HTML 文件，加载 React 应用和其他静态资源
     - 源代码 (src/):
       - 组件 (components/)
       - 页面 (pages/)
       - 服务 (services/)
       - 入口文件 (App.js, index.js)
       - 样式表 (styles.css)
       - 前端依赖管理 (package.json)

3. **后端服务 (core/server/)**
   - API 接口定义 (core/server/api/)
     - user.py: 用户相关的 API 接口
     - device.py: 设备相关的 API 接口
     - skill.py: 技能相关的 API 接口
   - 各功能模块 (core/server/modules/)
     - 用户管理 (user_manager/)
     - 对话管理 (dialog_manager/)
     - 情感分析 (emotion_engine/)
     - 技能平台 (skill_platform/)
     - 设备管理 (device_manager/)
     - 数据与安全 (security_manager/)

4. **数据流**
   - 数据库 (core/server/config/database.ini)
     - 存储用户信息、设备状态、历史交互记录等
     - 使用 ORM 框架（如 SQLAlchemy）进行数据库操作 (core/server/utils/database.py)
   - AI 模型 (models/qwen-2.5/, emotion_recognition/)
     - 加载预训练的语言模型和情感识别模型
     - 在对话管理和情感分析中使用这些模型进行推理

5. **测试与维护**
   - 单元测试 (core/server/tests/)
   - 集成测试 (tests/integration/)
   - 部署与运维 (scripts/setup.sh, run.sh)

---

## 结语

我们诚邀您加入 **AI Sphere Butler** 的开源项目，携手共建智能、情感化的数字人管家。无论您是开发者、设计师，还是技术爱好者，您的参与都将为 **"小粒"** 带来新的可能性。感兴趣联系我们微信：LGDesk

感谢您的关注与支持！
